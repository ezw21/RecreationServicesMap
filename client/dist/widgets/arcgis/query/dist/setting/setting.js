System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-arcgis","jimu-ui/advanced/data-source-selector","jimu-ui/basic/list-tree","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-ui/basic/sql-expression-runtime","jimu-ui/advanced/resource-selector","jimu-ui/advanced/sql-expression-builder","jimu-arcgis/arcgis-data-source","jimu-for-builder/service"],(function(e){var t,i,s,o,a,n,l,r,c,p,d,h,u;return{setters:[function(e){t=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){a=e},function(e){n=e},function(e){l=e},function(e){r=e},function(e){c=e},function(e){p=e},function(e){d=e},function(e){h=e},function(e){u=e}],execute:function(){e(function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=478)}({0:function(e,i){e.exports=t},1:function(e,t){e.exports=i},115:function(e,t){e.exports=u},116:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M20.889 1.333h6.222a3.556 3.556 0 013.556 3.556v6.222a3.556 3.556 0 01-3.556 3.556h-6.222a3.556 3.556 0 01-3.556-3.556V4.889a3.556 3.556 0 013.556-3.556zM20 4v8h8V4h-8zM4.889 17.333h6.222a3.556 3.556 0 013.556 3.556v6.222a3.556 3.556 0 01-3.556 3.556H4.889a3.556 3.556 0 01-3.556-3.556v-6.222a3.556 3.556 0 013.556-3.556zM4 20v8h8v-8H4zm20 8a4 4 0 100-8 4 4 0 000 8zm0 2.667a6.667 6.667 0 110-13.334 6.667 6.667 0 010 13.334zM4.981 12h6.037L7.999 5.963 4.98 12zm4.212-9.615l5.176 10.352a1.334 1.334 0 01-1.192 1.93H2.825a1.333 1.333 0 01-1.192-1.929L6.809 2.386a1.332 1.332 0 012.385 0z"></path></svg>'},124:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.598L14.308.29a.991.991 0 011.402 1.402L9.402 8l6.308 6.308a.991.991 0 01-1.402 1.402L8 9.402 1.692 15.71A.991.991 0 01.29 14.308L6.598 8 .29 1.692A.991.991 0 011.692.29L8 6.598z" fill="#000" fill-rule="nonzero"></path></svg>'},134:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M2.307 6.479L4.677 4l-2.37-2.479a.517.517 0 010-.708.464.464 0 01.677 0l2.71 2.833a.517.517 0 010 .708l-2.71 2.833a.464.464 0 01-.677 0 .517.517 0 010-.708z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},14:function(e,t){e.exports=a},15:function(e,t){e.exports=n},168:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 01.708 0 .464.464 0 010 .677l-2.833 2.71a.517.517 0 01-.708 0L.813 2.983a.464.464 0 010-.677.517.517 0 01.708 0z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},169:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 5.693a.517.517 0 01-.708 0 .464.464 0 010-.677l2.833-2.71a.517.517 0 01.708 0l2.833 2.71a.464.464 0 010 .677.517.517 0 01-.708 0L4 3.323l-2.479 2.37z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},17:function(e,t){e.exports=l},170:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 32"><path d="M38.784 9.778v2.962H3.236V9.778h.074L13.086.002l2.111 2.111-7.702 7.665h31.29zM3.236 21.628h31.327l-7.702 7.702 2.111 2.111 9.776-9.813h.037v-2.962H3.237v2.962z"></path></svg>'},171:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 10"><path d="M0 10h15V4H0v6zm1-5h13v4h-1V6h-1v3h-1V7h-1v2H9V6H8v3H7V7H6v2H5V6H4v3H3V7H2v2H1V5zm11-5v1H3V0H0v3h3V2h9v1h3V0h-3zM2 2H1V1h1v1zm12 0h-1V1h1v1z" fill="#000" fill-rule="nonzero"></path></svg>'},172:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 16"><g fill="#000" fill-rule="nonzero"><path d="M4 8h1v3H4V8zM2 9h1v2H2V9zm6-1h1v3H8V8zm4 0h1v3h-1V8z"></path><path d="M15 12V6h-2V5h1V2h-3v1L4 1.05V0H1v3h1v3H0v6h2v1H1v3h3v-1h7v1h3v-3h-1v-1h2zm-3-9h1v1h-1V3zm-8-.92L11 4v1h1v1H3V3h1v-.92zM2 1h1v1H2V1zm1 14H2v-1h1v1zm8-1H4v-1H3v-1h9v1h-1v1zm2 1h-1v-1h1v1zM1 11V7h13v4H1z"></path><path d="M6 9h1v2H6V9zm4 0h1v2h-1V9z"></path></g></svg>'},173:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814zM16 0v11H8.5v-1H15V1H6v2.5H5V0h11z" fill="#363636" fill-rule="nonzero"></path></svg>'},2:function(e,t){e.exports=s},24:function(e,t,i){"use strict";var s;i.d(t,"a",(function(){return s})),i.d(t,"j",(function(){return o})),i.d(t,"e",(function(){return n})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return r})),i.d(t,"k",(function(){return c})),i.d(t,"i",(function(){return p})),i.d(t,"l",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"d",(function(){return u})),i.d(t,"b",(function(){return m})),i.d(t,"h",(function(){return S})),function(e){e.Point="Point",e.Polyline="Polyline",e.Polygon="Polygon",e.Rectangle="Rectangle",e.Circle="Circle"}(s||(s={}));const o=()=>({[s.Point]:{drawToolName:"point",esriClassName:"esri-icon-map-pin",toolIndex:4},[s.Polyline]:{drawToolName:"polyline",esriClassName:"esri-icon-polyline",toolIndex:3},[s.Polygon]:{drawToolName:"polygon",esriClassName:"esri-icon-polygon",toolIndex:1},[s.Rectangle]:{drawToolName:"rectangle",esriClassName:"esri-icon-checkbox-unchecked",toolIndex:0},[s.Circle]:{drawToolName:"circle",esriClassName:"esri-icon-radio-unchecked",toolIndex:2}});var a,n,l,r;!function(e){e.NewSelection="NEW_SELECTION",e.AddToSelection="ADD_TO_CURRENT_SELECTION",e.RemoveFromSelection="REMOVE_FROM_CURRENT_SELECTION",e.SubsetSelection="SUBSET_FROM_CURRENT_SELECTION",e.SwitchSelction="SWITCH_CURRENT_SELECTION"}(a||(a={})),function(e){e.Block="BLOCK",e.Inline="INLINE",e.Popper="POPPER"}(n||(n={})),function(e){e.CurrentMapExtent="CurrentMapExtent",e.InteractiveDrawMode="InteractiveDrawMode",e.ReturnAllFeatures="ReturnAllFeatures"}(l||(l={})),function(e){e.Intersect="Intersect",e.Contain="Contain",e.Cross="Cross",e.EnvelopeIntersect="EnvelopeIntersect",e.IndexIntersect="IndexIntersect",e.Overlap="Overlap",e.Touch="Touch",e.Within="Within"}(r||(r={}));const c=()=>({[r.Intersect]:"intersects",[r.Contain]:"contains",[r.Cross]:"crosses",[r.EnvelopeIntersect]:"envelope-intersects",[r.IndexIntersect]:"index-intersects",[r.Overlap]:"overlaps",[r.Touch]:"touches",[r.Within]:"within"});var p;!function(e){e.Miles="Miles",e.Kilometers="Kilometers",e.Feet="Feet",e.Meters="Meters",e.Yards="Yards",e.NauticalMiles="NauticalMiles"}(p||(p={}));const d=()=>({[p.Miles]:"miles",[p.Kilometers]:"kilometers",[p.Feet]:"feet",[p.Meters]:"meters",[p.Yards]:"yards",[p.NauticalMiles]:"nauticalMiles"});var h,u,m,g,S;!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical"}(h||(h={})),function(e){e.MultiPage="MultiPage",e.LazyLoad="LazyLoad"}(u||(u={})),function(e){e.PopupSetting="PopupSetting"}(m||(m={})),function(e){e.Asc="Asc",e.Desc="Desc"}(g||(g={})),function(e){e.DefaultSymbol="DefaultSymbol",e.CustomSymbol="CustomSymbol"}(S||(S={}))},26:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"e",(function(){return l})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return c})),i.d(t,"f",(function(){return p})),i.d(t,"b",(function(){return d}));var s=i(0),o=i(1);const{useState:a}=s.React,n=s.themeUtils.withTheme(e=>{const{theme:t,className:i,title:a,titleElement:n,disabled:l,icon:r,onClick:c,onClickIcon:p,templateType:d="collapsable",children:h}=e,u=[()=>r&&Object(s.jsx)(o.Button,{className:"ui-unit-nav-line-button",size:"sm",type:"tertiary",disabled:!!l,icon:!0,onClick:p},Object(s.jsx)(o.Icon,{size:16,color:t.colors.black,icon:r})),()=>Object(s.jsx)("span",{className:"ui-unit-nav-line-title text-truncate",title:a},n||Object(s.jsx)("span",{className:"text-truncate"},a)),()=>Object(s.jsx)("span",{className:"ui-unit-nav-line-option text-truncate"},h)];return["collapsable","enter"].includes(d)&&u.push(u.shift()),Object(s.jsx)("div",{className:`${i||""} ui-unit-nav-line ui-unit-nav-line_type-${d} ui-unit-nav-line_disabled-${!!l}`,onClick:l?null:c},u.map((e,t)=>Object(s.jsx)(s.React.Fragment,{key:t},e())))}),l=e=>{const{initState:t={},children:i}=e,o=!0,n=null,l={visible:a("visible"in t?t.visible:o),refContainer:a("refContainer"in t?t.refContainer:n),customData:a(Object.assign({},t.customData))};return Object(s.jsx)(s.React.Fragment,null,i(l))},r=s.themeUtils.withTheme(e=>{const{theme:t,panelVisible:i,setPanelVisible:a,getI18nMessage:n,isModal:l=!0,title:r=n("queryMessage"),bodyContent:c="",hasHeader:p=!0,hasFooter:d=!0}=e,h=()=>a(!1),u=()=>Object(s.jsx)(s.React.Fragment,null,p&&Object(s.jsx)(o.PanelHeader,{className:"py-2",title:r,onClose:h}),Object(s.jsx)(o.ModalBody,null,c),d&&Object(s.jsx)(o.ModalFooter,null,Object(s.jsx)(o.Button,{onClick:h},n("ok"))));return l?Object(s.jsx)(o.Modal,{className:"ui-unit-dialog-panel",isOpen:i,toggle:h,backdrop:"static"},u()):Object(s.jsx)("div",{className:"ui-unit-dialog-panel modal-dialog "+(i?"":"collapse"),css:s.css`
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${t.colors.palette.light[600]};
          color: ${t.colors.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `},Object(s.jsx)("div",{className:"modal-content"},u()))});var c;!function(e){e.None="",e.Init="init",e.Loading="loading",e.Loaded="loaded",e.Warning="warning",e.Error="error"}(c||(c={}));const p=s.themeUtils.withTheme(e=>{const{theme:t,className:i,title:o,statusType:a}=e;return a&&Object(s.jsx)("div",{className:`${null!=i?i:""} ui-unit-status-indicator ui-unit-status-indicator_status-type-${a}`,title:o,css:s.css`
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${null===(r=null===(l=null===(n=null==t?void 0:t.colors)||void 0===n?void 0:n.palette)||void 0===l?void 0:l.light)||void 0===r?void 0:r[400]};
          border-radius: 50%;
          border-top: 1px solid ${null===(d=null===(p=null===(c=null==t?void 0:t.colors)||void 0===c?void 0:c.palette)||void 0===p?void 0:p.primary)||void 0===d?void 0:d[600]};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `});var n,l,r,c,p,d}),d=s.themeUtils.withTheme(e=>{const{className:t,templateType:i="line",entityNote:o}=e;return o&&Object(s.jsx)("div",{className:`${null!=t?t:""} ui-unit-entity-status ui-unit-entity-status_type-${i}`,css:s.css`
    &.ui-unit-entity-status {
      display: flex;
      align-items: center;
      > .jimu-icon {
        flex: none;
        + .ui-unit-entity-status__message {
          margin-left: .25rem;
        }
      }
    }
  `},i&&Object(s.jsx)(s.React.Fragment,null,null==o?void 0:o.renderIcon(null==o?void 0:o.message),"line"===i&&Object(s.jsx)("div",{className:"ui-unit-entity-status__message"},null==o?void 0:o.message)))})},262:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTE0LjQxNzIgMEgwVjEyLjg4ODNINS42MDY3MVYxMi4wODI3SDAuODAwOTU4VjAuODA1NTE2SDEzLjYxNjNWNi4wNDEzN0gxNC40MTcyVjBaIiBmaWxsPSJ3aGl0ZSIvPg0KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNDEyNSAxNC45MDIxQzExLjUwNzggMTQuOTAyMSAxMi41MDk4IDE0LjUwMDEgMTMuMjgwNCAxMy44MzQ2TDE1LjQzMzYgMTZMMTYgMTUuNDMwNUwxMy44Mzg2IDEzLjI1NjhDMTQuNDUwOSAxMi40OTU5IDE0LjgxNzcgMTEuNTI2OCAxNC44MTc3IDEwLjQ3MTdDMTQuODE3NyA4LjAyNDg4IDEyLjg0NTQgNi4wNDEzNyAxMC40MTI1IDYuMDQxMzdDNy45Nzk1MiA2LjA0MTM3IDYuMDA3MTkgOC4wMjQ4OCA2LjAwNzE5IDEwLjQ3MTdDNi4wMDcxOSAxMi45MTg1IDcuOTc5NTIgMTQuOTAyMSAxMC40MTI1IDE0LjkwMjFaTTEwLjQxMjUgMTQuMDk2NUMxMi40MDMxIDE0LjA5NjUgMTQuMDE2OCAxMi40NzM3IDE0LjAxNjggMTAuNDcxN0MxNC4wMTY4IDguNDY5NzIgMTIuNDAzMSA2Ljg0Njg5IDEwLjQxMjUgNi44NDY4OUM4LjQyMTg0IDYuODQ2ODkgNi44MDgxNCA4LjQ2OTcyIDYuODA4MTQgMTAuNDcxN0M2LjgwODE0IDEyLjQ3MzcgOC40MjE4NCAxNC4wOTY1IDEwLjQxMjUgMTQuMDk2NVoiIGZpbGw9IndoaXRlIi8+DQogICAgPHBhdGggZD0iTTIuNDAyODcgMi40MTY1NUgxMi4wMTQ0VjMuMjIyMDdIMi40MDI4N1YyLjQxNjU1WiIgZmlsbD0id2hpdGUiLz4NCiAgICA8cGF0aCBkPSJNNy4yMDg2MiA0LjgzMzFIMi40MDI4N1Y1LjYzODYxSDcuMjA4NjJWNC44MzMxWiIgZmlsbD0id2hpdGUiLz4NCiAgICA8cGF0aCBkPSJNMi40MDI4NyA3LjI0OTY1SDQuODA1NzVWOC4wNTUxNkgyLjQwMjg3VjcuMjQ5NjVaIiBmaWxsPSJ3aGl0ZSIvPg0KICAgIDxwYXRoIGQ9Ik00LjgwNTc1IDkuNjY2MkgyLjQwMjg3VjEwLjQ3MTdINC44MDU3NVY5LjY2NjJaIiBmaWxsPSJ3aGl0ZSIvPg0KPC9zdmc+DQo="},263:function(e,t){e.exports='<svg viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.467 0h1.066v2H7.467V0zM14.308 2l.755.707-1.509 1.414-.754-.707L14.308 2zM13.867 7H16v1h-2.133V7zM1.82 2l-.753.707 1.508 1.414.754-.707L1.821 2zM0 7v1h2.133V7H0z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12.8 7.5c0 1.56-.847 2.935-2.133 3.742V14H5.333v-2.758C4.047 10.435 3.2 9.06 3.2 7.5 3.2 5.015 5.349 3 8 3s4.8 2.015 4.8 4.5zm-2.727 2.911l-.473.297V13H6.4v-2.292l-.473-.297c-1.004-.63-1.66-1.698-1.66-2.911C4.267 5.567 5.938 4 8 4c2.062 0 3.733 1.567 3.733 3.5 0 1.213-.657 2.282-1.66 2.911z" fill="#000"></path></svg>'},264:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgNjggNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cmVjdCB4PSI0IiB5PSI0IiB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxIiBmaWxsPSIjMjgyODI4Ii8+DQo8cmVjdCB4PSI4IiB5PSI4IiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjEwIiB5PSIxMCIgd2lkdGg9IjI2IiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2LjY0NjQgMTJMNTUgMTAuMzUzNkw1NS43MDcxIDkuNjQ2NDhMNTguMDYwNyAxMkw1NS43MDcxIDE0LjM1MzZMNTUgMTMuNjQ2NUw1Ni42NDY0IDEyWiIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iMTkiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTAiIHk9IjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTYuNjQ2NCAyM0w1NSAyMS4zNTM2TDU1LjcwNzEgMjAuNjQ2NUw1OC4wNjA3IDIzTDU1LjcwNzEgMjUuMzUzNkw1NSAyNC42NDY1TDU2LjY0NjQgMjNaIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSIzMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjgiIHJ4PSIxIiBmaWxsPSIjMzYzNjM2Ii8+DQo8cmVjdCB4PSIxMCIgeT0iMzIiIHdpZHRoPSIyNiIgaGVpZ2h0PSI0IiByeD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ni42NDY0IDM0TDU1IDMyLjM1MzZMNTUuNzA3MSAzMS42NDY1TDU4LjA2MDcgMzRMNTUuNzA3MSAzNi4zNTM2TDU1IDM1LjY0NjVMNTYuNjQ2NCAzNFoiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjgiIHk9IjQxIiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjEwIiB5PSI0MyIgd2lkdGg9IjI2IiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2LjY0NjQgNDVMNTUgNDMuMzUzNkw1NS43MDcxIDQyLjY0NjVMNTguMDYwNyA0NUw1NS43MDcxIDQ3LjM1MzZMNTUgNDYuNjQ2NUw1Ni42NDY0IDQ1WiIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iNTIiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTAiIHk9IjU0IiB3aWR0aD0iMjYiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTYuNjQ2NCA1Nkw1NSA1NC4zNTM2TDU1LjcwNzEgNTMuNjQ2NUw1OC4wNjA3IDU2TDU1LjcwNzEgNTguMzUzNkw1NSA1Ny42NDY1TDU2LjY0NjQgNTZaIiBmaWxsPSIjNTI1MjUyIi8+DQo8L3N2Zz4NCg=="},265:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgNjggNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cmVjdCB4PSI0IiB5PSI0IiB3aWR0aD0iNjAiIGhlaWdodD0iMTUiIHJ4PSIxIiBmaWxsPSIjMjgyODI4Ii8+DQo8cmVjdCB4PSI4IiB5PSI4IiB3aWR0aD0iMTUiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjI1IiB5PSI4IiB3aWR0aD0iMTkiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiM1MjUyNTIiLz4NCjxwYXRoIGQ9Ik00IDI0LjEyNzRDNCAyMy41NzUyIDQuNDQ3NzIgMjMuMTI3NCA1IDIzLjEyNzRINDdDNDcuNTUyMyAyMy4xMjc0IDQ4IDIzLjU3NTIgNDggMjQuMTI3NFY2M0M0OCA2My41NTIzIDQ3LjU1MjMgNjQgNDcgNjRINUM0LjQ0NzcxIDY0IDQgNjMuNTUyMyA0IDYzVjI0LjEyNzRaIiBmaWxsPSIjMzYzNjM2Ii8+DQo8cmVjdCB4PSI4IiB5PSIyNiIgd2lkdGg9IjIxIiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBkPSJNNDEuNzA3MSAyNkw0MSAyNi43MDcxTDQyLjQxNDIgMjguMTIxM0w0MSAyOS41MzU1TDQxLjcwNzEgMzAuMjQyNkw0My4xMjEzIDI4LjgyODRMNDQuNTM1NSAzMC4yNDI2TDQ1LjI0MjYgMjkuNTM1NUw0My44Mjg0IDI4LjEyMTNMNDUuMjQyNiAyNi43MDcxTDQ0LjUzNTUgMjZMNDMuMTIxMyAyNy40MTQyTDQxLjcwNzEgMjZaIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSIzNSIgd2lkdGg9IjM2IiBoZWlnaHQ9IjMiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjgiIHk9IjQyIiB3aWR0aD0iMzYiIGhlaWdodD0iMyIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iNDkiIHdpZHRoPSIzNiIgaGVpZ2h0PSIzIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSI1NiIgd2lkdGg9IjI5IiBoZWlnaHQ9IjMiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjQ2IiB5PSI4IiB3aWR0aD0iMTQiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiM1MjUyNTIiLz4NCjwvc3ZnPg0K"},266:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgNjggNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cmVjdCB4PSI0IiB5PSI0IiB3aWR0aD0iOCIgaGVpZ2h0PSI4IiByeD0iMiIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZD0iTTQgMTZDNCAxNS40NDc3IDQuNDQ3NzIgMTUgNSAxNUg2M0M2My41NTIzIDE1IDY0IDE1LjQ0NzcgNjQgMTZWNjNDNjQgNjMuNTUyMyA2My41NTIzIDY0IDYzIDY0SDVDNC40NDc3MSA2NCA0IDYzLjU1MjMgNCA2M1YxNloiIGZpbGw9IiMyODI4MjgiLz4NCjxyZWN0IHg9IjgiIHk9IjE5IiB3aWR0aD0iMjEiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGQ9Ik01NS43MDcxIDE5TDU1IDE5LjcwNzFMNTYuNDE0MiAyMS4xMjEzTDU1IDIyLjUzNTVMNTUuNzA3MSAyMy4yNDI2TDU3LjEyMTMgMjEuODI4NEw1OC41MzU1IDIzLjI0MjZMNTkuMjQyNiAyMi41MzU1TDU3LjgyODQgMjEuMTIxM0w1OS4yNDI2IDE5LjcwNzFMNTguNTM1NSAxOUw1Ny4xMjEzIDIwLjQxNDJMNTUuNzA3MSAxOVoiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjgiIHk9IjI5IiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjEwIiB5PSIzMSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2LjY0NjQgMzNMNTUgMzEuMzUzNkw1NS43MDcxIDMwLjY0NjVMNTguMDYwNyAzM0w1NS43MDcxIDM1LjM1MzZMNTUgMzQuNjQ2NUw1Ni42NDY0IDMzWiIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iNDAiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTAiIHk9IjQyIiB3aWR0aD0iMjYiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTYuNjQ2NCA0NEw1NSA0Mi4zNTM2TDU1LjcwNzEgNDEuNjQ2NUw1OC4wNjA3IDQ0TDU1LjcwNzEgNDYuMzUzNkw1NSA0NS42NDY1TDU2LjY0NjQgNDRaIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSI1MSIgd2lkdGg9IjUyIiBoZWlnaHQ9IjgiIHJ4PSIxIiBmaWxsPSIjMzYzNjM2Ii8+DQo8cmVjdCB4PSIxMCIgeT0iNTMiIHdpZHRoPSIyNiIgaGVpZ2h0PSI0IiByeD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ni42NDY0IDU1TDU1IDUzLjM1MzZMNTUuNzA3MSA1Mi42NDY1TDU4LjA2MDcgNTVMNTUuNzA3MSA1Ny4zNTM2TDU1IDU2LjY0NjVMNTYuNjQ2NCA1NVoiIGZpbGw9IiM1MjUyNTIiLz4NCjwvc3ZnPg0K"},267:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},268:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 13a7 7 0 115.621-2.828l-.222.284 3.405 3.404a.668.668 0 01-.944.944L11.456 12.4A6.974 6.974 0 017 14z" fill="#000" fill-rule="nonzero"></path></svg>'},269:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M14.376 10.573l1.647.927-8 4.5-8-4.5 1.648-.927 1.02.574-.628.353 5.96 3.353 5.96-3.353-.627-.353 1.02-.574zm-.999-2.414l.606.341-5.96 3.353L2.063 8.5l.607-.341-1.02-.574L.023 8.5l8 4.5 8-4.5-1.626-.915-1.02.574zM8.023 1.023l-8 4.5 8 4.5 8-4.5-8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353-5.96-3.353z" fill="#000" fill-rule="nonzero"></path></svg>'},270:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.1 6.9h6.8V.1H.1v6.8zm6-.8H3.985c.077-.403.25-.78.506-1.102a4.574 4.574 0 001.609.805V6.1zm0-1.128a3.758 3.758 0 01-1.006-.523c.31-.203.65-.358 1.006-.459v.982zM6.1.9v2.266a4.229 4.229 0 00-1.613.73 6.038 6.038 0 01-1.1-1.767l.002-.004-.004-.001A8.16 8.16 0 012.99.9H6.1zM.9.9h1.266a8.7 8.7 0 00.359 1.249A1.93 1.93 0 01.9 3.188V.9zm0 3.09a2.828 2.828 0 002.006-.966c.262.519.594 1 .987 1.428A3.367 3.367 0 003.17 6.1H.9V3.99zM9.1.1v6.8h6.8V.1H9.1zm.8.8h4.063a.373.373 0 01-.045.2.594.594 0 01-.438.176 1.637 1.637 0 00-1.175.49.91.91 0 00-.203.708c-.001.007-.114.736-.607.742a.74.74 0 00-.719.384.828.828 0 00-.026.6H9.9V.9zm5.2 5.2H9.9V5h2.296l-.474-.639a1.562 1.562 0 01-.192-.346c1.041-.03 1.37-1.188 1.365-1.587a.19.19 0 01.028-.154c.031-.037.166-.162.624-.2.419 0 .81-.205 1.049-.549a1.13 1.13 0 00.16-.625h.344v5.2zm-15 9.8h6.8V9.1H.1v6.8zm.8-6h5.2v.46l-2 1.973v.867l-3.2-.089V9.9zm0 4.01l4 .112v-1.355l1.2-1.182V15.1H.9v-1.19zm8.2 1.99h6.8V9.1H9.1v6.8zm6-.8h-1.792l-1.27-1.572 1.468-1.468 1.594 1.605V15.1zm0-5.2v2.628L12.49 9.9h2.61zm-5.2 0h1.46l1.581 1.592-1.978 1.98 1.316 1.628H9.9V9.9z" fill="#000" fill-rule="nonzero"></path></svg>'},271:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 11v4.001L5 15v1H0v-5h1zm15 0v5h-5v-1l4 .001V11h1zM5 0v1L1 .999V5H0V0h5zm11 0v5h-1V.999L11 1V0h5z" fill="#000" fill-rule="nonzero"></path></svg>'},272:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 9v6h16V9H0zm15 3h-1v2h-1v-3h-1v3h-1v-2h-1v2H9v-3H8v3H7v-2H6v2H5v-3H4v3H3v-2H2v2H1v-4h14v2zm.18-7.5l-2.85 2.85-.71-.7L13.23 5H9V4h4.32l-1.7-1.69.71-.7 2.85 2.89zM2.68 4H7v1H2.77l1.61 1.65-.71.7L.82 4.5l2.85-2.85.71.7L2.68 4z" fill="#000" fill-rule="nonzero"></path></svg>'},273:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16"><g fill="#363636" fill-rule="nonzero"><path d="M.75 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.75 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814z"></path><path d="M8.721 0c1.82 0 2.865 1.556 2.865 4.35 0 .462.12.66.385.774.219.093.473.126.99.131h.551l.397.009c1.251.05 1.807.336 2.04 1.333.41 1.76-1.62 3.114-5.904 4.313l-.326.09-.245-.999.64-.18c3.516-1.02 5.088-2.089 4.88-2.979-.094-.407-.382-.535-1.304-.553l-.787-.002c-.62-.008-.943-.055-1.3-.207-.648-.276-.998-.859-.998-1.73 0-2.286-.694-3.318-1.884-3.318-.731 0-1.68.55-2.815 1.685l-.215.22L5 2.203C6.398.748 7.626 0 8.721 0z"></path></g></svg>'},274:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="#363636" fill-rule="nonzero"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814z"></path><path d="M10.318 0C13.456 0 16 2.462 16 5.5S13.456 11 10.318 11a5.796 5.796 0 01-3.023-.842l-.22-.142.54-.752c.788.53 1.722.82 2.703.82 2.615 0 4.735-2.053 4.735-4.584 0-2.531-2.12-4.583-4.735-4.583-1.916 0-3.617 1.112-4.354 2.779l-.078.187L5 3.56C5.827 1.435 7.933 0 10.318 0z"></path></g></svg>'},275:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="#363636" fill-rule="nonzero"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814zM9.72 1.11l.588-.808 5.082 3.7-4.577 2.656L14.61 9.49l-.598.801L9 6.555l4.56-2.649z"></path></g></svg>'},276:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814zM12 6a2 2 0 100-4 2 2 0 000 4z" fill="#363636" fill-rule="nonzero"></path></svg>'},277:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 0v16H0V0h16zM7.077 1H1v14h10.561L7.078 7.616 7.077 1zM15 6.391L9.56 9.779 12.73 15H15V6.391zM15 1H8.077v6.335l.965 1.589L15 5.213V1z" fill="#363636" fill-rule="nonzero"></path></svg>'},28:function(e,t){e.exports=r},31:function(e,t,i){"use strict";i.d(t,"i",(function(){return n})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return r})),i.d(t,"h",(function(){return c})),i.d(t,"c",(function(){return p})),i.d(t,"g",(function(){return d})),i.d(t,"f",(function(){return h})),i.d(t,"b",(function(){return u})),i.d(t,"e",(function(){return m}));var s=i(0),o=i(24),a=i(26);const n=(e,t=[])=>t.includes(e)?t.filter(t=>t!==e):[...t,e],l=(e,{test:t="testScenario",action:i="actionScenario"}={})=>(e=>{var t;return null===(t=null==e?void 0:e[i])||void 0===t?void 0:t.call(e,e)})(e.find(e=>{var i;return null===(i=null==e?void 0:e[t])||void 0===i?void 0:i.call(e,e)})),r=e=>{var t;const i=Object.assign(Object.assign({},e),{currentViewBlock:Object.assign({viewBlockState:{},getViewBlockData:()=>({}),getViewBlockTitle:()=>null,isViewBlockRenderable:()=>!0,isViewBlockHidden:()=>!1,isViewBlockCollapsed:()=>!1,renderViewBlock:()=>null},e.currentViewBlock)}),o=[{testScenario:()=>!i.currentViewBlock.isViewBlockRenderable(i),renderScenario:()=>null},...(null===(t=e.getViewBlockScenarios)||void 0===t?void 0:t.call(e,i))||[],{testScenario:()=>!0,renderScenario:()=>null}];let a=l(o,{action:"renderScenario"});return a&&i.currentViewBlock.isViewBlockHidden(i)&&(a=s.React.createElement(a.type,Object.assign(Object.assign({},a.props),{style:{visibility:"hidden"}}))),a&&i.currentViewBlock.isViewBlockCollapsed(i)&&(a=s.React.createElement(a.type,Object.assign(Object.assign({},a.props),{style:{display:"none"}}))),a},c=e=>{var t;return((null===(t=null==e?void 0:e.currentViewBlock)||void 0===t?void 0:t.subViewBlocks)||[]).map((t,i)=>t&&Object(s.jsx)(r,Object.assign({key:i},e,{parentViewBlock:e.currentViewBlock,currentViewBlock:t})))};function p(e){const{intl:t,defaultMessages:i={}}=e||{};return(e,s)=>{const{messages:o,values:a}=s||{};return t.formatMessage({id:e,defaultMessage:(o||i)[e]},a)}}const d=e=>[o.f.CurrentMapExtent,o.f.InteractiveDrawMode].includes(e),h=function(e){const{getFeatureScenarios:t=(()=>[])}=e||{},i=(e,s=!0)=>{const[o={},a]=e,n=[...s?t(e,i):[],{testScenario:()=>!0,actionScenario:()=>o[a]}];return l(n)};return i}({getFeatureScenarios:([e={},t],i)=>[{testScenario:()=>"spatialFilterTypes"===t,actionScenario:()=>(e[t]||[]).filter(t=>!!i([e,"spatialMapWidgetIds"]).length||!d(t))},{testScenario:()=>"spatialRelationEnableSelectTool"===t,actionScenario:()=>{var s;return!!(null===(s=i([e,"spatialMapWidgetIds"]))||void 0===s?void 0:s.length)&&e[t]}},{testScenario:()=>["spatialInteractiveBufferDistance","spatialInteractiveBufferUnit"].includes(t),actionScenario:()=>i([e,"spatialInteractiveEnableBuffer"])?e[t]:void 0},{testScenario:()=>["spatialRelationBufferDistance","spatialRelationBufferUnit"].includes(t),actionScenario:()=>i([e,"spatialRelationEnableBuffer"])?e[t]:void 0}]}),u=(e,t,{geometryEngine:i})=>{const s=2.54*t.scale/9600;return i.buffer(e,10*s,"meters")},m=(e,t)=>{if(!t)return{status:a.c.Error,dataSource:null};const i=null==e?void 0:e[t];return{status:i?a.c.None:a.c.Loading,dataSource:i}}},4:function(e,t){e.exports=o},40:function(e,t){e.exports=c},44:function(e,t){e.exports=p},478:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return st}));var s=i(0),o=i(115),a=i(14),n={queryItem:"Query item",outputDsLabel:"{label} result",addNewQueryAndCustomOptions:"Add new query and custom options.",newQuery:"New query",arrangementStyle:"Arrangement style",wrapItems:"Wrap items",relationship:"Relationship",spatialRelation_Intersect:"Intersect",spatialRelation_Contain:"Contain",spatialRelation_Cross:"Cross",spatialRelation_EnvelopeIntersect:"Envelope Intersect",spatialRelation_IndexIntersect:"Index Intersect",spatialRelation_Overlap:"Overlap",spatialRelation_Touch:"Touch",spatialRelation_Within:"Within",setQuery:"Set query",attributeFilter:"Attribute filter",addSQLExpressionsToYourQuery:"Add SQL expressions to your query",pleaseAddYourSQLExpressionsFirst:"Please add your SQL expressions first.",spatialFilter:"Spatial filter",mapRequirement_MapNotRequired:"Map widget not required ",mapRequirement_MapIsRequired:"Requires a Map widget",typesOfFilter:"Types of filter",spatialFilterType_CurrentMapExtent:"Current map extent",spatialFilterType_InteractiveDrawMode:"Interactive draw mode",spatialFilterType_SpatialRelationship:"Spatial relationship",spatialFilterType_ReturnAllFeatures:"Return all features",results:"Results",listDirection:"List direction",pagingStyle:"Paging Style",pagingStyle_MultiPage:"Multi-page",pagingStyle_LazyLoad:"Single-page",field_PopupSetting:"Use pop-up settings",symbolType_DefaultSymbol:"Default",symbolType_CustomSymbol:"Custom",allowToChangeSymbolAtRuntime:"Allow to change symbol at runtime",options:"Options",allowToExport:"Allow to export",enableBuffer:"Enable buffer",defaultDistance:"Default Distance",defaultUnit:"Default Unit",unit_Miles:"Miles",unit_Kilometers:"Kilometers",unit_Feet:"Feet",unit_Meters:"Meters",unit_Yards:"Yards",unit_NauticalMiles:"Nautical miles",interactiveDrawMode:"Interactive draw mode",chooseSelectionTools:"Tools",sketchTool_point:"Point",sketchTool_polyline:"Line",sketchTool_polygon:"Polygon",sketchTool_rectangle:"Rectangle",sketchTool_circle:"Circle",spatialRelationship:"Spatial relationship",chooseSpatialRelationshipRules:"Spatial relationship rules",enableSelectTool:"Enable select tool",queryMessage:"Message",atLeastOneItemIsRequired:"At least one item is required.",configureQuery:"Configure query",hintQueryArgumentsSetting:"A query can have an attribute filter, spatial filter, or both.",chooseAMapWidget:"Choose a Map widget",noQueryTip:'Click the "{newQuery}" button to add and configure queries.',openTip:"Open tip"},l=i(31),r=i(62),c=i(1),p=i(2),d=i(50);class h extends s.React.PureComponent{constructor(e){super(e),this.unmount=!1,this.setMapThumbUrl=e=>{if(e||this.setState({mapThumbUrl:null}),this.props.portUrl&&this.props.portUrl!==Object(s.getAppStore)().getState().portalUrl)s.esri.restPortal.searchItems({q:"id:"+e,portal:this.props.portUrl+"/sharing/rest"}).then(e=>{if(!this.unmount)if(e.results[0]){const t=`${this.props.portUrl}/sharing/rest/content/items/${e.results[0].id}/info/`+e.results[0].thumbnail;this.setState({mapThumbUrl:t})}else this.setState({mapThumbUrl:null})});else{const t=Object(s.getAppStore)().getState().portalUrl;s.esri.restPortal.searchItems({q:"id:"+e,authentication:s.SessionManager.getInstance().getMainSession(),portal:t+"/sharing/rest"}).then(e=>{if(!this.unmount)if(e.results[0]){const i=s.SessionManager.getInstance().getMainSession();let o=null;o=i&&(null==i?void 0:i.token)?`${t}/sharing/rest/content/items/${e.results[0].id}/info/${e.results[0].thumbnail}?token=${null==i?void 0:i.token}`:`${t}/sharing/rest/content/items/${e.results[0].id}/info/`+e.results[0].thumbnail,this.setState({mapThumbUrl:o})}else this.setState({mapThumbUrl:null})})}},this.state={mapThumbUrl:null}}componentDidMount(){this.unmount=!1,this.setMapThumbUrl(this.props.mapItemId)}componentDidUpdate(e,t){e.mapItemId!==this.props.mapItemId&&this.setMapThumbUrl(this.props.mapItemId)}componentWillUnmount(){this.unmount=!0}render(){return this.state.mapThumbUrl?s.React.createElement(c.ImageWithParam,{imageParam:{url:this.state.mapThumbUrl}}):s.React.createElement(c.ImageWithParam,{imageParam:{}})}}var u=i(24),m=i(26);const g=()=>{const e={iconQuery:i(262),iconTipBulb:i(263),iconClose:i(66),iconClose12:i(51),iconAdd:i(79),iconClose16:i(124),iconSetting:i(90),arrowDown:i(168),arrowUp:i(169),arrowLeft:i(69),arrowRight:i(134),iconEmpty:i(71)};return{iconMap:e,iconPropMap:{defaultIconResult:{svg:e.iconQuery,properties:{color:"",filename:"filter-16.svg",originalName:"filter-16.svg",inlineSvg:!0,path:["general","filter"],size:14}}},sketchToolInfoMap:Object(u.j)(),arrangementStyleMap:{[u.e.Block]:{getTitle:e=>e("vertical"),icon:i(264)},[u.e.Inline]:{getTitle:e=>e("horizontal"),icon:i(265)},[u.e.Popper]:{getTitle:e=>e("icon"),icon:i(266)}}}},S=e=>{var t,i;const{className:o,data:a={},fieldStyle:{fieldTag:n=p.SettingRow,rowMode:r="OneRow"}={},children:c}=e,d=`${o} setting-query__setting-field setting-query__setting-field-row-mode-${r}`,h=null===(i=null===(t=a.currentViewBlock)||void 0===t?void 0:t.getViewBlockTitle)||void 0===i?void 0:i.call(t,a),u=[{testScenario:()=>"NoRow"===r,renderScenario:()=>Object(s.jsx)(s.React.Fragment,null,c)},{testScenario:()=>"OneRow"===r,renderScenario:()=>n===p.SettingRow?Object(s.jsx)(p.SettingRow,{className:""+d,label:h,flow:"no-wrap"},c):null},{testScenario:()=>!0,renderScenario:()=>{return Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)(p.SettingRow,{className:`${d} setting-query__setting-field-row0 ${h?"":"collapse"}`,label:h,flow:"wrap"}),(e=(e,t)=>e&&Object(s.jsx)(p.SettingRow,{className:`${d} setting-query__setting-field-row${t+1}`,flow:"wrap"},e),"TwoRow"===r?e(c,0):s.React.Children.map(c,e)));var e}}];return Object(l.d)(u,{action:"renderScenario"})};var y=i(15);const w=({children:e})=>Object(s.jsx)(s.React.Fragment,null,e);function b(e){const t={itemKey:"Types",itemStateExpanded:!0,itemChildren:Object.entries(u.g).map(([t,i])=>({itemKey:t,itemStateDetailContent:i,itemStateChecked:(e||[]).includes(i)}))};return Object(s.Immutable)(t)}class v extends s.React.PureComponent{constructor(e){super(e),this.state={spatialRelationshipMap:null,propSelectedOptions:[]}}static getDerivedStateFromProps(e,t){return e.selectedOptions!==t.propSelectedOptions?{spatialRelationshipMap:b(e.selectedOptions),propSelectedOptions:e.selectedOptions}:null}render(){const{getI18nMessage:e}=this.props,{spatialRelationshipMap:t}=this.state;return Object(s.jsx)("div",{className:"setting-query__spatial-relationship-dialog"},Object(s.jsx)(c.Table,null,Object(s.jsx)(y.Tree,{className:"",topTag:w,rootItemJson:t,rootItemVisible:!0,renderOverrideItem:(t,i)=>{const o=i.props.itemJsons,[a,...n]=o,l=n.length,r=0===l?y.treeUtils.getCheckProgress(a):!!a.itemStateChecked,p=[()=>({onClick:e=>{this.setState(({spatialRelationshipMap:e})=>({spatialRelationshipMap:e.itemChildren.reduce((e,t,i)=>e.setIn(["itemChildren",i,"itemStateChecked"],!r),e)}))},textContent1:e("relationship"),textContent2:e("label")}),()=>({onClick:e=>{this.setState(({spatialRelationshipMap:e})=>({spatialRelationshipMap:e.setIn(["itemChildren",o[1].itemChildren.indexOf(a),"itemStateChecked"],!r)}))},textContent1:e("spatialRelation_"+a.itemStateDetailContent),textContent2:a.itemStateDetailContent})][l](),d=(e="td")=>Object(s.jsx)("tr",{className:`tree-item tree-item_level-${l} tree-item_checkprogress-${r}`},Object(s.jsx)(e,{className:"setting-ui-unit-table-col"},Object(s.jsx)(c.Checkbox,{indeterminate:"number"==typeof r,checked:!!r,onClick:p.onClick})),Object(s.jsx)(e,{className:"setting-ui-unit-table-col text-content"},p.textContent1),Object(s.jsx)(e,{className:"setting-ui-unit-table-col text-content"},p.textContent2));return 0===l?Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)("thead",null,d("th")),Object(s.jsx)("tbody",null,i.props.children)):1===l?d():null}})),Object(s.jsx)("hr",null),Object(s.jsx)("div",{className:"ui-unit-form-action-bar"},Object(s.jsx)(m.e,{initState:{visible:!1}},({visible:[i,o]})=>Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)(c.Button,{className:"ui-unit-button first-child",onClick:()=>{const e=t.itemChildren.filter(e=>e.itemStateChecked);e.length?this.props.onChange(e.asMutable({deep:!0}).map(e=>e.itemStateDetailContent)):o(!0)}},e("ok")),Object(s.jsx)(m.a,Object.assign({bodyContent:e("atLeastOneItemIsRequired")},{panelVisible:i,setPanelVisible:o,getI18nMessage:e})))),Object(s.jsx)(c.Button,{className:"ui-unit-button",onClick:this.props.onCancel},e("cancel"))))}}var I=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const{iconMap:M,sketchToolInfoMap:f,arrangementStyleMap:x}=g(),j=e=>{var t,i;const{currentViewBlock:o,associatedData:{targetComponent:n}}=e,g=(o.getViewBlockData||(()=>({})))(e),y=`setting-query__${s.lodash.kebabCase(null!==(t=o.viewBlockKey)&&void 0!==t?t:(""+Math.random()).slice(2))} setting-query__${s.lodash.kebabCase(null!==(i=o.viewBlockType)&&void 0!==i?i:"")}`;return[{testScenario:()=>"SettingBlockTypeSettingPane"===o.viewBlockType,renderScenario:()=>{const{getAdditionalClassName:t=(()=>""),getPanelHeaderProps:i=(()=>({}))}=g,a=o.getViewBlockTitle(e),n=i(),r={title:a};return Object(s.jsx)("div",{className:`${y} ${t()||""}`},n.actions&&Object(s.jsx)(c.PanelHeader,Object.assign({level:1,className:"setting-ui-unit-header px-3 pt-3"},r,n)),Object(l.h)(e))}},{testScenario:()=>"SettingBlockTypeSettingContent"===o.viewBlockType,renderScenario:()=>Object(s.jsx)("div",{className:""+y},Object(l.h)(e))},{testScenario:()=>"SettingBlockTypeSettingSection"===o.viewBlockType,renderScenario:()=>{const{getAdditionalClassName:t=(()=>""),contentCollapsable:i=!1}=g,{contentCollapsed:a=!0}=o.viewBlockState,n=o.getViewBlockTitle(e),r={className:`${y} ${t()||""}`,children:Object(l.h)(e)};return i?Object(s.jsx)(p.SettingSection,null,Object(s.jsx)(p.SettingCollapse,Object.assign({},r,{label:n,isOpen:!a,onRequestOpen:()=>{g.setContentCollapsed(()=>o.viewBlockState.contentCollapsed=!1)},onRequestClose:()=>{g.setContentCollapsed(()=>o.viewBlockState.contentCollapsed=!0)}}))):Object(s.jsx)(p.SettingSection,Object.assign({},r,{title:n}))}},{testScenario:()=>"SettingBlockTypeSettingSectionWithSwitch"===o.viewBlockType,renderScenario:()=>{const{enabled:t,getAdditionalClassName:i=(()=>"")}=g,a=o.getViewBlockTitle(e),n=Object(s.jsx)("div",{className:"d-flex"},Object(s.jsx)("div",{css:s.css`max-width: 80%`,className:"text-truncate",title:a},a),Object(s.jsx)("div",{className:"ml-auto"},Object(s.jsx)(c.Switch,{checked:t,onChange:e=>{g.setEnabled(e.target.checked)}})));return Object(s.jsx)(p.SettingSection,{className:`${y} ${i()||""}`,title:n},t&&Object(l.h)(e))}},{testScenario:()=>"SettingBlockTypeNavBackSection"===o.viewBlockType,renderScenario:()=>{const{onNavBack:t}=g;return Object(s.jsx)(p.SettingSection,{className:""+y,title:Object(s.jsx)(m.d,{title:o.getViewBlockTitle(e),templateType:"back",icon:M.arrowLeft,onClickIcon:()=>t()})})}},{testScenario:()=>"SettingBlockTypeFieldSelect"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i,getSelectProps:o=(()=>({}))}=g,a=o(),{_options:n=null}=a,l=I(a,["_options"]),r={children:(n||[]).map((e,t)=>Object(s.jsx)("option",{key:t,value:e.value},e.children)),value:i.getByIndex(0),onChange:e=>i.setByIndices([0,e.target.value])};return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t},Object(s.jsx)(c.Select,Object.assign({className:"ui-unit-select",size:"sm"},r,l)))}},{testScenario:()=>"SettingBlockTypeFieldTextInput"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i,defaultValue:o,getTextInputProps:a=(()=>({})),getAdditionalContent:n=(()=>null)}=g,l=a(),r="textarea"===l.type,p="number"===l.type,d=i.getByIndex(0),h={value:void 0===d?o:d,onChange:e=>{var t,s;return i.setByIndices([0,null!==(s=null===(t=e.target)||void 0===t?void 0:t.value)&&void 0!==s?s:e])}};return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t},r&&Object(s.jsx)(c.TextArea,Object.assign({className:"setting-ui-unit-input"},h,l)),p&&Object(s.jsx)(c.NumericInput,Object.assign({className:"setting-ui-unit-input"},h,l)),!r&&!p&&Object(s.jsx)(c.TextInput,Object.assign({className:"setting-ui-unit-input"},h,l)),n())}},{testScenario:()=>"SettingBlockTypeFieldCheckInputGroup"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i,itemChildren:o=[],getLabelContent:a=(()=>null),getAdditionalContent:n=(()=>null),getInputProps:r=(()=>({}))}=g;return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t||{rowMode:"TwoRow"}},(o||[]).map((...e)=>{const[t,o]=e,{itemKey:p,itemHidden:d}=t,h=r(e),{_inputType:u="checkbox",_InputTag:m=("radio"===u?c.Radio:c.Checkbox),_onBeforeClick:g}=h,S=I(h,["_inputType","_InputTag","_onBeforeClick"]),y={className:"setting-ui-unit-check-input-element setting-ui-unit-"+u,checked:(w=i.getByIndex(0),"radio"===u?w===p:(w||[]).includes(p)),onClick:e=>{const t="radio"===u?p:Object(l.i)(p,i.getByIndex(0));if(g&&!g(t))return e.nativeEvent.preventDefault(),!1;i.setByIndices([0,t])}};var w;return Object(s.jsx)("div",{key:o,className:"setting-ui-unit-check-input-item",style:{display:d?"none":void 0}},Object(s.jsx)("label",{className:"setting-ui-unit-check-input-label"},Object(s.jsx)(m,Object.assign({},y,S)),Object(s.jsx)("span",null,a(p))),n(p,Object.assign(Object.assign({},y),S)))}))}},{testScenario:()=>"SettingBlockTypeFieldButton"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,getButtonProps:i=(()=>({}))}=g,o=i(),{_buttonText:a=null}=o,n=I(o,["_buttonText"]),l={title:a,children:Object(s.jsx)("div",{className:"w-100 px-2 text-truncate"},a)};return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t},Object(s.jsx)(c.Button,Object.assign({className:"w-100 text-dark set-link-btn"},l,n)))}},{testScenario:()=>"SettingBlockTypeFieldSwitch"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i}=g;return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t},Object(s.jsx)(c.Switch,{checked:i.getByIndex(0),onChange:(e,t)=>i.setByIndices([0,t])}))}},{testScenario:()=>"SettingBlockTypeFieldDirection"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i}=g;return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t},Object(s.jsx)(p.DirectionSelector,{vertical:i.getByIndex(0)===u.c.Vertical,onChange:e=>i.setByIndices([0,e?u.c.Vertical:u.c.Horizontal])}))}},{testScenario:()=>"SettingBlockTypeFieldMapSelect"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i}=g;return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t},Object(s.jsx)(p.JimuMapViewSelector,{onSelect:e=>i.setByIndices([0,e]),useMapWidgetIds:i.getByIndex(0)}))}},{testScenario:()=>"SettingBlockTypeFieldSortSetting"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i,onChange:o=(()=>{})}=g;return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t||{rowMode:"TwoRow"}},Object(s.jsx)(d.Sort,{onChange:e=>o(e),value:Object(s.Immutable)(i.getByIndex(1)||[]),useDataSource:Object(s.Immutable)(i.getByIndex(0)),emptyHintTopSpaceSize:16}))}},{testScenario:()=>"SettingBlockTypeFieldSketchToolsSelect"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,getI18nMessage:i,valueMan:o}=g;return Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)(S,{className:y,data:e,fieldStyle:t}),Object.entries(f).map(([t,a])=>{const{esriClassName:n,drawToolName:r}=a,c=o.getByIndex(0)||[],p=c.includes(t);return Object(s.jsx)(l.a,Object.assign({key:t},e,{currentViewBlock:{viewBlockKey:"SettingBlockKeyFieldSketchToolsSelect__"+t,viewBlockType:"SettingBlockTypeFieldSwitch",getViewBlockData:()=>({valueMan:{getByIndex:e=>p,setByIndices:([e,i])=>o.setByIndices([0,Object(l.i)(t,c)])}}),getViewBlockTitle:()=>Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)("span",{className:"ui-unit-sketch-icon "+n}),i("sketchTool_"+r))}}))}))}},{testScenario:()=>"SettingBlockTypeFieldDataSource"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,valueMan:i,getDssProps:o=(()=>({})),getMapThumbProps:n=(()=>({})),thumbEnabled:l=!1}=g,r=o(),{_multipleEnabled:c,_dsTypes:p}=r,d=I(r,["_multipleEnabled","_dsTypes"]),u=i.getByIndex(0),m={disableRemove:()=>!c,mustUseDataSource:!0,closeDataSourceListOnChange:!c,types:Object(s.Immutable)(p),isMultiple:!!c,useDataSources:Object(s.Immutable)((c?u||[]:[u]).filter(e=>e)),onChange:e=>i.setByIndices([0,(c?e:null==e?void 0:e[0])||null,{dsUpdateRequired:!0}])},w=n(),{_dsJsons:b}=w,v=I(w,["_dsJsons"]),M=null==b?void 0:b[null==u?void 0:u.dataSourceId],f={mapItemId:(null==M?void 0:M.itemId)||null,portUrl:(null==M?void 0:M.portalUrl)||null};return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t||{rowMode:"MultiRow"}},Object(s.jsx)(a.DataSourceSelector,Object.assign({},m,d)),l&&Object(s.jsx)(h,Object.assign({},f,v)))}},{testScenario:()=>"SettingBlockTypeFieldsArrangementStyle"===o.viewBlockType,renderScenario:()=>{const{getI18nMessage:t,valueMan:i}=g,[o,a]=Array.from({length:2}).map((e,t)=>({getByIndex:e=>i.getByIndex(t),setByIndices:([e,s])=>i.setByIndices([t,s])})),n=[{viewBlockKey:"SettingBlockKeyFieldArrangementType",viewBlockType:"SettingBlockTypeFieldCustom",renderViewBlock:()=>Object.entries(x).map(([e,i])=>Object(s.jsx)(c.Tooltip,{key:e,title:i.getTitle(t),placement:"bottom"},Object(s.jsx)(c.Button,{onClick:()=>o.setByIndices([0,e]),icon:!0,size:"sm",type:"tertiary",active:o.getByIndex(0)===e},Object(s.jsx)(c.Icon,{width:68,height:68,icon:i.icon}))))},{viewBlockKey:"SettingBlockKeyFieldArrangementWrap",viewBlockType:"SettingBlockTypeFieldSwitch",isViewBlockRenderable:()=>o.getByIndex(0)===u.e.Inline,getViewBlockData:()=>({valueMan:a}),getViewBlockTitle:()=>t("wrapItems")}];return Object(s.jsx)(s.React.Fragment,null,n.map((t,i)=>Object(s.jsx)(l.a,Object.assign({key:i},e,{currentViewBlock:t}))))}},{testScenario:()=>"SettingBlockTypeFieldSpatialRelationshipPicker"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,getI18nMessage:i,valueMan:a,getTextInputProps:p=(()=>({}))}=g;return Object(s.jsx)(m.e,{initState:{visible:!1}},({visible:[d,h],refContainer:[u,m]})=>Object(s.jsx)(l.a,Object.assign({},e,{currentViewBlock:{viewBlockKey:"SettingBlockKeyFieldSpatialRelationship",viewBlockType:"SettingBlockTypeFieldTextInput",getViewBlockTitle:o.getViewBlockTitle,getViewBlockData:()=>({fieldStyle:t||{rowMode:"TwoRow"},valueMan:{getByIndex:e=>(a.getByIndex(0)||[]).map(e=>i("spatialRelation_"+e)).join(", ")},getTextInputProps:p,getAdditionalContent:()=>Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)(c.Button,{ref:e=>m(e),className:"more-input-setting-btn",type:"tertiary",icon:!0,size:"sm",onClick:()=>h(!0)},Object(s.jsx)(c.Icon,{size:12,icon:M.iconSetting})),d&&Object(s.jsx)(c.Popper,{open:!0,reference:u},Object(s.jsx)("div",{className:"widget-container controller-configuration-container d-flex p-1",css:Object(r.a)(n.props.theme)},Object(s.jsx)(v,{getI18nMessage:i,selectedOptions:a.getByIndex(0),onChange:e=>{a.setByIndices([0,e]),h(!1)},onCancel:()=>h(!1)}))))})}})))}},{testScenario:()=>"SettingBlockTypeFieldSQLExpressionBuilder"===o.viewBlockType,renderScenario:()=>{const{fieldStyle:t,getI18nMessage:i,valueMan:o,getPopupProps:a=(()=>({}))}=g,[n,r]=[o.getByIndex(0),o.getByIndex(1)],{onChange:c}=a(),p=!!(null==n?void 0:n.dataSourceId);return Object(s.jsx)(m.e,{initState:{visible:!1}},({visible:[o,a]})=>{const h=[{viewBlockKey:"SettingBlockKeyFieldSQLExpressionBuilderButton",viewBlockType:"SettingBlockTypeFieldButton",getViewBlockData:()=>({fieldStyle:{rowMode:"NoRow"},getButtonProps:()=>({type:p?"primary":"secondary",disabled:!p,onClick:()=>a(!0),_buttonText:i("builderName")})})},{viewBlockKey:"SettingBlockKeyFieldSQLExpressionBuilderText",viewBlockType:"SettingBlockTypeFieldTextInput",getViewBlockData:()=>({fieldStyle:{rowMode:"NoRow"},valueMan:{getByIndex:e=>(null==r?void 0:r.displaySQL)||""},getTextInputProps:()=>({type:"textarea",spellCheck:!1,readOnly:!0,onClick:e=>e.currentTarget.select(),placeholder:i("pleaseAddYourSQLExpressionsFirst")})})}];return Object(s.jsx)(S,{className:y,data:e,fieldStyle:t||{rowMode:"MultiRow"}},h.map((t,i)=>Object(s.jsx)(l.a,Object.assign({key:i},e,{currentViewBlock:t}))),p&&Object(s.jsx)(s.DataSourceComponent,{useDataSource:n},e=>{if(r){const t=s.dataSourceUtils.getArcGISSQL(r,e);t.displaySQL!==r.displaySQL&&c(Object.assign({},r,t))}return Object(s.jsx)(d.SqlExpressionBuilderPopup,{dataSource:e,isOpen:!!o,toggle:()=>a(!o),expression:r,onChange:e=>c(null==e?void 0:e.asMutable({deep:!0}))})}))})}},{testScenario:()=>"SettingBlockTypeFieldsBufferSetting"===o.viewBlockType,renderScenario:()=>{const{getI18nMessage:t,valueMan:i}=g,[o,a,n]=Array.from({length:3}).map((e,t)=>({getByIndex:e=>i.getByIndex(t),setByIndices:([e,s])=>i.setByIndices([t,s])})),r=[{viewBlockKey:null,viewBlockType:"SettingBlockTypeFieldSwitch",getViewBlockData:()=>({valueMan:o}),getViewBlockTitle:()=>t("enableBuffer")},{viewBlockKey:null,viewBlockType:"SettingBlockTypeFieldTextInput",isViewBlockRenderable:()=>o.getByIndex(0),getViewBlockData:()=>({valueMan:a,getTextInputProps:()=>({type:"number"})}),getViewBlockTitle:()=>t("defaultDistance")},{viewBlockKey:null,viewBlockType:"SettingBlockTypeFieldSelect",isViewBlockRenderable:()=>o.getByIndex(0),getViewBlockData:()=>({valueMan:n,getSelectProps:()=>({_options:Object.values(u.i).map(e=>({value:e,children:t("unit_"+e)}))})}),getViewBlockTitle:()=>t("defaultUnit")}];return Object(s.jsx)(s.React.Fragment,null,r.map((t,i)=>Object(s.jsx)(l.a,Object.assign({key:i},e,{currentViewBlock:t}))))}},{testScenario:()=>"SettingBlockTypeFieldCustom"===o.viewBlockType,renderScenario:()=>Object(s.jsx)(S,{className:y,data:e,fieldStyle:g.fieldStyle},o.renderViewBlock(e))},{testScenario:()=>"SettingBlockTypeCustom"===o.viewBlockType,renderScenario:()=>o.renderViewBlock(e)}]};var k=i(40),T=i(44);const N=e=>e?e.type===s.DataSourceTypes.SceneLayer?e.getAssociatedDataSource():e:null;var B=i(60),C=i(4);class D extends s.React.PureComponent{}class L extends s.React.PureComponent{constructor(){super(...arguments),this.moveY=0,this.startY=0,this.isRegisted=!1,this.registerTouchEvent=e=>{e&&!this.isRegisted&&(e.addEventListener("touchstart",e=>{this.moveY=0;const t=e.touches[0];this.startY=t.clientY},{passive:!1}),e.addEventListener("touchmove",t=>{const i=t.touches[0];this.moveY=-1*(i.clientY-this.startY),this.startY=i.clientY,e.scrollTop=e.scrollTop+this.moveY},{passive:!1}),e.addEventListener("touchend",e=>{this.moveY=0,this.startY=0},{passive:!1}),this.isRegisted=!0)}}getStyle(){return s.css`
      overflow: auto;
      pointer-events: auto;
      `}render(){return Object(s.jsx)("div",{css:this.getStyle(),className:this.props.className,style:this.props.style,ref:e=>{this.registerTouchEvent(e)}},this.props.children)}}class O extends s.React.PureComponent{componentWillUnmount(){this.props.onDestroyed&&this.props.onDestroyed()}render(){return s.React.createElement(s.React.Fragment,null,this.props.children)}}const P=i(116),V=i(267);class R extends D{constructor(e){super(e),this.toolName=null,this.isContainedToMobilePanel=!1,this.generation=0,this._getContent=()=>this.props.toolJson.isOnlyExpanded?Object(s.jsx)("div",{css:this._cssStyle(),className:"exbmap-ui exbmap-ui-tool-panel"},Object(s.jsx)(s.ErrorBoundary,null,this.getExpandPanel())):this.props.isMobile?this._renderMobileTool():this._renderPCTool(),this.onResize=(e,t)=>{e&&t&&(this.generation=t,this.forceUpdate())};const t=this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.container;c.MobilePanelManager.getInstance().checkDomIsContained(t)&&(this.isContainedToMobilePanel=!0),this.modifiers=[{name:"flip",options:{padding:0}},{name:"preventOverflow",options:{padding:15,boundariesElement:t}}]}_cssStyle(){return s.css`
      /* pointer-events: auto;
      box-shadow: 0 1px 2px rgba(0,0,0,0.3);
      position: relative;

      .exbmap-ui-tool-icon {
        fill: black;
        left: 8px;
        top: 8px;
        position: absolute;
        display: block;
      }

      .exbmap-ui-tool-icon-selected {
        color: #000;
        background-color: #eee;
      }

      .exbmap-ui-tool-icon-selected:after {
        width: 0;
        height: 0;
        border-top: 6px solid #000;
        border-left: 6px solid transparent;
        position: absolute;
        top: 0;
        right: 0;
        content: "";
        margin-top: 1px;
        margin-right: 1px;
      }

      .exbmap-ui-expand-content {
        transition: opacity 250ms ease-in-out, margin 250ms ease-in-out;
        min-height: 10px;
        min-width: 10px;
        padding-top: ${s.polished.rem(10)};
        padding-bottom: ${s.polished.rem(10)};
        padding-left: ${s.polished.rem(20)};
        padding-right: ${s.polished.rem(20)};

        .exbmap-ui-expand-content-header {
          margin-bottom: ${s.polished.rem(10)};
        }

        .panel-title {
          font-size: ${s.polished.rem(16)};
          color: #000000;
        }

        .panel-icon {
          cursor: pointer;
          color: #6e6e6e;
        }

        .panel-icon:hover {
          color: #2e2e2e;
        }
      }

      .expand-placement-bottom {
        padding-top: 0.25rem !important;
      }

      .expand-placement-left {
        padding-right: 0.25rem !important;
      }

      .expand-placement-right {
        padding-left: 0.25rem !important;
      }

      .expand-placement-top {
        padding-bottom: 0.25rem !important;
      } */
      `}onShowPanel(){}onClosePanel(){}destroy(){}static getIsNeedSetting(){return!0}_onIconClick(e){const t=this.getIcon()&&this.getIcon().onIconClick;t&&t(e),this.getExpandPanel()&&(this.isContainedToMobilePanel,this.props.activeToolName&&this.props.activeToolName===this.toolName?this.props.onActiveToolNameChange(null):(this.props.onActiveToolNameChange(this.toolName),this.onShowPanel()))}_initIconContainer(e){e&&!this.iconContainer&&(this.iconContainer=e,this.forceUpdate())}_renderPCTool(){let e=this.getIcon();e||(e={icon:P,onIconClick:()=>{}});const t=this.getExpandPanel();return Object(s.jsx)("div",{className:"exbmap-ui exbmap-ui-tool",css:this._cssStyle()},Object(s.jsx)("div",{style:{},ref:e=>{this._initIconContainer(e)},className:Object(s.classNames)("exbmap-ui-tool esri-widget--button",{"exbmap-ui-tool-icon-selected":this.toolName===this.props.activeToolName&&t}),title:this.props.toolJson.isShowIconTitle?this.getTitle():"",onClick:e=>{this._onIconClick(e)}},Object(s.jsx)(c.Icon,{width:16,height:16,className:"exbmap-ui-tool-icon",icon:e.icon})),this.iconContainer&&this.toolName===this.props.activeToolName&&t&&Object(s.jsx)(O,{onDestroyed:()=>{this.onClosePanel()}},Object(s.jsx)(c.Popper,{className:"exbmap-ui-popper",reference:this.iconContainer,open:!(this.toolName!==this.props.activeToolName||!t),placement:this.props.toolJson.panelPlacement,modifiers:this.modifiers,version:this.generation,disablePortal:!0},Object(s.jsx)("div",{className:this.getExpandPanelPlacementClassName()},Object(s.jsx)("div",{className:"exbmap-ui-expand-content"},Object(s.jsx)("div",{className:"w-100 justify-content-between d-flex exbmap-ui-expand-content-header"},Object(s.jsx)("div",{className:"panel-title text-truncate",style:{maxWidth:"210px"},title:this.getTitle()},this.getTitle()),Object(s.jsx)("div",{onClick:()=>{this.props.onActiveToolNameChange(null)}},Object(s.jsx)(c.Icon,{className:"panel-icon",width:20,height:20,icon:V}))),Object(s.jsx)(s.ErrorBoundary,null,t,Object(s.jsx)(s.ReactResizeDetector,{handleHeight:!0,onResize:this.onResize})))))))}_renderMobileTool(){let e=this.getIcon();e||(e={icon:P,onIconClick:()=>{}});const t=this.getExpandPanel();return Object(s.jsx)("div",{className:"exbmap-ui exbmap-ui-tool",css:this._cssStyle()},Object(s.jsx)("div",{style:{},ref:e=>{this.iconContainer=e},className:Object(s.classNames)("exbmap-ui-tool border-0 esri-widget--button",{"exbmap-ui-tool-icon-selected":this.toolName===this.props.activeToolName&&t}),title:this.props.toolJson.isShowIconTitle?this.getTitle():"",onClick:e=>{this._onIconClick(e)}},Object(s.jsx)(c.Icon,{width:16,height:16,className:"exbmap-ui-tool-icon",icon:e.icon})),this.toolName===this.props.activeToolName&&t&&s.ReactDOM.createPortal(Object(s.jsx)(O,{onDestroyed:()=>{this.onClosePanel()}},Object(s.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(s.jsx)("div",{className:"w-100 justify-content-between d-flex exbmap-ui-expand-content-header",style:{padding:"10px",fontWeight:"bold"}},Object(s.jsx)("div",{className:"panel-title text-truncate w-100",title:this.getTitle()},this.getTitle()),Object(s.jsx)("div",{style:{zIndex:1,pointerEvents:"auto",width:"40px",height:"30px"},onClick:()=>{this.props.onActiveToolNameChange(null)},className:"d-flex justify-content-end align-items-start"},Object(s.jsx)(c.Icon,{className:"panel-icon",width:20,height:20,icon:V,color:"#6e6e6e"}))),Object(s.jsx)("div",{className:"flex-grow-1 w-100",style:{position:"relative"}},Object(s.jsx)(L,{className:"w-100 h-100",style:{position:"absolute",paddingLeft:"10px",paddingRight:"10px"}},Object(s.jsx)(s.ErrorBoundary,null,this.getExpandPanel()))))),document.getElementById(this.props.jimuMapView.id+"-bottom-panel")))}getExpandPanelPlacementClassName(){return this.props.toolJson.panelPlacement?"expand-placement-"+this.props.toolJson.panelPlacement.split("-")[0]:null}render(){return this._getContent()}}class E extends s.React.PureComponent{constructor(e){super(e),this.Zoom=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Zoom"]).then(e=>{[this.Zoom]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.ZoomBtn=new this.Zoom({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.ZoomBtn&&(this.ZoomBtn.destroy(),this.ZoomBtn=null)}render(){return s.React.createElement("div",{ref:e=>{this.container=e}})}}const z=s.React.createContext({isShowMapSwitchBtn:!1,dataSourceIds:[],activeDataSourceId:null,switchMap:()=>{},fullScreenMap:()=>{},initialMapState:null,mapComponentId:null});class A extends s.React.PureComponent{constructor(e){super(e),this.Home=null,this.generateViewPointFromInitialMapState=e=>"2d"===e.viewType?new this.Viewpoint({targetGeometry:this.Extent.fromJSON(e.extent),rotation:e.rotation}):this.Viewpoint.fromJSON(e.viewPoint),this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Home","esri/geometry/Extent","esri/Viewpoint"]).then(e=>{[this.Home,this.Extent,this.Viewpoint]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(e){this.state.apiLoaded&&this.container&&(this.homeBtn&&(this.container.innerHTML=""),this.homeBtn=new this.Home({container:this.container,view:this.props.jimuMapView.view,viewpoint:this.props.initialMapState?this.generateViewPointFromInitialMapState(this.props.initialMapState):this.props.jimuMapView.view.map.initialViewProperties.viewpoint}),e.initialMapState!==this.props.initialMapState&&this.props.jimuMapView.view.goTo(this.homeBtn.viewpoint,{animate:!1}))}componentWillUnmount(){this.homeBtn&&(this.homeBtn.destroy(),this.homeBtn=null)}render(){return s.React.createElement("div",{className:"esri-widget--button",ref:e=>{this.container||(this.container=e)}})}}class G extends s.React.PureComponent{constructor(e){super(e),this.Compass=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Compass"]).then(e=>{[this.Compass]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.CompassBtn=new this.Compass({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.CompassBtn&&(this.CompassBtn.destroy(),this.CompassBtn=null)}render(){return s.React.createElement("div",{ref:e=>{this.container=e}})}}class U extends s.React.PureComponent{constructor(e){super(e),this.Locate=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Locate"]).then(e=>{[this.Locate]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.LocateBtn=new this.Locate({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.LocateBtn&&(this.LocateBtn.destroy(),this.LocateBtn=null)}render(){return s.React.createElement("div",{className:"esri-widget--button",ref:e=>{this.container=e}})}}class W extends s.React.PureComponent{constructor(e){super(e),this.Navigation=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/NavigationToggle"]).then(e=>{[this.Navigation]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.NavigationBtn=new this.Navigation({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.NavigationBtn&&(this.NavigationBtn.destroy(),this.NavigationBtn=null)}render(){return s.React.createElement("div",{ref:e=>{this.container=e}})}}class F extends s.React.PureComponent{constructor(e){super(e),this.Search=null,this.state={apiLoaded:!1}}getStyle(){return s.css`
      /* border: solid 1px rgba(110,110,110,0.3); */
    `}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Search"]).then(e=>{[this.Search]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.SearchBtn=new this.Search({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.SearchBtn&&(this.SearchBtn.destroy(),this.SearchBtn=null)}render(){return Object(s.jsx)("div",{css:this.getStyle(),className:"w-100",ref:e=>{this.container=e}},!this.state.apiLoaded&&Object(s.jsx)("div",{className:"exbmap-basetool-loader"}))}}class H extends s.React.PureComponent{constructor(e){super(e),this.LayerList=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/LayerList"]).then(e=>{[this.LayerList]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.LayerListBtn=new this.LayerList({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.LayerListBtn&&(this.LayerListBtn=null)}render(){return s.React.createElement("div",{ref:e=>{this.container=e},style:{width:"100%",minHeight:"32px",position:"relative"}},!this.state.apiLoaded&&s.React.createElement("div",{className:"exbmap-basetool-loader"}))}}class Q extends s.React.PureComponent{constructor(e){super(e),this.Legend=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Legend"]).then(e=>{[this.Legend]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.LegendBtn=new this.Legend({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.LegendBtn&&(this.LegendBtn=null)}render(){return s.React.createElement("div",{ref:e=>{this.container=e},style:{width:"100%",minHeight:"32px",position:"relative"}},!this.state.apiLoaded&&s.React.createElement("div",{className:"exbmap-basetool-loader"}))}}class _ extends s.React.PureComponent{constructor(e){super(e),this.BaseMap=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/BasemapGallery"]).then(e=>{[this.BaseMap]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.BaseMapBtn=new this.BaseMap({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.BaseMapBtn&&(this.BaseMapBtn.destroy(),this.BaseMapBtn=null)}render(){return this.props.isMobile?s.React.createElement("div",{ref:e=>{this.container=e},style:{width:"100%",minHeight:"32px",maxWidth:"none",maxHeight:"none",overflowY:"auto",position:"relative"}},!this.state.apiLoaded&&s.React.createElement("div",{className:"exbmap-basetool-loader"})):s.React.createElement("div",{ref:e=>{this.container=e},style:{width:"250px",minHeight:"32px",position:"relative"},className:"exbmap-ui-pc-expand-maxheight"},!this.state.apiLoaded&&s.React.createElement("div",{className:"exbmap-basetool-loader"}))}}class q extends s.React.PureComponent{constructor(e){super(e),this.ScaleBar=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/ScaleBar"]).then(e=>{[this.ScaleBar]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.ScaleBarBtn=new this.ScaleBar({container:this.container,view:this.props.jimuMapView.view,unit:"metric"}))}componentWillUnmount(){this.ScaleBarBtn&&(this.ScaleBarBtn.destroy(),this.ScaleBarBtn=null)}render(){return s.React.createElement("div",{ref:e=>{this.container=e}})}}class Z extends s.React.PureComponent{constructor(e){super(e),this.Attribution=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Attribution"]).then(e=>{[this.Attribution]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(){this.state.apiLoaded&&this.container&&(this.AttributionBtn=new this.Attribution({container:this.container,view:this.props.jimuMapView.view}))}componentWillUnmount(){this.AttributionBtn&&(this.AttributionBtn.destroy(),this.AttributionBtn=null)}render(){return s.React.createElement("div",{style:{position:"relative"},ref:e=>{this.container=e}})}}class J extends s.React.PureComponent{constructor(e){super(e),this.MeasureInstance=null,this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/"+this.props.measureModule.path]).then(e=>{[this.MeasureClass]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(e){if(e.activeTabIndex===this.props.activeTabIndex&&e.measureModule===this.props.measureModule){if(this.state.apiLoaded&&this.parentContainer&&this.container)if(this.props.measureInstance)this.parentContainer.innerHTML="",this.parentContainer.appendChild(this.props.measureInstance.container),"measured"!==this.props.measureInstance.viewModel.state&&"measuring"!==this.props.measureInstance.viewModel.state&&this.props.measureInstance.viewModel.start();else{const e=new this.MeasureClass({container:this.container,view:this.props.jimuMapView.view});e.viewModel.start(),this.props.onMeasurceInstanceCreated(e,this.props.activeTabIndex)}}else this.reload()}reload(){this.setState({apiLoaded:!1},()=>{Object(C.loadArcGISJSAPIModules)(["esri/widgets/"+this.props.measureModule.path]).then(e=>{[this.MeasureClass]=e,this.setState({apiLoaded:!0})})})}render(){return s.React.createElement("div",{className:"w-100",style:{width:"250px",position:"relative",minHeight:"32px"},ref:e=>{this.parentContainer=e}},s.React.createElement("div",{ref:e=>{this.container=e}},!this.state.apiLoaded&&s.React.createElement("div",{className:"exbmap-basetool-loader"})))}}var Y;!function(e){e.Point="point",e.Polyline="polyline",e.Polygon="polygon",e.Circle="circle",e.Rectangle="rectangle"}(Y||(Y={}));const K={style:"esriSMSCircle",color:[0,0,128,128],name:"Circle",outline:{color:[0,0,128,255],width:1},type:"esriSMS",size:18},$={tags:["solid"],title:"Blue Thin",style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},X={style:"esriSFSSolid",color:[79,129,189,77],type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}},ee=i(95),te=i(173),ie=i(273),se=i(274),oe=i(275),ae=i(276),ne=i(277);class le extends s.React.PureComponent{constructor(e){super(e),this.currentActiveTool="rectangle",this.jsonUtils=null,this.resultGraphics=[],this.removeEvents=[],this.toggleIsSelectActive=()=>{this.setState({isActive:!this.state.isActive})},this.getSelectToolIcon=()=>"Point"===this.state.currentSelectType?ae:"Rectangle"===this.state.currentSelectType?te:"Lasso"===this.state.currentSelectType?ie:"Circle"===this.state.currentSelectType?se:"Line"===this.state.currentSelectType?oe:te,this.toggleSelectTypePopup=()=>{this.setState({isShowSelectTypePopup:!this.state.isShowSelectTypePopup})},this.toggleResultPopup=()=>{this.setState({isShowResultPopup:!this.state.isShowResultPopup})},this.setCurrentSelectType=e=>{this.initializeSketchTool(),"Point"===e&&(this.sketchViewModel.create("point"),this.currentActiveTool="point"),"Rectangle"===e&&(this.sketchViewModel.create("rectangle"),this.currentActiveTool="rectangle"),"Lasso"===e&&(this.sketchViewModel.create("polygon"),this.currentActiveTool="polygon"),"Circle"===e&&(this.sketchViewModel.create("circle"),this.currentActiveTool="circle"),"Line"===e&&(this.sketchViewModel.create("polyline"),this.currentActiveTool="polyline"),this.setState({currentSelectType:e,isShowSelectTypePopup:!1,isActive:!0})},this.clearSelect=()=>{this.props.jimuMapView.clearSelectedFeatures(),this.props.onClearSelect&&this.props.onClearSelect(null,{sketchViewModel:this.sketchViewModel})},this.state={isShowResultPopup:!1,isShowSelectTypePopup:!1,currentSelectType:"Rectangle",sketcheInitialized:!1,isActive:!1,spatialRelationship:"intersects",resultGraphics:[],isQuerying:!1}}getCSSStyle(){const e=this.props.theme,t=e.arcgis.components.button.variants.default.default.bg,i=e.arcgis.components.button.variants.default.default.border;return s.css`
      .select-tool-container {
        ${t&&`background-color: ${t};`}
        ${i&&`border: ${i.color} ${i.width} solid;`}
      }

      .select-tool-btn {
        width: 32px;
        height: 32px;
      }

      .content-bg {
        background-color: ${e.colors.palette.light[100]};
      }

      .content-title {
        font-size: ${s.polished.rem(13)};
        font-weight: bold;
      }

      .select-tool-type-mobile-container-shell {
        overflow-x: auto;
      }

      .select-tool-type-mobile-container-shell::-webkit-scrollbar {
        height: 0 !important;
        display: none;
      }

      .select-tool-type-mobile-container {
        width: 400px;
      }

      .select-tool-type {
        width: 64px;
        height: 64px;
        border: 1px solid ${e.colors.palette.light[400]};
        cursor: pointer;
      }

      .select-tool-type-choosed {
        border: 1px solid ${e.colors.primary};
        position: relative;
      }

      .select-tool-type-choosed:after {
        width: 0;
        height: 0;
        border-top: 8px solid ${e.colors.primary};
        border-left: 8px solid transparent;
        position: absolute;
        top: 0;
        right: 0;
        content: "";
      }

      .select-tool-type-text {
        font-size: ${s.polished.rem(12)};
      }

      .select-tool-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        animation: esri-fade-in 500ms ease-in-out;
      }

      .select-tool-loader:before {
        background-color: rgba(110,110,110,0.3);
        width: 100%;
        z-index: 0;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .select-tool-loader:after {
        background-color: ${e.colors.primary};
        width: 20%;
        z-index: 0;
        animation: looping-progresss-bar-ani 1500ms linear infinite;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

    `}componentDidMount(){this.state.sketcheInitialized||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/tasks/support/Query","esri/symbols/support/jsonUtils","esri/geometry/geometryEngine"]).then(e=>{[this.SketchViewModel,this.GraphicsLayer,this.Query,this.jsonUtils,this.geometryEngine]=e,this.props.jimuMapView.view.when(()=>{this.initializeSketchTool(),this.setState({sketcheInitialized:!0})})})}componentDidUpdate(e,t){return t.sketcheInitialized!==this.state.sketcheInitialized&&this.state.sketcheInitialized?(this.initializeSketchTool(),void(this.state.isActive&&this.currentActiveTool&&this.sketchViewModel.create(this.currentActiveTool))):e.jimuMapView&&this.props.jimuMapView&&e.jimuMapView.id!==this.props.jimuMapView.id&&this.state.sketcheInitialized?(this.initializeSketchTool(),this.sketchViewModel.view=this.props.jimuMapView.view,void(this.state.isActive&&this.currentActiveTool&&this.sketchViewModel.create(this.currentActiveTool))):void(t.isActive!==this.state.isActive&&(this.initializeSketchTool(),this.state.isActive?this.sketchViewModel.create(this.currentActiveTool):this.removeSketchViewModel()))}componentWillUnmount(){this.removeSketchViewModel()}removeSketchViewModel(){this.sketchViewModel&&(this.sketchViewModel.destroy(),this.sketchViewModel=null,this.removeEvents.forEach(e=>e()),this.removeEvents=[])}initializeSketchTool(){if(this.SketchViewModel&&!this.sketchViewModel){this.sketchViewModel=new this.SketchViewModel({view:this.props.jimuMapView.view,layer:new this.GraphicsLayer,pointSymbol:this.jsonUtils.fromJSON(K),polylineSymbol:this.jsonUtils.fromJSON($),polygonSymbol:this.jsonUtils.fromJSON(X)});const e=this.sketchViewModel.on("create",e=>{const{spatialRelationship:t}=this.state;if("start"===e.state)this.props.onSelectStart&&this.props.onSelectStart(e,{spatialRelationship:t,sketchViewModel:this.sketchViewModel});else if("complete"===e.state){this.sketchViewModel.create(this.currentActiveTool);(this.props.onSelectComplete||((e,{spatialRelationship:t})=>{this.setState({isQuerying:!0});this.props.jimuMapView.selectFeaturesByGraphic(e.graphic,t).then(()=>{this.setState({isQuerying:!1})})}))(e,{spatialRelationship:t,sketchViewModel:this.sketchViewModel})}});this.removeEvents.push(e.remove)}}render(){return Object(s.jsx)("div",{css:this.getCSSStyle()},Object(s.jsx)("div",{className:"d-flex align-items-center justify-content-center select-tool-container",ref:e=>{this.btnContainer=e}},Object(s.jsx)("div",{className:"d-flex"},Object(s.jsx)("div",{className:"d-flex"},Object(s.jsx)("button",{onClick:this.toggleIsSelectActive,className:Object(s.classNames)("esri-widget--button  border-0 select-tool-btn d-flex align-items-center justify-content-center",{active:this.state.isActive}),disabled:!this.state.sketcheInitialized},Object(s.jsx)(c.Icon,{width:16,height:16,icon:this.getSelectToolIcon()})),Object(s.jsx)("button",{onClick:this.toggleSelectTypePopup,style:{width:18},className:Object(s.classNames)("esri-widget--button border-0 pl-1 pr-1 select-tool-btn d-flex align-items-center justify-content-center",{active:this.state.isShowSelectTypePopup}),disabled:!this.state.sketcheInitialized},Object(s.jsx)(c.Icon,{width:8,height:8,icon:ee}))),Object(s.jsx)("button",{className:"select-tool-btn d-flex align-items-center justify-content-center select-tool-btn-hover esri-widget--button border-0",ref:e=>{this.selectResultContainer=e},onClick:this.clearSelect,disabled:!this.state.sketcheInitialized},Object(s.jsx)(c.Icon,{width:16,height:16,icon:ne})),Object(s.jsx)(c.Popper,{css:this.getCSSStyle(),reference:this.btnContainer,open:this.state.isShowSelectTypePopup,placement:"bottom-start",toggle:this.toggleSelectTypePopup},Object(s.jsx)("div",{className:"p-3 content-bg",style:{display:"flex",flexDirection:"column"}},Object(s.jsx)("div",{className:"content-title"},this.props.intl.formatMessage({id:"SelectionTool",defaultMessage:c.defaultMessages.SelectionTool})),Object(s.jsx)("div",{className:"mt-2 mb-2"},Object(s.jsx)("div",{className:"d-flex mb-2"},[{toolType:Y.Rectangle,selectType:"Rectangle",icon:te,title:this.props.intl.formatMessage({id:"SelectionToolRectangle",defaultMessage:c.defaultMessages.SelectionToolRectangle})},{toolType:Y.Polygon,selectType:"Lasso",icon:ie,title:this.props.intl.formatMessage({id:"SelectionToolLasso",defaultMessage:c.defaultMessages.SelectionToolLasso})},{toolType:Y.Circle,selectType:"Circle",icon:se,title:this.props.intl.formatMessage({id:"SelectionToolCircle",defaultMessage:c.defaultMessages.SelectionToolCircle})},{toolType:Y.Polyline,selectType:"Line",icon:oe,title:this.props.intl.formatMessage({id:"SelectionToolLine",defaultMessage:c.defaultMessages.SelectionToolLine})},{toolType:Y.Point,selectType:"Point",icon:ae,title:this.props.intl.formatMessage({id:"SelectionToolPoint",defaultMessage:c.defaultMessages.SelectionToolPoint})}].filter((e,t)=>{var i;return!(null===(i=this.props.availableTools)||void 0===i?void 0:i.length)||this.props.availableTools.includes(e.toolType)}).map((e,t)=>Object(s.jsx)("div",{key:t,className:Object(s.classNames)("select-tool-type mr-2 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover",{"select-tool-type-choosed":this.state.currentSelectType===e.selectType}),onClick:()=>{this.setCurrentSelectType(e.selectType)}},Object(s.jsx)(c.Icon,{width:16,height:16,icon:e.icon}),Object(s.jsx)("div",{className:"select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center",title:e.title},e.title))))),this.props.availableSelectionMode?Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)("div",{className:"content-title"},this.props.intl.formatMessage({id:"SelectionMode",defaultMessage:c.defaultMessages.SelectionMode})),Object(s.jsx)("div",null,Object(s.jsx)("div",{className:"d-flex align-items-center mt-2"},Object(s.jsx)(c.Radio,{style:{cursor:"pointer"},checked:"intersects"===this.state.spatialRelationship,onChange:()=>{this.setState({spatialRelationship:"intersects"})}}),Object(s.jsx)("label",{className:"m-0 ml-2 content-title",style:{cursor:"pointer"},onClick:()=>{this.setState({spatialRelationship:"intersects"})}},this.props.intl.formatMessage({id:"SelectionWithin",defaultMessage:c.defaultMessages.SelectionWithin}))),Object(s.jsx)("div",{className:"d-flex align-items-center mt-2"},Object(s.jsx)(c.Radio,{style:{cursor:"pointer"},checked:"contains"===this.state.spatialRelationship,onChange:()=>{this.setState({spatialRelationship:"contains"})}}),Object(s.jsx)("label",{className:"m-0 ml-2 content-title",style:{cursor:"pointer"},onClick:()=>{this.setState({spatialRelationship:"contains"})}},this.props.intl.formatMessage({id:"SelectionContain",defaultMessage:c.defaultMessages.SelectionContain}))))):null)))),(this.state.isQuerying||!this.state.sketcheInitialized)&&Object(s.jsx)("div",{className:"select-tool-loader"}))}}var re={Zoom:class extends R{constructor(e){super(e),this.toolName="Zoom"}getTitle(){return this.props.intl.formatMessage({id:"ZoomLabel",defaultMessage:c.defaultMessages.ZoomLabel})}getIcon(){return null}getExpandPanel(){return s.React.createElement(E,{jimuMapView:this.props.jimuMapView})}},Home:class extends R{constructor(e){super(e),this.toolName="Home",this.getHomeContent=e=>s.React.createElement(A,{jimuMapView:this.props.jimuMapView,initialMapState:e})}getTitle(){return this.props.intl.formatMessage({id:"HomeLabel",defaultMessage:c.defaultMessages.HomeLabel})}getIcon(){return null}getExpandPanel(){return s.React.createElement(z.Consumer,null,({initialMapState:e})=>this.getHomeContent(e))}},Navigation:class extends R{constructor(e){super(e),this.toolName="Navigation"}getTitle(){return"Navigation"}getIcon(){return null}getExpandPanel(){return s.React.createElement(W,{jimuMapView:this.props.jimuMapView})}},Locate:class extends R{constructor(e){super(e),this.toolName="Locate"}getTitle(){return"Locate"}getIcon(){return null}getExpandPanel(){return s.React.createElement(U,{jimuMapView:this.props.jimuMapView})}},Compass:class extends R{constructor(e){super(e),this.toolName="Compass"}getTitle(){return this.props.intl.formatMessage({id:"CompassLabel",defaultMessage:c.defaultMessages.CompassLabel})}getIcon(){return null}getExpandPanel(){return s.React.createElement(G,{jimuMapView:this.props.jimuMapView})}},Search:class extends R{constructor(e){super(e),this.toolName="Search"}getTitle(){return this.props.intl.formatMessage({id:"SearchLabel",defaultMessage:c.defaultMessages.SearchLabel})}getIcon(){return{icon:i(268)}}getExpandPanel(){return this.props.isMobile?Object(s.jsx)("div",{style:{minHeight:"32px",position:"relative",width:"100%"}},Object(s.jsx)(F,{jimuMapView:this.props.jimuMapView})):Object(s.jsx)("div",{style:{minWidth:"250px",minHeight:"32px",position:"relative"}},Object(s.jsx)(F,{jimuMapView:this.props.jimuMapView}))}},Layers:class extends R{constructor(e){super(e),this.toolName="Layers",this.handleTabIndexChange=e=>{this.setState({activeTabIndex:e})},this.state={activeTabIndex:0}}getTitle(){return this.props.intl.formatMessage({id:"LayersLabel",defaultMessage:c.defaultMessages.LayersLabel})}getIcon(){return{icon:i(269)}}getExpandPanel(){return s.React.createElement("div",{style:{width:this.props.isMobile?"100%":"250px",minHeight:"32px",position:"relative"},className:Object(s.classNames)({"exbmap-ui-pc-expand-maxheight":!this.props.isMobile})},s.React.createElement(c.Nav,{tabs:!0},s.React.createElement(c.NavItem,null,s.React.createElement(c.NavLink,{active:0===this.state.activeTabIndex,onClick:()=>{this.handleTabIndexChange(0)}},this.props.intl.formatMessage({id:"LayersLabelLayer",defaultMessage:c.defaultMessages.LayersLabelLayer}))),s.React.createElement(c.NavItem,null,s.React.createElement(c.NavLink,{active:1===this.state.activeTabIndex,onClick:()=>{this.handleTabIndexChange(1)}},this.props.intl.formatMessage({id:"LayersLabelLegend",defaultMessage:c.defaultMessages.LayersLabelLegend})))),s.React.createElement("div",{className:"mt-1"}),0===this.state.activeTabIndex&&s.React.createElement(H,{jimuMapView:this.props.jimuMapView}),1===this.state.activeTabIndex&&s.React.createElement(Q,{jimuMapView:this.props.jimuMapView}))}},BaseMap:class extends R{constructor(e){super(e),this.toolName="BaseMap"}getTitle(){return this.props.intl.formatMessage({id:"BaseMapLabel",defaultMessage:c.defaultMessages.BaseMapLabel})}getIcon(){return{icon:i(270)}}getExpandPanel(){return s.React.createElement(_,{jimuMapView:this.props.jimuMapView,isMobile:this.props.isMobile})}},Measure:class extends R{constructor(e){super(e),this.toolName="Measure",this.measureModules2D=[{name:"Line",title:"Line",path:"DistanceMeasurement2D",src:i(171)},{name:"Polygon",title:"Polygon",path:"AreaMeasurement2D",src:i(172)}],this.measureModules3D=[{name:"Line",title:"Line",path:"DirectLineMeasurement3D",src:i(171)},{name:"Polygon",title:"Polygon",path:"AreaMeasurement3D",src:i(172)}],this.handleMeasurceInstanceCreated=(e,t)=>{const i=this.state.measureInstances;i[t]=e,this.setState({measureInstances:i})},this.onTabClick=e=>{if(this.state.activeTabIndex===e);else{this.setState({activeTabIndex:e});for(let t=0;t<this.state.measureInstances.length;t++)t!==e&&this.state.measureInstances[t]&&(this.state.measureInstances[t].visible=!1),t===e&&this.state.measureInstances[t]&&(this.state.measureInstances[t].visible=!0)}},this.onClosePanel=()=>{for(let e=0;e<this.state.measureInstances.length;e++)this.state.measureInstances[e]&&(this.state.measureInstances[e].visible=!1)},this.onShowPanel=()=>{for(let e=0;e<this.state.measureInstances.length;e++)e!==this.state.activeTabIndex&&this.state.measureInstances[e]&&(this.state.measureInstances[e].visible=!1),e===this.state.activeTabIndex&&this.state.measureInstances[e]&&(this.state.measureInstances[e].visible=!0)},this.state={activeTabIndex:0,measureInstances:[null,null]}}getTitle(){return this.props.intl.formatMessage({id:"MeasureLabel",defaultMessage:c.defaultMessages.MeasureLabel})}getIcon(){return{icon:i(272)}}destroy(){for(let e=0;e<this.state.measureInstances.length;e++)this.state.measureInstances[e]&&!this.state.measureInstances[e].destroyed&&this.state.measureInstances[e].destroy()}getExpandPanel(){return"2d"===this.props.jimuMapView.view.type?s.React.createElement("div",{style:{width:this.props.isMobile?"100%":"",position:"relative"},className:Object(s.classNames)({"exbmap-ui-pc-expand-maxheight":!this.props.isMobile})},s.React.createElement(c.Nav,{tabs:!0},this.measureModules2D.map((e,t)=>s.React.createElement(c.NavItem,{key:t},s.React.createElement(c.NavLink,{active:this.state.activeTabIndex===t,onClick:()=>{this.onTabClick(t)}},s.React.createElement(c.Icon,{width:16,height:16,className:"m-0",icon:e.src}))))),s.React.createElement(J,{activeTabIndex:this.state.activeTabIndex,jimuMapView:this.props.jimuMapView,measureModule:this.measureModules2D[this.state.activeTabIndex],measureInstance:this.state.measureInstances[this.state.activeTabIndex],onMeasurceInstanceCreated:this.handleMeasurceInstanceCreated})):"3d"===this.props.jimuMapView.view.type?s.React.createElement("div",{style:{width:this.props.isMobile?"100%":"",position:"relative"},className:Object(s.classNames)({"exbmap-ui-pc-expand-maxheight":!this.props.isMobile})},s.React.createElement(c.Nav,{tabs:!0},this.measureModules3D.map((e,t)=>s.React.createElement(c.NavItem,{key:t},s.React.createElement(c.NavLink,{active:this.state.activeTabIndex===t,onClick:()=>{this.onTabClick(t)}},s.React.createElement(c.Icon,{width:16,height:16,className:"m-0",icon:e.src}))))),s.React.createElement(J,{activeTabIndex:this.state.activeTabIndex,jimuMapView:this.props.jimuMapView,measureModule:this.measureModules3D[this.state.activeTabIndex],measureInstance:this.state.measureInstances[this.state.activeTabIndex],onMeasurceInstanceCreated:this.handleMeasurceInstanceCreated})):null}},MapSwitch:class extends R{constructor(e){super(e),this.toolName="MapSwitch",this.switchMap=()=>{},this.getContent=(e,t,i,o,a)=>{const n=()=>{Object(s.getAppStore)().dispatch(s.appActions.requestAutoControlMapWidget(a,a)),o()};if(e){if(this.props.isMobile)return Object(s.jsx)("div",{className:"exbmap-ui-tool esri-widget--button",onClick:n,style:{marginTop:"10px"}},Object(s.jsx)(c.Icon,{width:16,height:16,className:"exbmap-ui-tool-icon",icon:this.getIcon().icon}));{let e=null;return e=window.jimuConfig.isBuilder?Object(s.getAppStore)().getState().appStateInBuilder.appConfig.dataSources:Object(s.getAppStore)().getState().appConfig.dataSources,Object(s.jsx)("div",{css:this.getStyle(),onClick:n},Object(s.jsx)("div",{title:e[t[0]]?e[t[0]].label:null,className:Object(s.classNames)("mapthumb-item",{front:t[0]!==i},{back:t[0]===i})},Object(s.jsx)(h,{mapItemId:e[t[0]]?e[t[0]].itemId:null,portUrl:e[t[0]]?e[t[0]].portalUrl:null})),Object(s.jsx)("div",{title:e[t[1]]?e[t[1]].label:null,className:Object(s.classNames)("mapthumb-item",{front:t[1]!==i},{back:t[1]===i})},Object(s.jsx)(h,{mapItemId:e[t[1]]?e[t[1]].itemId:null,portUrl:e[t[1]]?e[t[1]].portalUrl:null})))}}return null},this.getIconContent=(e,t,i,s)=>e?(this.switchMap=s,super.render()):null}static getIsNeedSetting(){return!1}getStyle(){return s.css`
      width: ${s.polished.rem(68)};
      height: ${s.polished.rem(52)};
      cursor: pointer;
      position: relative;

      .mapthumb-item {
        position: absolute;
        width: ${s.polished.rem(64)};
        height: ${s.polished.rem(48)};
        transition: bottom 0.5s, left 0.5s, top 0.5s, right 0.5s, z-index 0.5s;
      }

      .front {
        z-index: 1;
        bottom: 0;
        left: 0;
      }

      .back {
        z-index: 0;
        top: 0;
        right: 0;
      }
    `}getTitle(){return"MapSwitch"}getIcon(){return{icon:i(170),onIconClick:()=>{this.switchMap()}}}getExpandPanel(){return this.props.toolJson.isOnlyExpanded?Object(s.jsx)(z.Consumer,null,({isShowMapSwitchBtn:e,dataSourceIds:t,activeDataSourceId:i,switchMap:s,mapComponentId:o})=>this.getContent(e,t,i,s,o)):null}render(){return this.props.toolJson.isOnlyExpanded?super.render():Object(s.jsx)(z.Consumer,null,({isShowMapSwitchBtn:e,dataSourceIds:t,activeDataSourceId:i,switchMap:s})=>this.getIconContent(e,t,i,s))}},FullScreen:class extends R{constructor(e){super(e),this.toolName="Fullscreen",this.fullScreenMap=()=>{},this.getContent=e=>(this.fullScreenMap=e,super.render())}getTitle(){return this.props.intl.formatMessage({id:"FullScreenLabel",defaultMessage:c.defaultMessages.FullScreenLabel})}getIcon(){return{icon:i(271),onIconClick:e=>{this.fullScreenMap()}}}getExpandPanel(){return null}render(){return s.React.createElement(z.Consumer,null,({fullScreenMap:e})=>this.getContent(e))}},ScaleBar:class extends R{constructor(e){super(e),this.toolName="ScaleBar"}getTitle(){return"ScaleBar"}getIcon(){return null}getExpandPanel(){return s.React.createElement(q,{jimuMapView:this.props.jimuMapView})}},Attribution:class extends R{constructor(e){super(e),this.toolName="Attribution"}static getIsNeedSetting(){return!1}getTitle(){return"Attribution"}getIcon(){return null}getExpandPanel(){return s.React.createElement(Z,{jimuMapView:this.props.jimuMapView})}},Select:class extends R{constructor(e){super(e),this.toolName="Select",this.state={}}getTitle(){return this.props.intl.formatMessage({id:"SelectLabel",defaultMessage:c.defaultMessages.SelectLabel})}getIcon(){return{icon:i(173)}}getExpandPanel(){return Object(s.jsx)(le,{intl:this.props.intl,jimuMapView:this.props.jimuMapView})}}};class ce extends D{constructor(e){super(e)}componentDidMount(){const e=this.refs.baseToolInstance;(!re[this.props.toolName].getIsNeedSetting()||this.props.toolConfig&&this.props.toolConfig["can"+this.props.toolName])&&(this.props.jimuMapView.view.ui.exbMapTools[this.props.toolName]=e)}componentWillUnmount(){if(re[this.props.toolName].getIsNeedSetting()){const e=this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.ui&&this.props.jimuMapView.view.ui.exbMapTools[this.props.toolName];e&&e.destroy&&(e.destroy(),delete this.props.jimuMapView.view.ui.exbMapTools[this.props.toolName])}}render(){const e=re[this.props.toolName];return e?Object(s.jsx)("div",{className:Object(s.classNames)(this.props.className,"exbmap-ui exbmap-ui-tool-shell divitem",this.props.layoutConfig.elements[this.props.toolName].className,{"exbmap-ui-hidden-element":this.props.isHidden,"mb-0 mr-0":this.props.isLastElement,"rounded-pill":["Compass"].includes(this.props.toolName)})},Object(s.jsx)(e,{ref:"baseToolInstance",toolJson:this.props.layoutConfig.elements[this.props.toolName],toolName:this.props.toolName,isMobile:this.props.isMobile,jimuMapView:this.props.jimuMapView,activeToolName:this.props.activeToolName,onActiveToolNameChange:this.props.onActiveToolNameChange,intl:this.props.intl})):this.props.isMobile?Object(s.jsx)("span",null):null}}class pe extends D{constructor(e){super(e),this.moveY=0,this.startY=0,this.sliding=!1,this.startDrag=!1,this.currentBottomPanelHeight=0,this.thumbMapElementNames=["FullScreen","Zoom","MapSwitch"],this.checkIsHiddenElement=e=>!!this.props.hiddenElementNames&&!!this.props.hiddenElementNames.includes(e),this.start=(e,t)=>{if(this.startDrag=!0,"touch"===t){this.moveY=0;const t=e.touches[0];this.startY=t.clientY}"mouse"===t&&(this.moveY=0,this.startY=e.clientY),document.getElementById(this.props.jimuMapView.id+"-bottom-panel").classList.remove("expand-mobile-panel-transition")},this.move=(e,t)=>{if("touch"===t){this.sliding=!0;const t=e.touches[0];this.moveY=-1*(t.clientY-this.startY)}if("mouse"===t&&this.startDrag&&(this.sliding=!0,this.moveY=-1*(e.clientY-this.startY)),"mouse"===t&&!this.startDrag)return;let i=150;this.state.bottomPanelHeight+this.moveY>i&&(i=this.state.bottomPanelHeight+this.moveY),document.getElementById(this.props.jimuMapView.id+"-bottom-panel").style.height=i+"px",this.currentBottomPanelHeight=i;const s=this.state.widgetHeight-i;s>360&&this.props.onSetHiddenElementNames([]),s>200&&s<=360&&this.props.onSetHiddenElementNames(this.props.layoutConfig.mobileResponsiveStrategy.stage1),s>54&&s<=200&&this.props.onSetHiddenElementNames(this.props.layoutConfig.mobileResponsiveStrategy.stage2),s<54&&this.props.onSetHiddenElementNames(this.props.layoutConfig.mobileResponsiveStrategy.stage3)},this.end=(e,t)=>{if("mouse"!==t||this.startDrag){if(this.startDrag=!1,this.sliding=!1,document.getElementById(this.props.jimuMapView.id+"-bottom-panel").classList.add("expand-mobile-panel-transition"),"touch"===t&&Math.abs(this.moveY)<10)return document.getElementById(this.props.jimuMapView.id+"-bottom-panel").style.height=this.state.bottomPanelHeight+"px",void(this.currentBottomPanelHeight=this.state.bottomPanelHeight);if(this.moveY>=0){let e=0;e=this.currentBottomPanelHeight>=150&&this.currentBottomPanelHeight<.6*this.state.widgetHeight?.6*this.state.widgetHeight:this.currentBottomPanelHeight>=.6*this.state.widgetHeight&&this.currentBottomPanelHeight<this.state.widgetHeight?this.state.widgetHeight-20:150,this.setState({bottomPanelHeight:e},()=>{this.checkResponsive()}),this.currentBottomPanelHeight=e}else{let e=0;e=this.currentBottomPanelHeight>150&&this.currentBottomPanelHeight<.6*this.state.widgetHeight?150:this.currentBottomPanelHeight>=.6*this.state.widgetHeight&&this.currentBottomPanelHeight<this.state.widgetHeight?.6*this.state.widgetHeight:150,this.setState({bottomPanelHeight:e},()=>{this.checkResponsive()}),this.currentBottomPanelHeight=e}}},this.checkResponsive=()=>{if(this.state.isThumbMap)return void this.props.onSetHiddenElementNames([]);if(0===this.state.bottomPanelHeight)return this.props.onActiveToolNameChange(null),void this.props.onSetHiddenElementNames([]);const e=this.state.widgetHeight-this.state.bottomPanelHeight;e>360&&this.props.onSetHiddenElementNames([]),e>200&&e<=360&&this.props.onSetHiddenElementNames(this.props.layoutConfig.mobileResponsiveStrategy.stage1),e>54&&e<=200&&this.props.onSetHiddenElementNames(this.props.layoutConfig.mobileResponsiveStrategy.stage2),e<54&&this.props.onSetHiddenElementNames(this.props.layoutConfig.mobileResponsiveStrategy.stage3)},this.onResize=(e,t)=>{e<320&&t<380?this.setState({widgetWidth:e,widgetHeight:t,isThumbMap:!0},()=>{this.checkResponsive()}):this.setState({widgetWidth:e,widgetHeight:t,isThumbMap:!1},()=>{this.checkResponsive()})},this.returnNullNode=e=>this.props.isMobile?Object(s.jsx)("span",{key:e}):null,this.checkIsLastElement=(e,t)=>{const i=t.toolName,s=this.props.layoutConfig,o=s.layout[e.groupName].children,a=o.indexOf(i);if(a===o.length-1)return!0;if(a<o.length-1){let e=!0;for(let t=a+1;t<o.length;t++){const i=o[t];if("GROUP"!==s.elements[o[t]].type&&(!re[i].getIsNeedSetting()||this.props.toolConfig&&this.props.toolConfig["can"+i]||s.lockToolNames&&s.lockToolNames.includes(i))){e=!1;break}}return e}},this.getGroupContent=e=>{if(e){const t=e.layout[this.props.groupName]&&e.layout[this.props.groupName].children;return this.checkIsShowGroup(e,t)?Object(s.jsx)("div",{css:this.getStyle(),className:Object(s.classNames)("exbmap-ui exbmap-ui-group",this.props.className,{"exbmap-ui-hidden-element":this.props.isHidden}),style:this.props.style},t.map((t,i)=>e.elements[t]?"GROUP"===e.elements[t].type?Object(s.jsx)(pe,{isHidden:this.checkIsHiddenElement(t),className:e.elements[t].className,style:e.elements[t].style,key:i,layoutConfig:e,toolConfig:this.props.toolConfig,isMobile:this.props.isMobile,intl:this.props.intl,jimuMapView:this.props.jimuMapView,groupName:t,activeToolName:this.props.activeToolName,hiddenElementNames:this.props.hiddenElementNames,onActiveToolNameChange:this.props.onActiveToolNameChange,isThumbMap:this.props.isMainGroup?this.state.isThumbMap:this.props.isThumbMap}):"TOOL"===e.elements[t].type&&(!re[t].getIsNeedSetting()||this.props.toolConfig&&this.props.toolConfig["can"+t]||e.lockToolNames&&e.lockToolNames.includes(t))?Object(s.jsx)(ce,{isHidden:this.checkIsHiddenElement(t),key:i,layoutConfig:e,activeToolName:this.props.activeToolName,toolConfig:this.props.toolConfig,jimuMapView:this.props.jimuMapView,toolName:t,onActiveToolNameChange:this.props.onActiveToolNameChange,intl:this.props.intl,isMobile:this.props.isMobile,isLastElement:this.checkIsLastElement(e.elements[this.props.groupName],e.elements[t])}):this.returnNullNode(i):this.returnNullNode(i)),this.props.isMobile&&this.props.isMainGroup&&Object(s.jsx)(s.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.onResize}),this.props.isMainGroup&&Object(s.jsx)("div",{className:"exbmap-ui w-100",style:{position:"relative",pointerEvents:"auto",overflow:"hidden",touchAction:"none",display:!this.props.isMobile||this.state.isThumbMap||this.props.isThumbMap?"none":"block"},ref:e=>{e&&e.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1})}},Object(s.jsx)("div",{id:this.props.jimuMapView.id+"-bottom-panel",className:"exbmap-ui w-100 expand-mobile-panel expand-mobile-panel-transition",style:{overflow:"hidden",pointerEvents:"auto",position:"relative",backgroundColor:"#fff",touchAction:"none",height:(this.sliding?this.currentBottomPanelHeight:this.state.bottomPanelHeight)+"px"}}),this.props.activeToolName&&Object(s.jsx)("div",{style:{touchAction:"none"},className:"expand-mobile-panel-touch-container d-flex justify-content-center align-items-center",onMouseDown:e=>this.start(e,"mouse"),onMouseMove:e=>{this.move(e,"mouse")},onMouseLeave:e=>{this.end(e,"mouse")},onMouseUp:e=>{this.end(e,"mouse")},onTouchStart:e=>this.start(e,"touch"),onTouchMove:e=>{this.move(e,"touch")},onTouchEnd:e=>{this.end(e,"touch")}},Object(s.jsx)("div",{className:"expand-mobile-panel-bar"})))):this.returnNullNode()}return this.returnNullNode()},this.checkIsShowGroup=(e,t)=>{if(t&&0!==t.length){const i=[];this.findAllToolNames(e,t,i);let s=!1;for(let t=0;t<i.length;t++)if(this.props.toolConfig["can"+i[t]]||!re[i[t]].getIsNeedSetting()||e.lockToolNames&&e.lockToolNames.includes(i[t])){s=!0;break}return s}return!1},this.findAllToolNames=(e,t,i)=>{if(t&&0!==t.length)for(let s=0;s<t.length;s++)if("GROUP"===e.elements[t[s]].type){const o=e.elements[t[s]].groupName;this.findAllToolNames(e,e.layout[o]&&e.layout[o].children,i)}else i.push(t[s])},this.state={bottomPanelHeight:0,isThumbMap:!!this.props.isMobile}}getStyle(){const e=this.props.layoutConfig.layout[this.props.groupName]&&this.props.layoutConfig.layout[this.props.groupName].position,t=this.props.layoutConfig.elements[this.props.groupName].direction;return s.css`
      position: ${e?"absolute":"relative"};
      top: ${e?e.top:null}px;
      bottom: ${e?e.bottom:null}px;
      left: ${e?e.left:null}px;
      right: ${e?e.right:null}px;
      display: flex;
      flex-flow: ${"vertical"===t?"column":"row"};
      align-items: flex-start;

      > .exbmap-ui + .exbmap-ui {
        margin-top: ${"vertical"===t?"10px":0};
        margin-left: ${"horizontal"===t?"10px":0};
      }

      .exbmap-ui-group-expand-icon {
        fill: black;
        left: 8px;
        top: 8px;
        position: absolute;
        display: block;
      }

      .expand-mobile-panel {
        box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 2px;
        border-radius: 10px 10px 0px 0px;
      }

      .expand-mobile-panel-transition {
        transition: height 0.3s;
      }

      .expand-mobile-panel-touch-container {
        top: 0;
        position: absolute;
        width: 100%;
        height: 31px;
      }

      .expand-mobile-panel-bar {
        width: 36px;
        height: 4px;
        background-color: #434343;
        border-radius: 2px;
      }
      `}componentDidUpdate(e,t){if(this.props.activeToolName!==e.activeToolName){if(this.props.activeToolName&&e.activeToolName)return;this.props.activeToolName&&!e.activeToolName&&this.props.isMobile&&this.props.isMainGroup&&(this.setState({bottomPanelHeight:150},()=>{this.checkResponsive()}),this.currentBottomPanelHeight=150),!this.props.activeToolName&&e.activeToolName&&this.props.isMobile&&this.props.isMainGroup&&(this.setState({bottomPanelHeight:0},()=>{this.checkResponsive()}),this.currentBottomPanelHeight=0)}}render(){return this.getGroupContent(this.props.layoutConfig)}}class de extends s.React.PureComponent{constructor(e){super(e),this.getMaxHeightForPcExpand=e=>{if(e){if(e<65)return null;{const t=e-65;return t<300?t:300}}return null},this.handleActiveNameChange=e=>{this.setState({activeToolName:e})},this.handSetHiddenElementNames=e=>{this.setState({hiddenElementNames:e})},this.getLayoutContent=e=>e&&this.props.toolConfig?Object(s.jsx)("div",{css:this.getStyle()},Object.keys(e.layout).map((t,i)=>e.elements[t]&&"GROUP"===e.elements[t].type&&e.layout[t].position?Object(s.jsx)(pe,{className:e.elements[t].className,style:e.elements[t].style,isResponsive:e.elements[t].isResponsive,isMobile:this.props.isMobile,isMainGroup:!0,key:i,layoutConfig:e,toolConfig:this.props.toolConfig,onActiveToolNameChange:this.handleActiveNameChange,jimuMapView:this.props.jimuMapView,groupName:t,activeToolName:this.state.activeToolName,hiddenElementNames:e.mobileResponsiveStrategy&&this.state.hiddenElementNames,intl:this.props.intl,onSetHiddenElementNames:this.handSetHiddenElementNames}):null)):null,this.state={activeToolName:null,toolsContentInMobileExpandPanel:null,hiddenElementNames:[]},this.contentRef=document.createElement("div"),this.contentRef.className="exbmap-ui esri-ui-inner-container exbmap-ui-layout"}getStyle(){return s.css`
      z-index: 0;

      .expand-panel-transition {
        transition: opacity 0.3s, right 0.3s;
      }

      .scale-attribution-xy-group {
        > div:first-of-type:nth-last-of-type(1) {
          width: 100%;
          max-width: 100% !important;
        }
      }

      .exbmap-ui-hidden-element {
        display: none !important;
      }

      .exbmap-basetool-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        animation: esri-fade-in 500ms ease-in-out;
      }

      .exbmap-basetool-loader:before {
        background-color: rgba(110,110,110,0.3);
        width: 100%;
        z-index: 0;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .exbmap-basetool-loader:after {
        background-color: #6e6e6e;
        width: 20%;
        z-index: 0;
        animation: looping-progresss-bar-ani 1500ms linear infinite;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .exbmap-ui-pc-expand-maxheight {
        max-height: ${this.getMaxHeightForPcExpand(this.props.widgetHeight)}px;
        overflow: auto
      }
      `}componentDidMount(){this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.ui&&this.props.jimuMapView.view.ui.container&&this.props.jimuMapView.view.ui.container.appendChild(this.contentRef)}render(){return this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.ui&&this.props.jimuMapView.view.ui.container?Object(s.jsx)("div",null,s.ReactDOM.createPortal(this.getLayoutContent(this.props.layoutConfig),this.contentRef)):null}}var he=[{elements:{navigator:{type:"GROUP",groupName:"navigator",direction:"vertical"},interact:{type:"GROUP",groupName:"interact",direction:"vertical",isResponsive:!0},bottom:{type:"GROUP",groupName:"bottom",direction:"vertical",className:"w-100"},"bottom-line1":{type:"GROUP",groupName:"bottom-line1",direction:"horizontal",className:"d-flex align-items-center justify-content-between w-100 scale-attribution-xy-group",style:{marginBottom:0}},"bottom-line2":{type:"GROUP",groupName:"bottom-line2",direction:"horizontal",className:"d-flex align-items-center justify-content-between w-100",style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"10px"}},attributionGroup:{type:"GROUP",groupName:"attributionGroup",direction:"horizontal",style:{maxWidth:"60%"}},Zoom:{type:"TOOL",toolName:"Zoom",isOnlyExpanded:!0,isShowIconTitle:!1},Home:{type:"TOOL",toolName:"Home",isOnlyExpanded:!0,isShowIconTitle:!1},Compass:{type:"TOOL",toolName:"Compass",isOnlyExpanded:!0,isShowIconTitle:!1},Navigation:{type:"TOOL",toolName:"Navigation",isOnlyExpanded:!0,isShowIconTitle:!1},Locate:{type:"TOOL",toolName:"Locate",isOnlyExpanded:!0,isShowIconTitle:!1},Layers:{type:"TOOL",toolName:"Layers",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},BaseMap:{type:"TOOL",toolName:"BaseMap",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},Measure:{type:"TOOL",toolName:"Measure",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},MapSwitch:{type:"TOOL",toolName:"MapSwitch",isOnlyExpanded:!0,isShowIconTitle:!0},FullScreen:{type:"TOOL",toolName:"FullScreen",isOnlyExpanded:!1,isShowIconTitle:!0},ScaleBar:{type:"TOOL",toolName:"ScaleBar",isOnlyExpanded:!0,isShowIconTitle:!1},Attribution:{type:"TOOL",toolName:"Attribution",isOnlyExpanded:!0,isShowIconTitle:!1,className:"w-100"},Search:{type:"TOOL",toolName:"Search",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"}},layout:{navigator:{children:["Zoom","Home","Navigation","Locate","Compass"],position:{top:15,left:15}},interact:{children:["Search","Layers","BaseMap","Measure"],position:{top:15,right:15}},"bottom-line1":{children:["ScaleBar","attributionGroup"]},"bottom-line2":{children:["MapSwitch","FullScreen"]},bottom:{children:["bottom-line2","bottom-line1"],position:{bottom:0,left:0}},attributionGroup:{children:["Attribution"]}}},{elements:{navigator:{type:"GROUP",groupName:"navigator",direction:"vertical"},interact:{type:"GROUP",groupName:"interact",direction:"horizontal",isResponsive:!0},fullScreenGroup:{type:"GROUP",groupName:"fullScreenGroup",direction:"horizontal"},bottom:{type:"GROUP",groupName:"bottom",direction:"vertical",className:"w-100"},"bottom-line1":{type:"GROUP",groupName:"bottom-line1",direction:"horizontal",className:"d-flex align-items-center justify-content-between w-100 scale-attribution-xy-group",style:{marginBottom:0}},"bottom-line2":{type:"GROUP",groupName:"bottom-line2",direction:"horizontal",className:"d-flex align-items-end justify-content-between w-100",style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"10px"}},attributionGroup:{type:"GROUP",groupName:"attributionGroup",direction:"horizontal",style:{maxWidth:"60%"},className:"attibute-group"},Zoom:{type:"TOOL",toolName:"Zoom",isOnlyExpanded:!0,isShowIconTitle:!1},Home:{type:"TOOL",toolName:"Home",isOnlyExpanded:!0,isShowIconTitle:!1},Compass:{type:"TOOL",toolName:"Compass",isOnlyExpanded:!0,isShowIconTitle:!1},Navigation:{type:"TOOL",toolName:"Navigation",isOnlyExpanded:!0,isShowIconTitle:!1},Locate:{type:"TOOL",toolName:"Locate",isOnlyExpanded:!0,isShowIconTitle:!1},Layers:{type:"TOOL",toolName:"Layers",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"},BaseMap:{type:"TOOL",toolName:"BaseMap",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"},Measure:{type:"TOOL",toolName:"Measure",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"},MapSwitch:{type:"TOOL",toolName:"MapSwitch",isOnlyExpanded:!0,isShowIconTitle:!0},FullScreen:{type:"TOOL",toolName:"FullScreen",isOnlyExpanded:!1,isShowIconTitle:!0},ScaleBar:{type:"TOOL",toolName:"ScaleBar",isOnlyExpanded:!0,isShowIconTitle:!1},Attribution:{type:"TOOL",toolName:"Attribution",isOnlyExpanded:!0,isShowIconTitle:!1,className:"w-100"},Search:{type:"TOOL",toolName:"Search",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"}},layout:{navigator:{children:["Compass","Locate","Navigation","Zoom","Home"]},interact:{children:["Search","Layers","BaseMap","Measure"],position:{top:15,left:15}},fullScreenGroup:{children:["FullScreen"],position:{top:15,right:15}},"bottom-line1":{children:["ScaleBar","attributionGroup"]},"bottom-line2":{children:["MapSwitch","navigator"]},bottom:{children:["bottom-line2","bottom-line1"],position:{bottom:0,left:0}},attributionGroup:{children:["Attribution"]}}}];var ue=[{elements:{mainGroup:{type:"GROUP",groupName:"mainGroup",direction:"vertical",style:{position:"absolute"},className:"d-flex flex-column"},topGroup:{type:"GROUP",groupName:"topGroup",direction:"horizontal",className:"d-flex w-100 align-items-center justify-content-between",style:{padding:"10px"}},midGroup:{type:"GROUP",groupName:"midGroup",direction:"horizontal",className:"flex-grow-1 d-flex w-100 justify-content-between"},"midGroup-left":{type:"GROUP",groupName:"midGroup-left",direction:"vertical",className:"h-100 d-flex flex-column-reverse",style:{paddingLeft:"10px",paddingRight:"10px",paddingBottom:"10px"}},"midGroup-left-content":{type:"GROUP",groupName:"midGroup-left-content",direction:"vertical"},"midGroup-right":{type:"GROUP",groupName:"midGroup-right",direction:"vertical",className:"h-100 d-flex flex-column justify-content-between",style:{paddingRight:"10px",paddingLeft:"10px",paddingBottom:"10px"}},"midGroup-right-content-top":{type:"GROUP",groupName:"midGroup-right-content-top",direction:"vertical"},"midGroup-right-content-bottom":{type:"GROUP",groupName:"midGroup-right-content-bottom",direction:"vertical"},bottomGroup:{type:"GROUP",groupName:"bottomGroup",direction:"vertical"},Search:{type:"TOOL",toolName:"Search",isOnlyExpanded:!0,isShowIconTitle:!1,className:"flex-grow-1"},FullScreen:{type:"TOOL",toolName:"FullScreen",isOnlyExpanded:!1,isShowIconTitle:!0},Locate:{type:"TOOL",toolName:"Locate",isOnlyExpanded:!0,isShowIconTitle:!1},Compass:{type:"TOOL",toolName:"Compass",isOnlyExpanded:!0,isShowIconTitle:!1,className:"mb-0"},MapSwitch:{type:"TOOL",toolName:"MapSwitch",isOnlyExpanded:!0,isShowIconTitle:!0},Zoom:{type:"TOOL",toolName:"Zoom",isOnlyExpanded:!0,isShowIconTitle:!1},Home:{type:"TOOL",toolName:"Home",isOnlyExpanded:!0,isShowIconTitle:!1},Layers:{type:"TOOL",toolName:"Layers",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},BaseMap:{type:"TOOL",toolName:"BaseMap",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},Measure:{type:"TOOL",toolName:"Measure",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"}},layout:{mainGroup:{children:["topGroup","midGroup","bottomGroup"],position:{top:0,left:0,bottom:0,right:0}},topGroup:{children:["Search","FullScreen"]},midGroup:{children:["midGroup-left","midGroup-right"]},"midGroup-left":{children:["midGroup-left-content"]},"midGroup-left-content":{children:["Compass","MapSwitch"]},"midGroup-right":{children:["midGroup-right-content-top","midGroup-right-content-bottom"]},"midGroup-right-content-top":{children:["Layers","BaseMap","Measure"]},"midGroup-right-content-bottom":{children:["Zoom","Home","Locate"]}},mobileResponsiveStrategy:{stage1:["midGroup-left-content","midGroup-right-content-bottom"],stage2:["midGroup-left-content","midGroup-right-content-bottom","midGroup-right-content-top"],stage3:["topGroup","midGroup-left-content","midGroup-right-content-bottom","midGroup-right-content-top"]},lockToolNames:[]}],me=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};const ge=i(170);var Se;!function(e){e.Loading="LOADING",e.Loadok="LOADOK",e.LoadError="LOADERROR"}(Se||(Se={}));class ye extends s.React.PureComponent{constructor(e){super(e),this.highLightHandles={},this.mapBaseViewEventHandles={},this.dsManager=s.DataSourceManager.getInstance(),this.onExtented=null,this.isReceiveExtentChange=!1,this.startRenderMap=()=>{Object(C.loadArcGISJSAPIModules)(["esri/geometry/Extent","esri/Viewpoint"]).then(e=>{[this.Extent,this.Viewpoint]=e,this.setState({isModulesLoaded:!0})})},this.analysisMapView=()=>me(this,void 0,void 0,(function*(){return this.mapView?yield Promise.resolve():this.MapView?(this.initMapView(),yield Promise.resolve()):yield Object(C.loadArcGISJSAPIModules)(["esri/geometry/Geometry","esri/webmap/InitialViewProperties","esri/Basemap","esri/layers/TileLayer","esri/views/MapView","esri/WebMap","esri/portal/Portal","esri/portal/PortalItem"]).then(e=>me(this,void 0,void 0,(function*(){return[this.Geometry,this.InitialViewProperties,this.Basemap,this.TileLayer,this.MapView,this.WebMap,this.Portal,this.PortalItem]=e,this.initMapView(),yield Promise.resolve()})))})),this.analysisSceneView=()=>me(this,void 0,void 0,(function*(){return this.sceneView?yield Promise.resolve():this.SceneView?(this.initSceneView(),yield Promise.resolve()):yield Object(C.loadArcGISJSAPIModules)(["esri/views/SceneView","esri/WebScene","esri/portal/Portal","esri/portal/PortalItem"]).then(e=>me(this,void 0,void 0,(function*(){return[this.SceneView,this.WebScene,this.Portal,this.PortalItem]=e,this.initSceneView(),yield Promise.resolve()})))})),this.generateViewPointFromInitialMapState=e=>"2d"===e.viewType?new this.Viewpoint({targetGeometry:this.Extent.fromJSON(e.extent),rotation:e.rotation}):this.Viewpoint.fromJSON(e.viewPoint),this.cloneMap=e=>{let t=null;const i=e.getDataSourceJson();let o=null;if(i.type===B.DataSourceTypes.WebMap&&(o=this.WebMap),i.type===B.DataSourceTypes.WebScene&&(o=this.WebScene),i.portalUrl){const e=new this.Portal({url:s.portalUrlUtils.getHostUrlByOrgUrl(i.portalUrl)});t=new o({portalItem:new this.PortalItem({id:i.itemId,portal:e})})}else t=new o({portalItem:new this.PortalItem({id:i.itemId})});return t},this.getInitViewPointForDefaultWebMap=()=>{const e=this.props.defaultMapInfo&&this.props.defaultMapInfo.defaultExtent;let t=null;return t=this.props.baseWidgetProps.jimuMapConfig.initialMapState&&this.props.baseWidgetProps.jimuMapConfig.initialMapState.viewPoint?this.generateViewPointFromInitialMapState(this.props.baseWidgetProps.jimuMapConfig.initialMapState):new this.Viewpoint({targetGeometry:new this.Extent({xmin:e&&e.xmin,ymin:e&&e.ymin,xmax:e&&e.xmax,ymax:e&&e.ymax,spatialReference:{wkid:e.spatialReference.wkid}})}),t},this.getDefaultWebMap=()=>{const e=this.props.defaultMapInfo&&this.props.defaultMapInfo.defaultExtent;let t=null;t=new this.Viewpoint({targetGeometry:new this.Extent({xmin:e&&e.xmin,ymin:e&&e.ymin,xmax:e&&e.xmax,ymax:e&&e.ymax,spatialReference:{wkid:e.spatialReference.wkid}})});return new this.WebMap({portalItem:{id:this.props.defaultMapInfo.defaultMapId,portal:{url:Object(s.getAppStore)().getState().portalUrl}},initialViewProperties:new this.InitialViewProperties({spatialReference:e&&e.spatialReference,viewpoint:t})})},this.initMapView=()=>{if(this.extentWatch=null,this.mapView)return;let e;if(this.props.isDefaultMap){e={map:this.getDefaultWebMap(),container:this.mapContainer,viewpoint:this.getInitViewPointForDefaultWebMap(),rotation:this.props.baseWidgetProps.jimuMapConfig.initialMapState&&this.props.baseWidgetProps.jimuMapConfig.initialMapState.rotation}}else{const t=this.cloneMap(this.state.mapDs);e=this.props.baseWidgetProps.jimuMapConfig.initialMapState?{map:t,container:this.mapContainer,viewpoint:this.props.baseWidgetProps.jimuMapConfig.initialMapState&&this.generateViewPointFromInitialMapState(this.props.baseWidgetProps.jimuMapConfig.initialMapState)}:{map:t,container:this.mapContainer}}this.mapView=new this.MapView(e),this.mapView.popup.spinnerEnabled=!1;this.mapView.ui.exbMapTools={},C.MapViewManager.getInstance().createJimuMapView({mapWidgetId:this.props.baseWidgetProps.id,dataSourceId:this.props.dataSourceId,view:this.mapView}).then(()=>{this.setState({mapLoadStatus:Se.Loadok},()=>{this.props.onMapLoaded(this.props.dataSourceId,Se.Loadok)});const e=`${this.props.baseWidgetProps.id}-${this.props.dataSourceId}`,t=C.MapViewManager.getInstance().getJimuMapViewById(e);t&&(this.props.onJimuMapViewCreated(t),this.setState({mapBaseJimuMapView:t})),this.extentWatch||(this.extentWatch=this.mapView.watch("extent",e=>{e&&(clearTimeout(this.onExtented),this.onExtented=setTimeout(()=>{if(e)if(this.isReceiveExtentChange)this.isReceiveExtentChange=!1;else{const t=new s.ExtentChangeMessage(this.props.baseWidgetProps.id,e);t.addRelatedWidgetId(this.props.baseWidgetProps.id),this.props.onExtentChanged(this.props.dataSourceId,t)}},200))})),setTimeout(()=>{this.goHome(!1).then(()=>{const e=new s.ExtentChangeMessage(this.props.baseWidgetProps.id,this.mapView.extent);e.addRelatedWidgetId(this.props.baseWidgetProps.id),this.props.onExtentChanged(this.props.dataSourceId,e),this.props.onViewChanged&&this.props.onViewChanged({dataSourceId:this.props.dataSourceId,viewpoint:this.mapView.viewpoint.clone()})})},500)}),this.bindMapBaseViewEvent(this.mapView)},this.initSceneView=()=>{if(this.extentWatch=null,this.sceneView)return;const e=this.cloneMap(this.state.mapDs);let t;t=this.props.baseWidgetProps.jimuMapConfig.initialMapState?{map:e,container:this.mapContainer,qualityProfile:"low",viewpoint:this.props.baseWidgetProps.jimuMapConfig.initialMapState&&this.generateViewPointFromInitialMapState(this.props.baseWidgetProps.jimuMapConfig.initialMapState)}:{map:e,container:this.mapContainer,qualityProfile:"low"},this.sceneView=new this.SceneView(t),this.sceneView.popup.spinnerEnabled=!1;this.sceneView.ui.exbMapTools={},C.MapViewManager.getInstance().createJimuMapView({mapWidgetId:this.props.baseWidgetProps.id,dataSourceId:this.props.dataSourceId,view:this.sceneView}),this.sceneView.when(()=>{this.setState({mapLoadStatus:Se.Loadok},()=>{this.props.onMapLoaded(this.props.dataSourceId,Se.Loadok)});const e=`${this.props.baseWidgetProps.id}-${this.props.dataSourceId}`,t=C.MapViewManager.getInstance().getJimuMapViewById(e);t&&(this.props.onJimuMapViewCreated(t),this.setState({mapBaseJimuMapView:t})),this.extentWatch||(this.extentWatch=this.sceneView.watch("extent",e=>{e&&(clearTimeout(this.onExtented),this.onExtented=setTimeout(()=>{if(e)if(this.isReceiveExtentChange)this.isReceiveExtentChange=!1;else{const t=new s.ExtentChangeMessage(this.props.baseWidgetProps.id,e);t.addRelatedWidgetId(this.props.baseWidgetProps.id),this.props.onExtentChanged(this.props.dataSourceId,t)}},200))})),setTimeout(()=>{this.goHome(!1).then(()=>{const e=new s.ExtentChangeMessage(this.props.baseWidgetProps.id,this.sceneView.extent);e.addRelatedWidgetId(this.props.baseWidgetProps.id),this.props.onExtentChanged(this.props.dataSourceId,e),this.props.onViewChanged&&this.props.onViewChanged({dataSourceId:this.props.dataSourceId,viewpoint:this.sceneView.viewpoint.clone()})})},500)}),this.bindMapBaseViewEvent(this.sceneView)},this.updateMapView=e=>{e.disablePopUp?(this.mapView.popup.close(),this.mapView.popup.autoOpenEnabled=!1):this.mapView.popup.autoOpenEnabled=!0,this.mapView.ui&&(this.mapView.ui.components=[])},this.updateSceneView=e=>{e.disablePopUp?(this.sceneView.popup.close(),this.sceneView.popup.autoOpenEnabled=!1):this.sceneView.popup.autoOpenEnabled=!0,this.sceneView.ui&&(this.sceneView.ui.components=[])},this.bindMapBaseViewEvent=e=>{e&&(this.mapBaseViewEventHandles["mouse-wheel"]&&(this.mapBaseViewEventHandles["mouse-wheel"].remove(),this.mapBaseViewEventHandles["mouse-wheel"]=null),this.mapBaseViewEventHandles["mouse-wheel"]=e.on("mouse-wheel",t=>{if(this.props.baseWidgetProps.jimuMapConfig.disableScroll)return t.stopPropagation(),void this.handleDisableWheel();this.props.onViewChanged&&this.props.onViewChanged({dataSourceId:this.props.dataSourceId,viewpoint:e.viewpoint.clone()})}),this.mapBaseViewEventHandles.drag&&(this.mapBaseViewEventHandles.drag.remove(),this.mapBaseViewEventHandles.drag=null),this.mapBaseViewEventHandles.drag=e.on("drag",()=>{this.props.onViewChanged&&this.props.onViewChanged({dataSourceId:this.props.dataSourceId,viewpoint:e.viewpoint.clone()})}),this.mapBaseViewEventHandles.click&&(this.mapBaseViewEventHandles.click.remove(),this.mapBaseViewEventHandles.click=null),this.mapBaseViewEventHandles.click=e.on("click",()=>{for(const e in this.highLightHandles)this.highLightHandles[e].remove()}))},this.getMapDsId=()=>this.state.mapDs&&this.state.mapDs.id,this.onDataSourceCreated=e=>{this.setState({mapDs:e,preMapDs:this.state.mapDs})},this.onCreateDataSourceFailed=e=>{console.warn(e),this.setState({mapLoadStatus:Se.LoadError,mapDs:null,preMapDs:this.state.mapDs},()=>{this.props.onMapLoaded(this.props.dataSourceId,Se.LoadError),C.MapViewManager.getInstance().createJimuMapView({mapWidgetId:this.props.baseWidgetProps.id,dataSourceId:this.props.dataSourceId,view:null})})},this.setViewPoint=e=>{e&&this.state.mapDs&&(this.state.mapDs.type===B.DataSourceTypes.WebMap&&this.mapView&&(this.mapView.viewpoint=e),this.state.mapDs.type===B.DataSourceTypes.WebScene&&this.sceneView&&(this.sceneView.viewpoint=e))},this.getMapLoadStatus=()=>this.state.mapLoadStatus,this.getViewPoint=()=>this.state.mapDs?this.state.mapDs.type===B.DataSourceTypes.WebMap?this.mapView&&this.mapView.viewpoint?this.mapView.viewpoint.clone():null:this.state.mapDs.type===B.DataSourceTypes.WebScene?this.sceneView&&this.sceneView.viewpoint?(this.sceneView.goTo(this.sceneView.viewpoint.camera,{animate:!1}),this.sceneView.viewpoint.clone()):null:void 0:null,this.getViewType=()=>this.state.mapDs&&this.state.mapDs.type,this.goToTilt=e=>{this.sceneView&&this.sceneView.goTo({tilt:e})},this.goHome=e=>me(this,void 0,void 0,(function*(){if(!this.state.mapDs)return yield Promise.resolve();const t=this.getMapBaseInitViewPoint();return this.state.mapDs.type===B.DataSourceTypes.WebMap&&this.mapView?this.mapView.goTo(t,{animate:e}):this.state.mapDs.type===B.DataSourceTypes.WebScene&&this.sceneView?this.sceneView.goTo(t,{animate:e}):yield Promise.resolve()})),this.getMapBaseInitViewPoint=()=>{var e,t,i;return this.props.isDefaultMap?this.getInitViewPointForDefaultWebMap():this.props.baseWidgetProps.jimuMapConfig.initialMapState?this.generateViewPointFromInitialMapState(this.props.baseWidgetProps.jimuMapConfig.initialMapState):null===(i=null===(t=null===(e=this.state.mapDs.map)||void 0===e?void 0:e.initialViewProperties)||void 0===t?void 0:t.viewpoint)||void 0===i?void 0:i.clone()},this.formatMessage=e=>this.props.baseWidgetProps.intl.formatMessage({id:e,defaultMessage:c.defaultMessages[e]}),this.handleDisableWheel=()=>{this.widgetContainer.style.pointerEvents="none",setTimeout(()=>{this.widgetContainer.style.pointerEvents="auto"},50)},this.getLayoutConfig=()=>"xsmall"===this.state.widthBreakpoint?ue[0]:this.props.baseWidgetProps.jimuMapConfig.layoutIndex?he[this.props.baseWidgetProps.jimuMapConfig.layoutIndex]:he[0],this.onResize=(e,t)=>{e&&t&&(e<=545&&e>0?this.setState({widthBreakpoint:"xsmall",widgetHeight:t}):this.setState({widthBreakpoint:"other",widgetHeight:t}))},this.getMapSwitchForErrorMap=()=>s.React.createElement(z.Consumer,null,({isShowMapSwitchBtn:e,dataSourceIds:t,activeDataSourceId:i,switchMap:o})=>s.React.createElement("div",{className:"mapswitch-container",style:{display:e?"block":"none",marginBottom:"xsmall"===this.state.widthBreakpoint?10:0}},s.React.createElement("div",{onClick:e=>{e.preventDefault(),o()},className:"jimu-widget esri-widget--button"},s.React.createElement(c.Icon,{icon:ge,width:16,height:16,className:"mapswitch-icon"})))),this.state={mapLoadStatus:Se.Loading,widthBreakpoint:null,mapBaseJimuMapView:null,dataSourceId:null,widgetHeight:null}}componentDidMount(){0===this.widgetContainer.getElementsByClassName("widget-map").length&&(this.mapContainer||(this.mapContainer=document&&document.createElement("div"),this.mapContainer.className="jimu-widget widget-map"),this.widgetContainer.appendChild(this.mapContainer)),!this.props.startLoadModules||this.state.isModulesLoaded?(this.getMapDsId()||this.props.isDefaultMap)&&(this.state.mapDs||this.props.isDefaultMap)&&(this.props.isDefaultMap?this.analysisMapView().then(()=>{this.updateMapView(this.props.baseWidgetProps.jimuMapConfig)}):(this.state.mapDs.type===B.DataSourceTypes.WebMap&&this.analysisMapView().then(()=>{this.updateMapView(this.props.baseWidgetProps.jimuMapConfig)}),this.state.mapDs.type===B.DataSourceTypes.WebScene&&this.analysisSceneView().then(()=>{this.updateSceneView(this.props.baseWidgetProps.jimuMapConfig)}))):this.startRenderMap()}componentDidUpdate(){if(!this.state.isModulesLoaded)return;const e=this.getMapDsId(),t=this.state.preMapDs&&this.state.preMapDs.id,i=this.state.mapDs&&this.state.mapDs.getDataSourceJson().itemId,s=this.state.preMapDs&&this.state.preMapDs.getDataSourceJson().itemId;if(e!==t||i!==s){this.mapView=null,this.sceneView=null;const e=this.state.preMapDs&&`${this.props.baseWidgetProps.id}-${this.state.preMapDs.id}`;if(e&&C.MapViewManager.getInstance().destroyJimuMapView(e),this.state.mapLoadStatus===Se.LoadError&&!this.state.mapDs)return void this.setState({preMapDs:this.state.mapDs});this.setState({preMapDs:this.state.mapDs,mapLoadStatus:Se.Loading})}this.props.isDefaultMap&&(this.sceneView=null,this.analysisMapView().then(()=>{this.updateMapView(this.props.baseWidgetProps.jimuMapConfig)})),this.state.mapDs&&(this.state.mapDs.type===B.DataSourceTypes.WebMap&&(this.sceneView=null,this.analysisMapView().then(()=>{this.updateMapView(this.props.baseWidgetProps.jimuMapConfig)})),this.state.mapDs.type===B.DataSourceTypes.WebScene&&(this.mapView=null,this.analysisSceneView().then(()=>{this.updateSceneView(this.props.baseWidgetProps.jimuMapConfig)})))}static getDerivedStateFromProps(e,t){return e.dataSourceId!==t.dataSourceId?{dataSourceId:e.dataSourceId,mapLoadStatus:Se.Loading}:null}componentWillUnmount(){this.props.onViewChanged&&this.props.onViewChanged({dataSourceId:this.props.dataSourceId,viewpoint:null});const e=`${this.props.baseWidgetProps.id}-${this.props.dataSourceId}`;C.MapViewManager.getInstance().destroyJimuMapView(e),this.mapView&&!this.mapView.destroyed&&(this.mapView.container=null,this.mapView=null),this.sceneView&&!this.sceneView.destroyed&&(this.sceneView.container=null,this.sceneView=null),this.highLightHandles={},this.extentWatch=null}render(){let e=null;if(this.props.baseWidgetProps.useDataSources)for(let t=0;t<this.props.baseWidgetProps.useDataSources.length;t++)this.props.baseWidgetProps.useDataSources[t].dataSourceId==this.props.dataSourceId&&(e=this.props.baseWidgetProps.useDataSources[t]);return s.React.createElement("div",{className:"jimu-widget",style:{position:"relative"},ref:e=>{this.widgetContainer=e}},this.state.mapLoadStatus===Se.Loading&&s.React.createElement("div",{className:"jimu-widget widget-map-background"},s.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})),this.state.mapLoadStatus===Se.LoadError&&s.React.createElement("div",{className:"jimu-widget widget-map-background"},this.getMapSwitchForErrorMap(),s.React.createElement("div",{className:"jimu-widget d-flex justify-content-center align-items-center"},"map failed")),this.state.mapBaseJimuMapView&&this.state.widthBreakpoint&&s.React.createElement(de,{isMobile:"xsmall"===this.state.widthBreakpoint,jimuMapView:this.state.mapBaseJimuMapView,appMode:this.props.baseWidgetProps.appMode,intl:this.props.baseWidgetProps.intl,layoutConfig:this.getLayoutConfig(),toolConfig:this.props.baseWidgetProps.jimuMapConfig.toolConifg?this.props.baseWidgetProps.jimuMapConfig.toolConifg:{},widgetHeight:"xsmall"===this.state.widthBreakpoint?null:this.state.widgetHeight}),!this.props.isDefaultMap&&s.React.createElement("div",{style:{position:"absolute",display:"none"}},s.React.createElement(s.DataSourceComponent,{useDataSource:e,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:this.onCreateDataSourceFailed})),s.React.createElement(s.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.onResize}))}}var we=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};const be={firstMapVisible:[{zIndex:6,opacity:1},{zIndex:5,opacity:0}],secondMapVisible:[{zIndex:5,opacity:0},{zIndex:6,opacity:1}]};class ve extends s.React.PureComponent{constructor(e){super(e),this.mutableStatePropsMap={},this.reInitWidgetInstance=e=>{this.state=e,this.isReIniting=!0},this.changeInitialMapDataSourceID=(e,t)=>{if(this.props.baseWidgetProps.useDataSources.length>1){const i=this.refs.firstMapInstance,s=this.refs.secondMapInstance;this.state.currentMapIndex?this.state.firstMapDsId&&this.state.firstMapDsId===e?(this.startChangeInitialMapAnimation(t),i.goHome(!1)):s.goHome(!1):this.state.secondMapDsId&&this.state.secondMapDsId===e?(this.startChangeInitialMapAnimation(t),s.goHome(!1)):i.goHome(!1)}},this.startChangeInitialMapAnimation=e=>{const t=Object.assign({},this.state),i=this.refs.firstMapInstance,s=this.refs.secondMapInstance;if(this.state.currentMapIndex){t.currentMapIndex=0,t.multiMapStyle=be.firstMapVisible;const o=s&&s.getViewPoint&&s.getViewPoint();o&&i&&i.setViewPoint&&i.setViewPoint(o),this.setState(t,()=>{e()})}else{t.currentMapIndex=1,t.multiMapStyle=be.secondMapVisible;const o=i&&i.getViewPoint&&i.getViewPoint();o&&s&&s.setViewPoint&&s.setViewPoint(o),this.setState(t,()=>{e()})}},this.switchMap=()=>we(this,void 0,void 0,(function*(){if(!this.props.baseWidgetProps.useDataSources||this.props.baseWidgetProps.useDataSources.length<2)return yield Promise.resolve();const e=Object.assign({},this.state);e.useAnimation=!0;const t=this.refs.firstMapInstance,i=this.refs.secondMapInstance;if(this.state.currentMapIndex){e.currentMapIndex=0,e.multiMapStyle=be.firstMapVisible;const s=i&&i.getViewPoint&&i.getViewPoint();s&&t&&t.setViewPoint&&t.setViewPoint(s)}else{e.currentMapIndex=1,e.multiMapStyle=be.secondMapVisible;const s=t&&t.getViewPoint&&t.getViewPoint();s&&i&&i.setViewPoint&&i.setViewPoint(s)}if(t&&i){const e=t.getViewType(),s=i.getViewType();e&&s&&e!==s&&(t.goToTilt(0),i.goToTilt(0),this.state.currentMapIndex?setTimeout(()=>{t.goToTilt(45)},300):setTimeout(()=>{i.goToTilt(45)},300))}return new Promise((t,i)=>{this.setState(e,()=>{this.confirmJimuMapViewIsActive(),setTimeout(()=>{this.setState({useAnimation:!1},()=>t(null))},500)})})})),this.handleMutableStatePropsChanged=(e,t,i)=>{},this.handleViewChanged=e=>{if(null===e.viewpoint){const e=this.refs.firstMapInstance,t=this.refs.secondMapInstance;return e&&e.goHome(!1),void(t&&t.goHome(!1))}const t=this.getCurrentVisibleDsId();if(t===e.dataSourceId){if(this.state.firstMapDsId&&this.state.firstMapDsId!==t){const t=this.refs.firstMapInstance;t&&t.setViewPoint(e.viewpoint)}if(this.state.secondMapDsId&&this.state.secondMapDsId!==t){const t=this.refs.secondMapInstance;t&&t.setViewPoint(e.viewpoint)}this.props.onViewPointChanged&&this.props.onViewPointChanged(e.viewpoint)}},this.handleExtentChanged=(e,t)=>{this.getCurrentVisibleDsId()===e&&(s.MessageManager.getInstance().publishMessage(t),this.props.onExtentChanged&&this.props.onExtentChanged(t.extent))},this.handleMapLoaded=(e,t)=>{this.forceUpdate()},this.handleJimuMapViewCreated=e=>{this.props.onJimuMapViewCreated&&this.props.onJimuMapViewCreated(e),this.confirmJimuMapViewIsActive()},this.confirmJimuMapViewIsActive=()=>{if(this.props.isDefaultMap){const e=this.props.baseWidgetProps.id+"-null",t=C.MapViewManager.getInstance().getJimuMapViewById(e);return void(t&&this.setActiveJimuMapView(t,!0))}const e=[];this.state.firstMapDsId&&e.push(this.state.firstMapDsId),this.state.secondMapDsId&&e.push(this.state.secondMapDsId);const t=this.getCurrentVisibleDsId();for(let i=0;i<e.length;i++){const s=`${this.props.baseWidgetProps.id}-${e[i]}`,o=C.MapViewManager.getInstance().getJimuMapViewById(s);o&&(e[i]===t?this.setActiveJimuMapView(o,!0):this.setActiveJimuMapView(o,!1))}},this.isShowMapSwitchBtn=()=>{const e=this.refs.firstMapInstance,t=this.refs.secondMapInstance;return!(!e||!t)&&(e.getMapLoadStatus()!==Se.Loading&&t.getMapLoadStatus()!==Se.Loading||void 0)},this.getCurrentVisibleDsId=()=>1===this.state.multiMapStyle[0].opacity?this.state.firstMapDsId:this.state.secondMapDsId,this.handleViewGroupCreate=e=>{this.props.onViewGroupCreate&&this.props.onViewGroupCreate(e)},this.state={currentMapIndex:0,multiMapStyle:be.firstMapVisible,firstMapDsId:null,secondMapDsId:null,useAnimation:!1,useDataSources:null,currentJimuMapView:null},this.mutableStatePropsMap={},this.useMapWidgetIds=this.props.baseWidgetProps.id?Object(s.Immutable)([this.props.baseWidgetProps.id]):Object(s.Immutable)([])}componentDidMount(){if(!this.isReIniting&&this.props.baseWidgetProps.useDataSources){const e=this.props.baseWidgetProps.jimuMapConfig.initialMapDataSourceID;e?e===(this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId)?this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId}):e===(this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId)?this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId}):this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId}):this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId})}}static getDerivedStateFromProps(e,t){if(e.baseWidgetProps.useDataSources!==t.useDataSources){return ve.getChangedState(t.firstMapDsId,t.secondMapDsId,e.baseWidgetProps.useDataSources)}return null}componentDidUpdate(e,t,i){this.isReIniting?this.isReIniting=!1:(this.props.baseWidgetProps.jimuMapConfig.initialMapDataSourceID!==e.baseWidgetProps.jimuMapConfig.initialMapDataSourceID&&this.changeInitialMapDataSourceID(this.props.baseWidgetProps.jimuMapConfig.initialMapDataSourceID,this.confirmJimuMapViewIsActive),this.props.baseWidgetProps.useDataSources!==e.baseWidgetProps.useDataSources&&this.confirmJimuMapViewIsActive())}setActiveJimuMapView(e,t){e.isActive!==t&&(t?(e.setIsActive(t),this.setState({currentJimuMapView:e}),this.props.onActiveViewChange&&this.props.onActiveViewChange(e)):e.setIsActive(t))}render(){return s.React.createElement(z.Provider,{value:{isShowMapSwitchBtn:this.props.baseWidgetProps.useDataSources&&this.props.baseWidgetProps.useDataSources.length>1&&this.isShowMapSwitchBtn(),dataSourceIds:[this.state.firstMapDsId,this.state.secondMapDsId],activeDataSourceId:this.getCurrentVisibleDsId(),switchMap:this.switchMap,fullScreenMap:this.props.fullScreenMap,initialMapState:this.props.baseWidgetProps.jimuMapConfig&&this.props.baseWidgetProps.jimuMapConfig.initialMapState,mapComponentId:this.props.baseWidgetProps.id}},!this.props.isDefaultMap&&s.React.createElement("div",{className:"jimu-widget",style:{position:"relative"}},s.React.createElement("div",{className:Object(s.classNames)("jimu-widget",{"multisourcemap-item-appear":this.state.useAnimation&&this.state.multiMapStyle[0].opacity,"multisourcemap-item-disappear":this.state.useAnimation&&!this.state.multiMapStyle[0].opacity,"multisourcemap-item-appear-noanimate":this.state.multiMapStyle[0].opacity,"multisourcemap-item-disappear-noanimate":!this.state.multiMapStyle[0].opacity}),style:{position:"absolute",zIndex:this.state.multiMapStyle[0].zIndex}},this.state.firstMapDsId&&s.React.createElement(ye,{ref:"firstMapInstance",onViewChanged:this.handleViewChanged,baseWidgetProps:this.props.baseWidgetProps,onMapLoaded:this.handleMapLoaded,onMutableStatePropsChanged:this.handleMutableStatePropsChanged,onExtentChanged:(e,t)=>{this.handleExtentChanged(e,t)},onJimuMapViewCreated:this.handleJimuMapViewCreated,startLoadModules:this.props.startLoadModules,dataSourceId:this.state.firstMapDsId})),s.React.createElement("div",{className:Object(s.classNames)("jimu-widget",{"multisourcemap-item-appear":this.state.useAnimation&&this.state.multiMapStyle[1].opacity,"multisourcemap-item-disappear":this.state.useAnimation&&!this.state.multiMapStyle[1].opacity,"multisourcemap-item-appear-noanimate":this.state.multiMapStyle[1].opacity,"multisourcemap-item-disappear-noanimate":!this.state.multiMapStyle[1].opacity}),style:{position:"absolute",zIndex:this.state.multiMapStyle[1].zIndex}},this.state.secondMapDsId&&s.React.createElement(ye,{ref:"secondMapInstance",onViewChanged:this.handleViewChanged,baseWidgetProps:this.props.baseWidgetProps,onMapLoaded:this.handleMapLoaded,onMutableStatePropsChanged:this.handleMutableStatePropsChanged,onExtentChanged:(e,t)=>{this.handleExtentChanged(e,t)},onJimuMapViewCreated:this.handleJimuMapViewCreated,startLoadModules:this.props.startLoadModules,dataSourceId:this.state.secondMapDsId}))),this.props.isDefaultMap&&s.React.createElement("div",{className:"jimu-widget",style:{position:"relative"}},s.React.createElement("div",{className:Object(s.classNames)("jimu-widget multisourcemap-item-appear-noanimate"),style:{position:"absolute",zIndex:6}},s.React.createElement(ye,{ref:"firstMapInstance",isDefaultMap:this.props.isDefaultMap,onViewChanged:this.handleViewChanged,baseWidgetProps:this.props.baseWidgetProps,onMapLoaded:this.handleMapLoaded,onMutableStatePropsChanged:this.handleMutableStatePropsChanged,dataSourceId:null,onExtentChanged:(e,t)=>{this.handleExtentChanged(e,t)},onJimuMapViewCreated:this.handleJimuMapViewCreated,startLoadModules:this.props.startLoadModules,defaultMapInfo:this.props.defaultMapInfo}))),s.React.createElement(C.JimuMapViewComponent,{useMapWidgetId:this.useMapWidgetIds[0],onViewGroupCreate:this.handleViewGroupCreate}))}}ve.getChangedState=(e,t,i)=>{const s={};if(i&&i[0]){const o=[],a=[];for(let t=0;t<i.length;t++)e!==i[t].dataSourceId?o.push(i[t].dataSourceId):a.push(i[t].dataSourceId);a.length>0?(s.firstMapDsId=e,s.secondMapDsId=o[0]):0===a.length&&(o.includes(t)?(o.splice(o.indexOf(t),1),s.firstMapDsId=o[0],s.secondMapDsId=t):(s.firstMapDsId=o[0],s.secondMapDsId=o[1]))}else s.firstMapDsId=null,s.secondMapDsId=null;return s.firstMapDsId!==e?s.firstMapDsId?(s.multiMapStyle=be.firstMapVisible,s.currentMapIndex=0):s.secondMapDsId?(s.multiMapStyle=be.secondMapVisible,s.currentMapIndex=1):(s.multiMapStyle=be.firstMapVisible,s.currentMapIndex=0):s.secondMapDsId?s.secondMapDsId!==t&&(s.multiMapStyle=be.secondMapVisible,s.currentMapIndex=1):(s.multiMapStyle=be.firstMapVisible,s.currentMapIndex=0),s};function Ie(e){return!window.jimuConfig.isInBuilder||e!==s.AppMode.Design}class Me extends s.React.PureComponent{constructor(e){super(e),this.handleJimuMapViewCreated=e=>{this.props.onJimuMapViewCreated&&this.props.onJimuMapViewCreated(e)},this.state={defaultMapInfo:null}}componentDidMount(){C.portalUtils.getDefaultWebMap(Object(s.getAppStore)().getState().portalUrl).then(e=>{this.setState({defaultMapInfo:e})})}render(){return s.React.createElement("div",{className:"w-100 h-100"},!this.state.defaultMapInfo&&s.React.createElement("div",{className:"widget-map jimu-widget"},s.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})),this.state.defaultMapInfo&&s.React.createElement("div",{className:Object(s.classNames)("jimu-widget",{"map-is-design-mode":!Ie(this.props.baseWidgetProps.appMode)})},s.React.createElement(ve,{key:0,fullScreenMap:this.props.fullScreenMap,baseWidgetProps:this.props.baseWidgetProps,startLoadModules:this.props.startLoadModules,isDefaultMap:!0,onViewPointChanged:this.props.onViewPointChanged,onExtentChanged:this.props.onExtentChanged,ref:this.props.setMultiSourceMapInstance,onViewGroupCreate:this.props.onViewGroupCreate,onActiveViewChange:this.props.onActiveViewChange,defaultMapInfo:this.state.defaultMapInfo,onJimuMapViewCreated:this.handleJimuMapViewCreated})))}}var fe=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};class xe extends s.React.PureComponent{constructor(e){super(e),this.multiSourceMapInstance=null,this.startRenderMap=()=>{setTimeout(()=>{this.setState({startLoadModules:!0})},100)},this.getPlaceHolderImage=()=>{let e=this.props.jimuMapConfig.placeholderImage;if(e){const t=new RegExp("^(.)+/sharing/rest/content/items/(.)+/info/(.)+"),i=s.SessionManager.getInstance().getMainSession();t.test(e)&&(e=i?e+"?token="+(null==i?void 0:i.token):e)}return e},this.fullScreenMap=()=>{if(s.utils.isTouchDevice())if("fixed"===this.container.style.position)this.container.style.height=this.containerClientRect.height+"px",this.container.style.width=this.containerClientRect.width+"px",this.container.style.top=this.containerClientRect.top+"px",this.container.style.left=this.containerClientRect.left+"px",setTimeout(()=>{this.container.style.transition=null,this.container.style.position="relative",this.container.style.zIndex="0",this.container.style.height="100%",this.container.style.width="100%",this.container.style.top="0",this.container.style.left="0",this.container.style.backgroundColor="none",this.parentContainer.appendChild(this.container)},100);else{const e=this.container.getBoundingClientRect();this.containerClientRect=e,this.container.style.height=e.height+"px",this.container.style.width=e.width+"px",this.container.style.position="fixed",this.container.style.top=e.top+"px",this.container.style.left=e.left+"px",c.MobilePanelManager.getInstance().checkDomIsContained(this.container)?this.container.style.zIndex="502":this.container.style.zIndex="105",document&&document.body.appendChild(this.container),setTimeout(()=>{this.container.style.transition="top 0.3s, bottom 0.3s, left 0.3s, right 0.3s, height 0.3s, width 0.3s",this.container.style.top="0px",this.container.style.left="0px",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.height=null,this.container.style.width=null,this.container.style.backgroundColor="#fff"},100)}else{const e=this.container;if(!document)return;document.fullscreenElement===e&&document.exitFullscreen();const t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if(void 0!==window.ActiveXObject){const e=new ActiveXObject("WScript.Shell");null!==e&&e.SendKeys("{F11}")}}},this.handleViewGroupCreate=e=>{e&&e.setMapWidgetInstance(this),this.props.onViewGroupCreate&&this.props.onViewGroupCreate(e)},this.handleJimuMapViewCreated=e=>{this.props.onJimuMapViewCreated&&this.props.onJimuMapViewCreated(e)},this.switchMap=()=>fe(this,void 0,void 0,(function*(){return this.multiSourceMapInstance?yield this.multiSourceMapInstance.switchMap():yield Promise.resolve()})),this.setMultiSourceMapInstance=e=>{this.multiSourceMapInstance=e},this.state={}}componentDidMount(){this.state.startLoadModules||!window.jimuConfig.isInBuilder&&this.props.jimuMapConfig.canPlaceHolder||this.startRenderMap()}render(){return this.state.startLoadModules?this.props.useDataSources&&this.props.useDataSources[0]&&this.props.useDataSources[0].dataSourceId?s.React.createElement("div",{className:"jimu-widget",ref:e=>{this.parentContainer=e}},s.React.createElement("div",{className:Object(s.classNames)(this.props.className,"jimu-widget"),ref:e=>{this.container=e}},s.React.createElement("div",{className:Object(s.classNames)("jimu-widget",{"map-is-design-mode":!Ie(this.props.appMode)})},s.React.createElement(ve,{fullScreenMap:this.fullScreenMap,baseWidgetProps:this.props,startLoadModules:this.state.startLoadModules,onViewPointChanged:this.props.onViewPointChanged,onExtentChanged:this.props.onExtentChanged,onActiveViewChange:this.props.onActiveViewChange,onViewGroupCreate:this.handleViewGroupCreate,ref:this.setMultiSourceMapInstance,onJimuMapViewCreated:this.handleJimuMapViewCreated})))):s.React.createElement("div",{className:"jimu-widget",ref:e=>{this.parentContainer=e}},s.React.createElement("div",{className:Object(s.classNames)(this.props.className,"jimu-widget"),ref:e=>{this.container=e}},s.React.createElement("div",{className:Object(s.classNames)("jimu-widget",{"map-is-design-mode":!Ie(this.props.appMode)})},s.React.createElement(Me,{fullScreenMap:this.fullScreenMap,baseWidgetProps:this.props,startLoadModules:this.state.startLoadModules,isDefaultMap:!0,setMultiSourceMapInstance:this.setMultiSourceMapInstance,onViewPointChanged:this.props.onViewPointChanged,onExtentChanged:this.props.onExtentChanged,onActiveViewChange:this.props.onActiveViewChange,onViewGroupCreate:this.handleViewGroupCreate,onJimuMapViewCreated:this.handleJimuMapViewCreated})))):s.React.createElement("div",{className:Object(s.classNames)(this.props.className,"jimu-widget")},s.React.createElement("div",{className:"widget-map jimu-widget"},s.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})))}}const je=s.ReactRedux.connect(e=>window.jimuConfig.isBuilder?{appMode:s.AppMode.Run}:{appMode:e&&e.appRuntimeInfo&&e.appRuntimeInfo.appMode})(Object(s.injectIntl)(xe));s.themeUtils.withStyles(je,"JimuMap");class ke extends s.React.PureComponent{constructor(e){super(e),this.symbolUtils=null,this.renderPreviewHTMLPromise=null,this.onHandleSymbolClick=()=>{this.props.onSymbolSelected&&(this.props.isActive?this.props.onSymbolSelected(null,null):this.props.onSymbolSelected(this.props.index,this.props.symbol))},this.state={apiLoaded:!1}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/symbols/support/symbolUtils"]).then(e=>{[this.symbolUtils]=e,this.setState({apiLoaded:!0})})}componentDidUpdate(e,t){var i,o;this.state.apiLoaded&&(this.renderPreviewHTMLPromise&&s.lodash.isDeepEqual(null===(i=e.symbol)||void 0===i?void 0:i.toJSON(),null===(o=this.props.symbol)||void 0===o?void 0:o.toJSON())||(this.container.innerHTML&&(this.container.innerHTML=""),this.renderPreviewHTMLPromise=this.symbolUtils.renderPreviewHTML(this.props.symbol,{node:this.container})))}render(){return s.React.createElement("div",{className:Object(s.classNames)("w-100 h-100 justify-content-center d-flex align-items-center symbol-item",{"symbol-item-active":this.props.isActive}),ref:e=>{this.container=e},onClick:this.onHandleSymbolClick})}}class Te extends s.React.PureComponent{constructor(e){super(e)}render(){return s.React.createElement("div",{className:"w-100 d-flex mt-2 mb-3"},s.React.createElement("div",{className:"justify-content-start d-flex align-items-center mr-4 pl-2"},this.props.intl.formatMessage({id:"drawToolPreview",defaultMessage:c.defaultMessages.drawToolPreview})),s.React.createElement("div",{className:"justify-content-center d-flex mt-1 mb-1 ml-3"},s.React.createElement("div",null,s.React.createElement(ke,{symbol:this.props.symbol,isUsedForPreview:!0}))))}}var Ne=i(17),Be=i(28);class Ce extends s.React.PureComponent{constructor(e){super(e),this.onHandleChange=e=>{null==e||""===e||e<this.props.min?this.setState({value:this.props.min}):e>this.props.max?this.setState({value:this.props.max}):this.setState({value:e})},this.onTriggerChange=()=>{this.props.value!==this.state.value&&this.props.onChange(this.state.value)},this.state={value:this.props.value}}componentDidUpdate(e){this.props.value!==e.value&&this.setState({value:this.props.value})}render(){return s.React.createElement(c.NumericInput,{size:this.props.size,onPressEnter:this.onTriggerChange,onBlur:this.onTriggerChange,value:this.state.value,min:this.props.min,max:this.props.max,style:this.props.style,onChange:this.onHandleChange})}}var De=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};class Le extends s.React.PureComponent{constructor(e){super(e),this.jsonUtils=null,this.Portal=null,this.portal=null,this.portalUrl=null,this.allPointSymbolList={},this.setInitialPointSymbolList=e=>{if(e){const t="Basic";let i=!1;for(let s=0;s<e.length;s++)if(e[s].title===t){this.fetchPointSymbolListByItemId(e[s].id),i=!0;break}!i&&e&&e.length>0&&this.fetchPointSymbolListByItemId(e[0].id)}},this.handleSymbolSelected=(e,t)=>{this.setState({symbolSelectedInfo:{listItemId:this.state.currentPointSymbolListItemId,symbolIdx:e}}),this.props.onSymbolChanged(t)},this._isSymbolItemSelected=e=>{const t=this.state.currentPointSymbolListItemId===this.state.symbolSelectedInfo.listItemId,i=e===this.state.symbolSelectedInfo.symbolIdx;return t&&i},this.renderPointSymbolList=()=>{var e;return this.jsonUtils?this.state.isLoading?s.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"}):null===(e=this.state.pointSymbolList)||void 0===e?void 0:e.map((e,t)=>{const i=this.jsonUtils.fromJSON(e);return s.React.createElement("div",{key:t,className:"mr-2 mt-2",style:{width:"35px",height:"35px",float:"left"}},s.React.createElement(ke,{index:t,symbol:i,isActive:this._isSymbolItemSelected(t),onSymbolSelected:this.handleSymbolSelected}))}):null},this.fetchSymbolSetInfos=()=>De(this,void 0,void 0,(function*(){return this.state.symbolSetInfos&&this.state.symbolSetInfos.length>0?yield Promise.resolve(this.state.symbolSetInfos):yield this.getSymbolSetGroupId().then(e=>De(this,void 0,void 0,(function*(){return yield this.getSymbolSetInfos(e).then(e=>De(this,void 0,void 0,(function*(){return yield Promise.resolve(e)})))})))})),this.getSymbolSetGroupId=()=>De(this,void 0,void 0,(function*(){return this.portal?yield this.portal.queryGroups({query:this.portal.symbolSetsGroupQuery}).then(e=>De(this,void 0,void 0,(function*(){const t=e.results[0];return yield Promise.resolve(t.id)})),()=>De(this,void 0,void 0,(function*(){return yield Promise.reject(null)}))):yield Promise.reject(null)})),this.getSymbolSetInfos=e=>De(this,void 0,void 0,(function*(){let t="group:"+e+' AND type:"Symbol Set"';const i=[];return this.portal?(t+=' AND (typekeywords:"by value" AND typekeywords:"marker")',yield this.portal.queryItems({query:t,num:20,sortField:"title"}).then(e=>De(this,void 0,void 0,(function*(){const t=e.results;let s,o,a,n;if(t){for(let e=0;e<t.length;e++){const l=t[e];s=l.typeKeywords.join(" "),s.indexOf("marker")>-1&&(o=l.title,a={name:o,id:l.id,title:l.title,keywords:s,dataUrl:this.getItemUrl(this.portalUrl,l.id)},n=s.indexOf("default")>-1,n?(a.defaultType=!0,i.unshift(a)):i.push(a))}return yield Promise.resolve(i)}return yield Promise.reject(null)})))):yield Promise.resolve(null)})),this.onSelectChanged=e=>{const t=e.target.value;this.fetchPointSymbolListByItemId(t)},this.fetchPointSymbolListByItemId=e=>{this.allPointSymbolList[e]?this.setState({pointSymbolList:this.allPointSymbolList[e],currentPointSymbolListItemId:e}):(this.setState({pointSymbolList:[],currentPointSymbolListItemId:e}),this.requestPointSymJson(e))},this.requestPointSymJson=e=>{this.setState({isLoading:!0});const t=this.getItemUrl(this.portalUrl,e);s.esri.restRequest.request(t).then(t=>{this.allPointSymbolList[e]=t,this.setState({pointSymbolList:t,isLoading:!1})},e=>{console.error(e),this.setState({isLoading:!1})})},this.getItemUrl=(e,t)=>{let i="";const s=this.getBaseItemUrl(e);return s&&t&&(i=s+"/"+t+"/data"),i},this.getBaseItemUrl=e=>{let t="";const i=this.portalUrl;return i&&(t=i+"/sharing/rest/content/items"),t},this.getPointSymbolParamsSetting=()=>this.props.symbol?"simple-marker"===this.props.symbol.type?this.getPointSymbolParamsSettingForSimpleMarker():"picture-marker"===this.props.symbol.type?this.getPointSymbolParamsSettingForPictureMarker():null:null,this.updateSymbolSize=e=>{const t=this.props.symbol.clone();"simple-marker"===t.type&&(t.size=e),"picture-marker"===t.type&&(t.width=e,t.height=e),this.props.onSymbolChanged(t)},this.updateSymbolFillColor=e=>{const t=this.props.symbol.clone();t.color=e,this.props.onSymbolChanged(t)},this.updateSymbolOutLineColor=e=>{const t=this.props.symbol.clone();t.outline.color=e,this.props.onSymbolChanged(t)},this.updateSymbolOutLineWeight=e=>{const t=this.props.symbol.clone();t.outline.width=e,this.props.onSymbolChanged(t)},this.updateSymbolOpacity=e=>{const t=this.props.symbol.clone();t.color.a=e,this.props.onSymbolChanged(t)},this.getOpacityInSymbol=()=>{const e=this.props.symbol.clone().color.a;return Math.round(100*e)/100},this.getPointSymbolParamsSettingForSimpleMarker=()=>{const e=this.props.symbol,t=e.outline,i=this.convertSymbolColorToColorPickerValue(t.color),o=t.width,a=this.getOpacityInSymbol();return s.React.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between pl-2 pr-2"},s.React.createElement("div",null,s.React.createElement(Ce,{size:"sm",value:e.size,min:1,max:50,style:{width:60},onChange:this.updateSymbolSize})),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement("div",null,s.React.createElement(Be.ColorPicker,{color:this.convertSymbolColorToColorPickerValue(e.color),onChange:this.updateSymbolFillColor})),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement("div",{style:{position:"relative"}},s.React.createElement(Be.ColorPicker,{color:i,onChange:this.updateSymbolOutLineColor}),s.React.createElement("div",{className:"jimu-draw-colorpicker-hole"})),s.React.createElement("div",null,s.React.createElement(Ce,{size:"sm",value:o,min:1,max:20,style:{width:60},onChange:this.updateSymbolOutLineWeight}),s.React.createElement("div",null)),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement(c.Slider,{title:`${this.props.intl.formatMessage({id:"drawToolOpacity",defaultMessage:c.defaultMessages.drawToolOpacity})}: ${100*a}%`,value:a,style:{width:"60px"},min:0,max:1,step:.1,onChange:e=>{this.updateSymbolOpacity(e.currentTarget.value)}}),s.React.createElement(Ne.InputUnit,{value:100*a+"%",style:{width:"70px"},onChange:e=>{this.onOpacityInputChanged(e)}}))},this.onOpacityInputChanged=e=>{const t=this.props.symbol.clone();t.color.a=e.distance/100,this.props.onSymbolChanged(t)},this.getPointSymbolParamsSettingForPictureMarker=()=>{const e=this.props.symbol;return s.React.createElement("div",{className:"w-100"},s.React.createElement("div",{className:"w-100 d-flex align-items-center pl-2"},s.React.createElement(Ce,{value:e.width,min:1,max:50,style:{width:80},onChange:this.updateSymbolSize})))},this.convertSymbolColorToColorPickerValue=e=>{if(e){const t=e.toRgba();return`rgba(${t[0]},${t[1]},${t[2]},${t[3]})`}return null},this.state={apiLoaded:!1,symbolSetInfos:[],pointSymbolList:[],currentPointSymbolListItemId:null,symbolSelectedInfo:{listItemId:null,symbolIdx:null},isLoading:!0},this.portalUrl=s.portalUrlUtils.getHostUrlByOrgUrl(Object(s.getAppStore)().getState().portalUrl)}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils","esri/portal/Portal"]).then(e=>{[this.jsonUtils,this.Portal]=e,this.portal=new this.Portal({url:this.portalUrl}),this.portal.load().then(()=>{this.fetchSymbolSetInfos().then(e=>{this.setState({symbolSetInfos:e},()=>{this.setInitialPointSymbolList(this.state.symbolSetInfos)})})}),this.setState({apiLoaded:!0})})}render(){return s.React.createElement("div",null,s.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center pl-2 pr-2 mb-3"},s.React.createElement("div",{className:"mr-4"},this.props.intl.formatMessage({id:"drawToolSource",defaultMessage:c.defaultMessages.drawToolSource})),s.React.createElement(c.Select,{className:"ml-4",onChange:this.onSelectChanged,value:this.state.currentPointSymbolListItemId},this.state.symbolSetInfos.map((e,t)=>s.React.createElement("option",{key:t,value:e.id},e.title)))),s.React.createElement("div",{className:"m-2 p-1 jimu-draw-symbol-list"},this.renderPointSymbolList()),s.React.createElement("div",{className:"w-100 pb-2"},this.getPointSymbolParamsSetting()))}}const Oe=[{tags:["solid"],title:"Blue Thin",style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},{tags:["solid"],title:"Red Thin",style:"esriSLSSolid",color:[192,80,77,255],width:3,name:"Red 1",type:"esriSLS"},{tags:["solid"],title:"Olive Green Thin",style:"esriSLSSolid",color:[155,187,89,255],width:3,name:"Olive Green 1",type:"esriSLS"},{tags:["solid"],title:"Purple Thin",style:"esriSLSSolid",color:[128,100,162,255],width:3,name:"Purple 1",type:"esriSLS"},{tags:["solid","blue","river"],title:"Aqua Thin",style:"esriSLSSolid",color:[75,172,198,255],width:3,name:"Aqua 1",type:"esriSLS"},{tags:["solid"],title:"Orange Thin",style:"esriSLSSolid",color:[247,150,70,255],width:3,name:"Orange 1",type:"esriSLS"},{tags:["solid"],title:"Blue",style:"esriSLSSolid",color:[79,129,189,255],width:5,name:"Blue 2",type:"esriSLS"},{tags:["solid"],title:"Red",style:"esriSLSSolid",color:[192,80,77,255],width:5,name:"Red 2",type:"esriSLS"},{tags:["solid"],title:"Olive Green",style:"esriSLSSolid",color:[155,187,89,255],width:5,name:"Olive Green 2",type:"esriSLS"},{tags:["solid"],title:"Purple",style:"esriSLSSolid",color:[128,100,162,255],width:5,name:"Purple 2",type:"esriSLS"},{tags:["solid","blue"],title:"Aqua",style:"esriSLSSolid",color:[75,172,198,255],width:5,name:"Aqua 2",type:"esriSLS"},{tags:["solid"],title:"Orange",style:"esriSLSSolid",color:[247,150,70,255],width:5,name:"Orange 2",type:"esriSLS"},{tags:["solid"],title:"Blue Thick",style:"esriSLSSolid",color:[79,129,189,255],width:7,name:"Blue 3",type:"esriSLS"},{tags:["solid","interstate","highway"],title:"Red Thick",style:"esriSLSSolid",color:[192,80,77,255],width:7,name:"Red 3",type:"esriSLS"},{tags:["solid"],title:"Olive Green Thick",style:"esriSLSSolid",color:[155,187,89,255],width:7,name:"Olive Green 3",type:"esriSLS"},{tags:["solid"],title:"Purple Thick",style:"esriSLSSolid",color:[128,100,162,255],width:7,name:"Purple 3",type:"esriSLS"},{tags:["solid","blue"],title:"Aqua Thick",style:"esriSLSSolid",color:[75,172,198,255],width:7,name:"Aqua 3",type:"esriSLS"},{tags:["solid"],title:"Orange Thick",style:"esriSLSSolid",color:[247,150,70,255],width:7,name:"Orange 3",type:"esriSLS"},{tags:["dashed"],title:"Blue Dash",style:"esriSLSDash",color:[79,129,189,255],width:3,name:"ColoredLineBlue4",type:"esriSLS"},{tags:["dashed"],title:"Red Dash",style:"esriSLSDash",color:[192,80,77,255],width:3,name:"ColoredLineRed4",type:"esriSLS"},{tags:["dashed"],title:"Olive Green Dash",style:"esriSLSDash",color:[155,187,89,255],width:3,name:"ColoredLineOliveGreen4",type:"esriSLS"},{tags:["dashed"],title:"Purple Dash ",style:"esriSLSDash",color:[128,100,162,255],width:3,name:"ColoredLinePurple4",type:"esriSLS"},{tags:["blue","dashed"],title:"Aqua Dash",style:"esriSLSDash",color:[75,172,198,255],width:3,name:"ColoredLineAqua4",type:"esriSLS"},{tags:["dashed"],title:"Orange Dash",style:"esriSLSDash",color:[247,150,70,255],width:3,name:"ColoredLineOrange4",type:"esriSLS"},{tags:["dotted"],title:"Blue Dot",style:"esriSLSDot",color:[79,129,189,255],width:3,name:"Blue Dot",type:"esriSLS"},{tags:["dotted"],title:"Red Dot",style:"esriSLSDot",color:[192,80,77,255],width:3,name:"Red Dot",type:"esriSLS"},{tags:["dotted"],title:"Olive Green Dot",style:"esriSLSDot",color:[155,187,89,255],width:3,name:"Olive Green Dot",type:"esriSLS"},{tags:["dotted"],title:"Purple Dot ",style:"esriSLSDot",color:[128,100,162,255],width:3,name:"Purple Dot",type:"esriSLS"},{tags:["blue","dotted"],title:"Aqua Dot",style:"esriSLSDot",color:[75,172,198,255],width:3,name:"Aqua Dot",type:"esriSLS"},{tags:["dotted"],title:"Orange Dot",style:"esriSLSDot",color:[247,150,70,255],width:3,name:"Orange Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Blue Dash Dot",style:"esriSLSDashDot",color:[79,129,189,255],width:3,name:"Blue Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Red Dash Dot",style:"esriSLSDashDot",color:[192,80,77,255],width:3,name:"Red Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Olive Green Dash Dot",style:"esriSLSDashDot",color:[155,187,89,255],width:3,name:"Olive Green Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Purple Dash Dot ",style:"esriSLSDashDot",color:[128,100,162,255],width:3,name:"Purple Dash Dot",type:"esriSLS"},{tags:["blue","dashed","dotted"],title:"Aqua Dash Dot",style:"esriSLSDashDot",color:[75,172,198,255],width:3,name:"Aqua Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Orange Dash Dot",style:"esriSLSDashDot",color:[247,150,70,255],width:3,name:"Orange Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Blue Dash Dot Dot",style:"esriSLSDashDotDot",color:[79,129,189,255],width:3,name:"ColoredLineBlue5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Red Dash Dot Dot",style:"esriSLSDashDotDot",color:[192,80,77,255],width:3,name:"ColoredLineRed5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Olive Green Dash Dot Dot",style:"esriSLSDashDotDot",color:[155,187,89,255],width:3,name:"ColoredLineOliveGreen5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Purple Dash Dot Dot ",style:"esriSLSDashDotDot",color:[128,100,162,255],width:3,name:"ColoredLinePurple5",type:"esriSLS"},{tags:["blue"],title:"Aqua Dash Dot Dot",style:"esriSLSDashDotDot",color:[75,172,198,255],width:3,name:"ColoredLineAqua5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Orange Dash Dot Dot",style:"esriSLSDashDotDot",color:[247,150,70,255],width:3,name:"ColoredLineOrange5",type:"esriSLS"},{tags:["solid"],title:"Black",style:"esriSLSSolid",color:[0,0,0,255],width:3,name:"Gray 1",type:"esriSLS"},{tags:["solid"],title:"Gray 80",style:"esriSLSSolid",color:[51,51,51,255],width:3,name:"Gray 2",type:"esriSLS"},{tags:["solid"],title:"Gray 60",style:"esriSLSSolid",color:[119,119,119,255],width:3,name:"Gray 3",type:"esriSLS"},{tags:["solid"],title:"Gray 40",style:"esriSLSSolid",color:[187,187,187,255],width:3,name:"Gray 4",type:"esriSLS"},{tags:["solid"],title:"Gray 20",style:"esriSLSSolid",color:[221,221,221,255],width:3,name:"Gray 5",type:"esriSLS"},{tags:["solid"],title:"White",style:"esriSLSSolid",color:[255,255,255,255],width:3,name:"Gray 6",type:"esriSLS"},{tags:["green","solid"],title:"Lime",style:"esriSLSSolid",color:[0,255,0,255],width:5,name:"Lime",type:"esriSLS"},{tags:["solid"],title:"Brown",style:"esriSLSSolid",color:[165,42,42,255],width:5,name:"Brown",type:"esriSLS"},{tags:["solid"],title:"Green",style:"esriSLSSolid",color:[0,128,0,255],width:5,name:"Green",type:"esriSLS"},{tags:["solid"],title:"Yellow",style:"esriSLSSolid",color:[255,255,0,255],width:5,name:"Yellow",type:"esriSLS"},{tags:["blue","solid"],title:"Navy",style:"esriSLSSolid",color:[0,0,128,255],width:5,name:"Navy",type:"esriSLS"}],Pe=[{intl:"Dash",label:"dash",value:"dash",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"DashDot",label:"dash dot",value:"dash-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,10.666666666666666,1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"Dot",label:"dot",value:"dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"LongDash",label:"long dash",value:"long-dash",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="18.666666666666664,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"LongDashDot",label:"long dash dot",value:"long-dash-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="18.666666666666664,10.666666666666666,1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"LongDashDotDot",label:"long dash dot dot",value:"long-dash-dot-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="18.666666666666664,10.666666666666666,1,10.666666666666666,1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDash",label:"short dash",value:"short-dash",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDashDot",label:"short dash dot",value:"short-dash-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,5.333333333333333,1,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDashDotDot",label:"short dash dot dot",value:"short-dash-dot-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,5.333333333333333,1,5.333333333333333,1,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDot",label:"short dot",value:"short-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="1,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"Solid",label:"solid",value:"solid",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="none" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'}];class Ve extends s.React.PureComponent{constructor(e){super(e),this.jsonUtils=null,this.handleSymbolSelected=(e,t)=>{this.setState({currentIndex:e}),this.props.onSymbolChanged(t)},this.onSelectChanged=e=>{const t=e.target.value,i=this.props.symbol.clone();i.style=t,this.props.onSymbolChanged(i)},this.updateSymbolLineWidth=e=>{const t=this.props.symbol.clone();t.width=e,this.props.onSymbolChanged(t)},this.getOpacityInSymbol=()=>{const e=this.props.symbol.clone().color.a;return Math.round(100*e)/100},this.updateSymbolOpacity=e=>{const t=this.props.symbol.clone();t.color.a=e,this.props.onSymbolChanged(t)},this.convertSymbolColorToColorPickerValue=e=>{if(e){const t=e.toRgba();return`rgba(${t[0]},${t[1]},${t[2]},${t[3]})`}return null},this.updateSymbolFillColor=e=>{const t=this.props.symbol.clone();t.color=e,this.props.onSymbolChanged(t)},this.renderPolylineSymbolList=()=>this.jsonUtils?Oe.map((e,t)=>{const i=this.jsonUtils.fromJSON(e);return s.React.createElement("div",{key:t,className:"mr-2 mt-2",style:{width:"35px",height:"35px",float:"left"}},s.React.createElement(ke,{index:t,key:t,symbol:i,isActive:this.state.currentIndex===t,onSymbolSelected:this.handleSymbolSelected}))}):null,this.getPolylineSymbolParamsSetting=()=>{if(this.props.symbol){const e=this.props.symbol.clone(),t=e.color,i=e.style,o=e.width,a=this.getOpacityInSymbol();return s.React.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between pl-2 pr-2 pb-2"},s.React.createElement(Ce,{size:"sm",value:o,min:1,max:20,style:{width:80},onChange:this.updateSymbolLineWidth}),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement(c.Select,{size:"sm",value:i,onChange:this.onSelectChanged,style:{width:"80px"}},Pe.map((e,t)=>s.React.createElement(c.Option,{key:t,title:this.props.intl.formatMessage({id:"drawTool"+e.intl,defaultMessage:c.defaultMessages["drawTool"+e.intl]}),value:e.value,label:e.label},s.React.createElement("img",{className:"mt-2 mb-2",style:{display:"block",width:"30px"},src:"data:image/svg+xml;utf8,"+e.img})))),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement(Be.ColorPicker,{color:this.convertSymbolColorToColorPickerValue(t),onChange:this.updateSymbolFillColor}),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement(c.Slider,{title:`${this.props.intl.formatMessage({id:"drawToolOpacity",defaultMessage:c.defaultMessages.drawToolOpacity})}: ${100*a}%`,value:a,min:0,style:{width:"60px"},max:1,step:.1,onChange:e=>{this.updateSymbolOpacity(e.currentTarget.value)}}),s.React.createElement(Ne.InputUnit,{value:100*a+"%",style:{width:"70px"},onChange:e=>{this.onOpacityInputChanged(e)}}))}return null},this.onOpacityInputChanged=e=>{const t=this.props.symbol.clone();t.color.a=e.distance/100,this.props.onSymbolChanged(t)},this.state={apiLoaded:!1,currentIndex:null}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then(e=>{[this.jsonUtils]=e,this.setState({apiLoaded:!0})})}render(){return s.React.createElement("div",null,s.React.createElement("div",{className:"m-2 p-1 jimu-draw-symbol-list"},this.renderPolylineSymbolList()),s.React.createElement("div",{className:"w-100"},this.getPolylineSymbolParamsSetting()))}}const Re=[{tags:["opaque"],title:"Blue",style:"esriSFSSolid",color:[79,129,189,255],name:"Blue 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Red",style:"esriSFSSolid",color:[192,80,77,255],name:"Red 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[160,63,60,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Olive Green",style:"esriSFSSolid",color:[155,187,89,255],name:"Olive Green 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[115,140,61,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Purple",style:"esriSFSSolid",color:[128,100,162,255],name:"Purple 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[140,125,158,255],width:1.5,type:"esriSLS"}},{tags:["opaque","blue"],title:"Aqua",style:"esriSFSSolid",color:[75,172,198,255],name:"Aqua 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[63,131,150,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Orange",style:"esriSFSSolid",color:[239,132,38,255],name:"Orange 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[184,115,59,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Blue",style:"esriSFSSolid",color:[79,129,189,128],name:"Blue 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Red",style:"esriSFSSolid",color:[192,80,77,128],name:"Red 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[160,63,60,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Olive Green",style:"esriSFSSolid",color:[155,187,89,128],name:"Olive Green 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[115,140,61,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Purple",style:"esriSFSSolid",color:[128,100,162,128],name:"Purple 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[140,125,158,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque","blue"],title:"Aqua",style:"esriSFSSolid",color:[75,172,198,128],name:"Aqua 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[63,131,150,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Orange",style:"esriSFSSolid",color:[239,132,38,128],name:"Orange 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[184,115,59,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Blue",style:"esriSFSSolid",color:[220,232,255,255],name:"Blue 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[108,151,203,255],width:1.5,type:"esriSLS"}},{tags:[""],title:"Red",style:"esriSFSSolid",color:[255,199,198,255],name:"Red 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[207,101,99,255],width:1.5,type:"esriSLS"}},{title:"Olive Green",style:"esriSFSSolid",color:[235,254,208,255],name:"Olive Green 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[166,191,116,255],width:1.5,type:"esriSLS"}},{title:"Purple",style:"esriSFSSolid",color:[224,212,242,255],name:"Purple 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[145,122,171,255],width:1.5,type:"esriSLS"}},{tags:["blue"],title:"Aqua",style:"esriSFSSolid",color:[194,240,255,255],name:"Aqua 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[101,179,200,255],width:1.5,type:"esriSLS"}},{title:"Orange",style:"esriSFSSolid",color:[255,214,180,255],name:"Orange 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[251,164,93,255],width:1.5,type:"esriSLS"}},{tags:["white","outline"],title:"Blue",style:"esriSFSSolid",color:[108,151,203,255],name:"Blue 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Red",style:"esriSFSSolid",color:[207,101,99,255],name:"Red 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Olive Green",style:"esriSFSSolid",color:[166,191,116,255],name:"Olive Green 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline","blue"],title:"Aqua",style:"esriSFSSolid",color:[101,179,200,255],name:"Purple 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Red",style:"esriSFSSolid",color:[246,91,60,255],name:"Aqua 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Orange",style:"esriSFSSolid",color:[251,164,93,255],name:"Orange 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Blue",style:"esriSFSSolid",color:[108,151,203,0],name:"Blue 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[108,151,203,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Red",style:"esriSFSSolid",color:[207,101,99,0],name:"Red 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[207,101,99,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Olive Green",style:"esriSFSSolid",color:[166,191,116,0],name:"Olive Green 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[166,191,116,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Aqua",style:"esriSFSSolid",color:[101,179,200,0],name:"Purple 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[101,179,200,255],width:2,type:"esriSLS"}},{tags:["hollow","blue"],title:"Red",style:"esriSFSSolid",color:[246,91,60,0],name:"Aqua 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[246,91,60,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Orange",style:"esriSFSSolid",color:[251,164,93,0],name:"Orange 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[251,164,93,255],width:2,type:"esriSLS"}},{tags:["no outline"],title:"Blue",style:"esriSFSSolid",color:[58,120,192,255],name:"Blue 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Red",style:"esriSFSSolid",color:[184,55,52,255],name:"Red 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Olive Green",style:"esriSFSSolid",color:[142,179,65,255],name:"Olive Green 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Purple",style:"esriSFSSolid",color:[111,79,150,255],name:"Purple 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline","blue"],title:"Aqua",style:"esriSFSSolid",color:[47,157,187,255],name:"Aqua 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Orange",style:"esriSFSSolid",color:[239,132,38,255],name:"Orange 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{title:"Black",style:"esriSFSSolid",color:[0,0,0,255],name:"Gray 7",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 80",style:"esriSFSSolid",color:[51,51,51,255],name:"Gray 8",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 60",style:"esriSFSSolid",color:[119,119,119,255],name:"Gray 9",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 40",style:"esriSFSSolid",color:[187,187,187,255],name:"Gray 10",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 20",style:"esriSFSSolid",color:[221,221,221,255],name:"Gray 11",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"White",style:"esriSFSSolid",color:[255,255,255,255],name:"Gray 12",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[1,1,1,153],name:"Gray 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[51,51,51,128],name:"Gray 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[119,119,119,128],name:"Gray 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[187,187,187,128],name:"Gray 4",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[221,221,221,128],name:"Gray 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[221,221,221,128],name:"Gray 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{tags:["green","blue","outline"],title:"Lime",style:"esriSFSSolid",color:[0,255,0,128],name:"Lime",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Brown",style:"esriSFSSolid",color:[165,42,42,128],name:"Brown",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Green",style:"esriSFSSolid",color:[0,128,0,128],name:"Green",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Yellow",style:"esriSFSSolid",color:[255,255,0,128],name:"Yellow",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Navy",style:"esriSFSSolid",color:[0,0,128,128],name:"Navy",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}}];class Ee extends s.React.PureComponent{constructor(e){super(e),this.jsonUtils=null,this.handleSymbolSelected=(e,t)=>{this.setState({currentIndex:e}),this.props.onSymbolChanged(t)},this.renderPolygonSymbolList=()=>this.jsonUtils?Re.map((e,t)=>{const i=this.jsonUtils.fromJSON(e);return s.React.createElement("div",{key:t,className:"mr-2 mt-2",style:{width:"35px",height:"35px",float:"left"}},s.React.createElement(ke,{index:t,key:t,symbol:i,isActive:this.state.currentIndex===t,onSymbolSelected:this.handleSymbolSelected}))}):null,this.getPolygonSymbolParamsSetting=()=>{if(this.props.symbol){const e=this.props.symbol.clone(),t=e.color,i=e.outline,o=this.convertSymbolColorToColorPickerValue(i.color),a=i.width,n=this.getOpacityInSymbol();return s.React.createElement("div",{className:"w-100 d-flex justify-content-between align-items-center pl-2 pr-2 pb-2"},s.React.createElement("div",null,s.React.createElement(Be.ColorPicker,{color:this.convertSymbolColorToColorPickerValue(t),onChange:this.updateSymbolFillColor})),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement("div",{style:{position:"relative"}},s.React.createElement(Be.ColorPicker,{color:o,onChange:this.updateSymbolOutLineColor}),s.React.createElement("div",{className:"jimu-draw-colorpicker-hole"})),s.React.createElement(Ce,{size:"sm",value:a,min:1,max:20,style:{width:80},onChange:this.updateSymbolOutLineWeight}),s.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),s.React.createElement(c.Slider,{title:`${this.props.intl.formatMessage({id:"drawToolOpacity",defaultMessage:c.defaultMessages.drawToolOpacity})}: ${100*n}%`,value:n,min:0,style:{width:"80px"},max:1,step:.1,onChange:e=>{this.updateSymbolOpacity(e.currentTarget.value)}}),s.React.createElement(Ne.InputUnit,{value:100*n+"%",style:{width:"70px"},onChange:e=>{this.onOpacityInputChanged(e)}}))}return null},this.onOpacityInputChanged=e=>{const t=this.props.symbol.clone();t.color.a=e.distance/100,this.props.onSymbolChanged(t)},this.updateSymbolOutLineWeight=e=>{const t=this.props.symbol.clone();t.outline.width=e,this.props.onSymbolChanged(t)},this.updateSymbolOutLineColor=e=>{const t=this.props.symbol.clone();t.outline.color=e,this.props.onSymbolChanged(t)},this.convertSymbolColorToColorPickerValue=e=>{if(e){const t=e.toRgba();return`rgba(${t[0]},${t[1]},${t[2]},${t[3]})`}return null},this.updateSymbolFillColor=e=>{const t=this.props.symbol.clone();t.color=e,this.props.onSymbolChanged(t)},this.getOpacityInSymbol=()=>{const e=this.props.symbol.clone().color.a;return Math.round(100*e)/100},this.updateSymbolOpacity=e=>{const t=this.props.symbol.clone();t.color.a=e,this.props.onSymbolChanged(t)},this.state={apiLoaded:!1,currentIndex:null}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then(e=>{[this.jsonUtils]=e,this.setState({apiLoaded:!0})})}render(){return s.React.createElement("div",null,s.React.createElement("div",{className:"m-2 p-1 jimu-draw-symbol-list"},this.renderPolygonSymbolList()),s.React.createElement("div",{className:"w-100"},this.getPolygonSymbolParamsSetting()))}}class ze extends s.React.PureComponent{constructor(e){super(e),this.checkSymbolType=e=>e?"simple-line"===e.type||"line-3d"===e.type?"polyline":"simple-fill"===e.type||"polygon-3d"===e.type?"polygon":"point":"",this.handlePointSymbolChanged=e=>{this.props.onPointSymbolChanged&&this.props.onPointSymbolChanged(e)},this.handlePolylineSymbolChanged=e=>{this.props.onPolylineSymbolChanged&&this.props.onPolylineSymbolChanged(e)},this.handlePolygonSymbolChanged=e=>{this.props.onPolygonSymbolChanged&&this.props.onPolygonSymbolChanged(e)}}_cssStyle(){const e=this.props.theme;return s.css`
      .jimu-draw-symbol-divide-line {
        border-right: 1px solid ${e.colors.palette.light[500]};
        height: 26px;
      }

      .jimu-draw-symbol-list {
        background-color: ${e.colors.palette.light[200]};
        max-height: 150px;
        overflow-y: auto;
      }

      .jimu-draw-colorpicker-hole {
        background-color: ${e.colors.white};
        position: absolute;
        top: 6px;
        width: 16px;
        height: 14px;
        left: 7px;
        pointer-events: none;
      }

      .symbol-item {
        cursor: pointer;

        &:hover {
          background-color: ${e.colors.secondary};
        }
      }

      .symbol-item-active {
        border: 1px solid ${e.colors.primary};
      }
    `}render(){return Object(s.jsx)("div",{className:Object(s.classNames)(this.props.className,"jimu-symbol-selector"),style:{display:this.props.symbol?"block":"none"},css:this._cssStyle()},this.props.symbol&&Object(s.jsx)(Te,{symbol:this.props.symbol,intl:this.props.intl}),Object(s.jsx)("div",{style:{display:"point"===this.checkSymbolType(this.props.symbol)?"block":"none"}},Object(s.jsx)(Le,{onSymbolChanged:this.handlePointSymbolChanged,intl:this.props.intl,symbol:"point"===this.checkSymbolType(this.props.symbol)?this.props.symbol:null})),Object(s.jsx)("div",{style:{display:"polyline"===this.checkSymbolType(this.props.symbol)?"block":"none"}},Object(s.jsx)(Ve,{onSymbolChanged:this.handlePolylineSymbolChanged,intl:this.props.intl,symbol:"polyline"===this.checkSymbolType(this.props.symbol)?this.props.symbol:null})),Object(s.jsx)("div",{style:{display:"polygon"===this.checkSymbolType(this.props.symbol)?"block":"none"}},Object(s.jsx)(Ee,{onSymbolChanged:this.handlePolygonSymbolChanged,intl:this.props.intl,symbol:"polygon"===this.checkSymbolType(this.props.symbol)?this.props.symbol:null})))}}const Ae=s.themeUtils.withTheme(ze);var Ge=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};const Ue=i(168),We=i(169),Fe={angle:0,color:[255,255,255,255],outline:{color:[255,255,255,255],style:"esriSLSSolid",type:"esriSLS",width:1},size:6,style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0},He={color:[130,130,130,255],style:"esriSLSSolid",type:"esriSLS",width:2},Qe={color:[150,150,150,51],outline:{color:[50,50,50,255],style:"esriSLSSolid",type:"esriSLS",width:2},style:"esriSFSSolid",type:"esriSFS"};class _e extends s.React.PureComponent{constructor(e){super(e),this.resizeObserver=null,this.SketchClass=null,this.SketchViewModelClass=null,this.GraphicsLayer=null,this.jsonUtils=null,this.isLayerClearWhenUnmount=!1,this.activeTools=["point","polyline","polygon","rectangle","circle"],this.currentActiveTool=null,this.pointSymbol=null,this.polygonSymbol=null,this.polylineSymbol=null,this.onGraphicEdited=null,this.isSymbolChanging=!1,this._initSketch=()=>{var e,t,i,o;if(this.deactivate(),this.sketch&&this.sketch.destroy(),this.props.layer)this.layer=this.props.layer;else{const e="draw-layer-"+this.props.jimuMapView.id;this.layer=new this.GraphicsLayer({id:e,listMode:"hide",title:e}),this.isLayerClearWhenUnmount=!0}(null===(e=this.props.jimuMapView.view)||void 0===e?void 0:e.map)&&(this.props.jimuMapView.view.map.findLayerById(this.layer.id)||this.props.jimuMapView.view.map.add(this.layer));const a=null===(t=this.props.updateOnGraphicClick)||void 0===t||t,n=null!==(i=this.props.defaultCreateOptions)&&void 0!==i?i:null,l=null!==(o=this.props.defaultUpdateOptions)&&void 0!==o?o:null;this.sketch=new this.SketchClass({container:this.container,creationMode:this.props.creationMode?this.props.creationMode:"continuous",visibleElements:this._getDefaultVisibleElements(this.props.visibleElements),viewModel:new this.SketchViewModelClass({view:this.props.jimuMapView.view,layer:this.layer,updateOnGraphicClick:a,defaultCreateOptions:n,defaultUpdateOptions:l})}),setTimeout(()=>{this.insertCustomDom()},1e3),this.sketch.watch("activeTool",e=>{if(this.activeTools.includes(e))this.currentActiveTool=e,this.props.onDrawToolsActived&&this.props.onDrawToolsActived(e),this.setState({currentSymbol:this.getCurrentSymbol(e),popperGeneration:this.state.popperGeneration+1});else{if(this.isSymbolChanging)return void(this.isSymbolChanging=!1);this.currentActiveTool=null,this.setState({currentSymbol:null,popperGeneration:this.state.popperGeneration+1})}}),this.sketch.viewModel.on("create",e=>{if("start"===e.state&&this.props.onDrawStart&&this.props.onDrawStart(),"complete"===e.state&&this.props.onDrawEnd){const t=!("point"!==(null==e?void 0:e.tool)||!this.props.onDrawStart);t&&this.props.onDrawStart(),(null==e?void 0:e.graphic)&&(e.graphic.attributes&&e.graphic.attributes.id||(e.graphic.attributes={},e.graphic.attributes.id=s.utils.getUUID()),setTimeout(()=>{this.props.onDrawEnd(e.graphic)},t?100:0))}"cancel"===e.state&&this.props.onDrawCancel&&this.props.onDrawCancel()}),this.sketch.viewModel.on("update",e=>{if(this.props.onGraphicEdited&&!e.aborted&&(clearTimeout(this.onGraphicEdited),this.onGraphicEdited=setTimeout(()=>{const t=e.graphics&&e.graphics[0];!t||t.attributes&&t.attributes.id||(t.attributes={},t.attributes.id=s.utils.getUUID()),this.props.onGraphicEdited({type:"modified",graphic:t,layer:this.layer})},200)),"complete"===e.state&&this.props.onGraphicEdited){const t=e.graphics&&e.graphics[0];!t||t.attributes&&t.attributes.id||(t.attributes={},t.attributes.id=s.utils.getUUID());const i=e.aborted?"aborted":"complete";this.props.onGraphicEdited({type:i,graphic:t,layer:this.layer})}}),this.sketch.viewModel.on("delete",e=>{if(this.props.onGraphicEdited){const t=e.graphics&&e.graphics[0];!t||t.attributes&&t.attributes.id||(t.attributes={},t.attributes.id=s.utils.getUUID()),this.props.onGraphicEdited({type:"deleted",graphic:t,layer:this.layer})}}),"function"==typeof this.props.onDrawToolCreated&&this.props.onDrawToolCreated({sketch:this.sketch,graphicsLayer:this.layer,complete:this.complete})},this._getDefaultVisibleElements=e=>{let t=null!=e?e:null;return t=t?Object.assign(t,{settingsMenu:!1}):{settingsMenu:!1},t},this.insertCustomDom=()=>{var e;if(this.container&&this.container.children[0]){this.container.children[0].contains(this.btnContainer)&&this.container.children[0].removeChild(this.btnContainer),this.btnContainer.style.display="block",this.container.children[0].appendChild(this.btnContainer),this.container.children[0].contains(this.collapseBtnContainer)&&this.container.children[0].removeChild(this.collapseBtnContainer);null!==(e=this.props.disableSymbolSelector)&&void 0!==e&&e||(this.collapseBtnContainer.style.display="block"),this.container.children[0].appendChild(this.collapseBtnContainer)}},this.complete=()=>Ge(this,void 0,void 0,(function*(){return yield new Promise((e,t)=>{this.sketch&&["move","transform","reshape"].includes(this.sketch.activeTool)?(this.sketch.complete(),setTimeout(()=>{e()},500)):e()})})),this.deactivate=()=>{this.sketch&&this.sketch.viewModel.cancel()},this.clearGraphics=()=>{this.layer&&this.layer.removeAll(),this.props.onDrawToolCleared&&this.props.onDrawToolCleared()},this.getCurrentSymbol=e=>["polyline"].includes(e)?(this.polylineSymbol||(this.polylineSymbol=this.jsonUtils.fromJSON(He)),this.polylineSymbol):["polygon","rectangle","circle"].includes(e)?(this.polygonSymbol||(this.polygonSymbol=this.jsonUtils.fromJSON(Qe)),this.polygonSymbol):(this.pointSymbol||(this.pointSymbol=this.jsonUtils.fromJSON(Fe)),this.pointSymbol),this.handlePointSymbolChanged=e=>{const t=e||this.jsonUtils.fromJSON(Fe);this.pointSymbol=t,this.setState({currentSymbol:t},()=>{this.isSymbolChanging=!0,this.sketch.viewModel.pointSymbol=t})},this.handlePolylineSymbolChanged=e=>{const t=e||this.jsonUtils.fromJSON(He);this.polylineSymbol=t,this.setState({currentSymbol:t},()=>{this.isSymbolChanging=!0,this.sketch.viewModel.polylineSymbol=t})},this.handlePolygonSymbolChanged=e=>{const t=e||this.jsonUtils.fromJSON(Qe);this.polygonSymbol=t,this.setState({currentSymbol:t},()=>{this.isSymbolChanging=!0,this.sketch.viewModel.polygonSymbol=t})},this.onDrawToolContainerCreated=e=>{e&&(this.container=e,this.resizeObserver=new s.ResizeObserver((e,t)=>{this.setState({containerWidth:this.container.clientWidth})}),this.resizeObserver.observe(this.container))},this._getPopperVisibility=()=>{let e;return e=this.props.disableSymbolSelector?"none":this.state.isPanelOpened?"block":"none",e},this._isHideSelectionToolsDom=()=>{var e,t,i,s;const o=null===(e=this.props.visibleElements)||void 0===e?void 0:e.selectionTools,a=null===(t=this.props.updateOnGraphicClick)||void 0===t||t;if(o&&!a){const e=null===(i=o["rectangle-selection"])||void 0===i||i,t=null===(s=o["lasso-selection"])||void 0===s||s;return!e&&!t}return!1},this._getSelectionToolClass=()=>this._isHideSelectionToolsDom()?"hide-selectiontools":"",this.getStyles=()=>s.css`
        .jimu-draw-tool.hide-selectiontools > .esri-sketch__panel > .esri-sketch__tool-section:first-of-type {
          display: none;
        }
    `,this.state={apiLoaded:!1,currentSymbol:null,containerWidth:null,isPanelOpened:!0,popperGeneration:0}}componentDidMount(){this.state.apiLoaded||Object(C.loadArcGISJSAPIModules)(["esri/widgets/Sketch","esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/symbols/support/jsonUtils"]).then(e=>{[this.SketchClass,this.SketchViewModelClass,this.GraphicsLayer,this.jsonUtils]=e,this.setState({apiLoaded:!0},()=>{this._initSketch()})})}componentDidUpdate(e,t){this.state.apiLoaded&&this.container&&e.isActive!==this.props.isActive&&e.isActive&&this.deactivate(),this.state.apiLoaded&&(this.props.jimuMapView!==e.jimuMapView&&(this._removeLayer(e.jimuMapView),this._initSketch()),this.isLayerClearWhenUnmount||this.props.layer===this.layer||this._initSketch())}componentWillUnmount(){try{this.sketch&&this.sketch.destroy(),this._removeLayer()}catch(e){console.error(e)}}_removeLayer(e){var t;const i=null!=e?e:this.props.jimuMapView;this.isLayerClearWhenUnmount&&(null===(t=i.view)||void 0===t?void 0:t.map)&&this.layer&&i.view.map.remove(this.layer)}render(){return Object(s.jsx)("div",{className:Object(s.classNames)(this.props.className,"jimu-drawtool"),style:{width:(this.state.containerWidth?this.state.containerWidth:332)+"px",minHeight:"45px"}},Object(s.jsx)("div",{className:"w-100 d-flex",ref:e=>{this.toolbarContainer=e},css:this.getStyles()},!this.state.apiLoaded&&Object(s.jsx)("div",{style:{width:"332px",height:"45px"}},Object(s.jsx)("div",{className:"jimu-draw-loader"})),Object(s.jsx)("div",{ref:e=>{this.onDrawToolContainerCreated(e)},className:"jimu-draw-tool "+this._getSelectionToolClass()}),Object(s.jsx)(c.Button,{style:{display:"none",height:"32px",whiteSpace:"nowrap"},className:"ml-2 mr-2",size:"sm",onClick:this.clearGraphics,ref:e=>{this.btnContainer=e}},this.props.intl.formatMessage({id:"clear",defaultMessage:c.defaultMessages.clear})),Object(s.jsx)(c.Button,{style:{display:"none",height:"32px"},className:"align-items-center justify-content-center mr-1",disabled:!this.activeTools.includes(this.currentActiveTool),title:this.props.intl.formatMessage({id:"drawToolStyles",defaultMessage:c.defaultMessages.drawToolStyles}),ref:e=>{this.collapseBtnContainer=e},onClick:()=>{this.setState({isPanelOpened:!this.state.isPanelOpened,popperGeneration:this.state.popperGeneration+1})}},Object(s.jsx)(c.Icon,{className:"mr-0",icon:this.state.isPanelOpened?Ue:We,size:12}))),Object(s.jsx)(c.Popper,{className:"surface-2 border-0",reference:this.toolbarContainer,placement:"bottom-start",open:!0,offset:[0,12],version:this.state.popperGeneration},Object(s.jsx)("div",{style:{width:this.state.containerWidth+"px",display:""+this._getPopperVisibility()}},Object(s.jsx)(Ae,{intl:this.props.intl,symbol:this.state.currentSymbol,onPointSymbolChanged:this.handlePointSymbolChanged,onPolylineSymbolChanged:this.handlePolylineSymbolChanged,onPolygonSymbolChanged:this.handlePolygonSymbolChanged}))))}}s.themeUtils.withStyles(Object(s.injectIntl)(_e),"Draw");s.React.PureComponent;const{useMemo:qe,useState:Ze}=s.React,Je=({currentSymbol:e,setCurrentSymbol:t,esriModuleMap:i,intl:o})=>{const a=qe(()=>e&&i.jsonUtils&&i.jsonUtils.fromJSON(e),[e,i.jsonUtils]),n=qe(()=>({refToolbarContainer:null}),[]),[l,r]=Ze(!1),p=s.css`
    &.setting-ui-unit-symbol-preview {
      position: relative;
      cursor: pointer;
    }
  `,d=s.css`
    &.setting-ui-unit-symbol-selector {
      width: 600px;
    }
  `;return Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)("div",{ref:e=>n.refToolbarContainer=e,css:p,className:"setting-ui-unit-symbol-preview",onClick:()=>r(!l)},e&&(i.SketchClass?Object(s.jsx)(ke,{symbol:a,isUsedForPreview:!0}):Object(s.jsx)(c.Loading,{type:c.LoadingType.Donut,width:16,height:16}))),e&&l&&Object(s.jsx)(c.Popper,{className:"surface-2 border-0",reference:n.refToolbarContainer,placement:"top",open:!0,offset:[0,12],toggle:()=>r(!l)},Object(s.jsx)(Ae,{className:"setting-ui-unit-symbol-selector",css:d,intl:o,symbol:a,onPointSymbolChanged:e=>t(e.toJSON())})))};var Ye=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};const{iconMap:Ke}=g(),$e=e=>{const{configId:t,targetSelf:i,onCloseSettingPane:o,getValueMan:n,updateUserServicesQueryWidgetStore:l}=e,{getI18nMessage:r}=i,p=e=>Ye(void 0,void 0,void 0,(function*(){return yield Promise.resolve(e&&e(i.state.mainViewBlock)).then(()=>i.setState(({mainViewBlock:e})=>({mainViewBlock:Object.assign({},e)})))})),d=e=>{const{sqlExprObj:t,sortData:i}=e,o=n("useDataSource","sqlExprObj","sortOptions"),{dataSourceId:a,mainDataSourceId:l,dataViewId:r,rootDataSourceId:c,fields:p=[]}=o.getByIndex(0).asMutable({deep:!0}),d={},h=[];if(t){const e=((null==t?void 0:t.parts)||[]).length>0?t:null;d.where=(null==t?void 0:t.sql)?t:void 0,p.push(...Object(k.getJimuFieldNamesBySqlExpression)(Object(s.Immutable)(e))),h.push([1,e])}if(i){const e=(i||[]).filter(e=>e.jimuFieldName);p.push(...e.map(e=>e.jimuFieldName)),d.orderBy=e,h.push([2,i])}const u={dataSourceId:a,mainDataSourceId:l,dataViewId:r,rootDataSourceId:c,fields:Array.from(new Set(p))};h.push([0,u,{dsUpdateRequired:!0}]),o.setByIndices(...h)};return{viewBlockKey:"SettingBlockKeySettingPaneQueryItem_"+t,viewBlockType:"SettingBlockTypeSettingPane",viewBlockState:{configId:t,settingStage:""},getViewBlockTitle:()=>r("setQuery"),getViewBlockData:({currentViewBlock:e})=>({getPanelHeaderProps:()=>({actions:[{name:"tip",label:r("openTip"),className:"action-tip",icon:Ke.iconTipBulb,onClick:()=>Ye(void 0,void 0,void 0,(function*(){return yield p(()=>i.state.mainViewBlock.viewBlockState.userResourceQueryWidget["query-item-arguments-tip"]=!0)}))},{name:"close",label:r("close"),className:"action-close",icon:Ke.iconClose12,onClick:()=>o()}].filter((t,i)=>0!==i||!e.viewBlockState.settingStage&&!!n("useDataSource").getByIndex(0))})}),subViewBlocks:[{viewBlockKey:"SettingBlockKeySettingContentQueryItemMain",viewBlockType:"SettingBlockTypeSettingContent",isViewBlockRenderable:({topViewBlock:e})=>!e.viewBlockState.settingStage,subViewBlocks:[{viewBlockKey:"SettingBlockKeySectionData",viewBlockType:"SettingBlockTypeSettingSection",getViewBlockTitle:()=>r("data"),subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldData",viewBlockType:"SettingBlockTypeFieldDataSource",getViewBlockData:()=>({valueMan:n("useDataSource"),getDssProps:()=>({_dsTypes:[a.AllDataSourceTypes.FeatureLayer,a.AllDataSourceTypes.SceneLayer],onChange:e=>{var o;(o=(null==e?void 0:e[0])||null)&&s.DataSourceManager.getInstance().createDataSourceByUseDataSource(Object(s.Immutable)(o)).then(e=>{const t=N(e);return t||Promise.reject(Error("")),t}).then(e=>{const s="newQueryId"===t?(""+Math.random()).slice(2):t,a={configId:s,icon:null,name:null==e?void 0:e.getLabel(),displayLabel:!0,useDataSource:o,outputDataSourceId:`${i.props.id}_output_${s}`,sqlExprObj:null,spatialMapWidgetIds:[],spatialFilterTypes:[],spatialInteractiveCreateToolTypes:[u.a.Point,u.a.Polyline,u.a.Polygon,u.a.Rectangle,u.a.Circle],spatialInteractiveEnableBuffer:!1,spatialInteractiveBufferDistance:0,spatialInteractiveBufferUnit:u.i.Meters,spatialRelations:[u.g.Intersect],spatialRelationUseDataSources:[],spatialRelationEnableSelectTool:!1,spatialRelationEnableBuffer:!1,spatialRelationBufferDistance:0,spatialRelationBufferUnit:u.i.Meters,resultListDirection:u.c.Vertical,resultPagingStyle:u.d.MultiPage,resultSymbolType:u.h.DefaultSymbol,resultCustomSymbol:{angle:0,color:[255,255,255,255],outline:{color:[255,255,255,255],style:"esriSLSSolid",type:"esriSLS",width:1},size:6,style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0},resultAllowChangeSymbol:!1,allowExport:!1,sortOptions:[],itemSizeMap:{arrangementHorizontalPopper:{minSize:{width:300,height:300},defaultSize:{width:360,height:480}}}},l=n(...Object.keys(a)),r=Object.values(a).map((e,t)=>[t,e,{dsUpdateRequired:!0}]);l.setByIndices(...r)})},widgetId:i.props.id})})}]},{viewBlockKey:"SettingBlockKeySectionLabel",viewBlockType:"SettingBlockTypeSettingSection",isViewBlockRenderable:()=>!!n("useDataSource").getByIndex(0),getViewBlockTitle:()=>r("label"),subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldLabel",viewBlockType:"SettingBlockTypeFieldTextInput",getViewBlockData:()=>({valueMan:n("name"),getTextInputProps:()=>({onChange:e=>n("name").setByIndices([0,e.target.value,{dsUpdateRequired:!0}])})})},{viewBlockKey:"SettingBlockKeyFieldDisplayLabel",viewBlockType:"SettingBlockTypeFieldSwitch",isViewBlockRenderable:()=>i.props.config.queryItems.length<2&&i.props.config.arrangeType!==u.e.Inline,getViewBlockTitle:()=>r("displayLabel"),getViewBlockData:()=>({valueMan:n("displayLabel")})}]},{viewBlockKey:"SettingBlockKeySectionIcon",viewBlockType:"SettingBlockTypeSettingSection",isViewBlockRenderable:()=>!!n("useDataSource").getByIndex(0),getViewBlockTitle:()=>{return Object(s.jsx)("div",{className:"w-100 d-flex justify-content-between"},Object(s.jsx)("span",{className:"pt-1 mr-2 line-height-1 text-truncate"},r("icon")),(e=n("icon"),Object(s.jsx)(T.IconPicker,{buttonOptions:{type:"default",size:"sm"},icon:e.getByIndex(0)||null,onChange:t=>e.setByIndices([0,t]),configurableOption:"none"})));var e}},{viewBlockKey:"SettingBlockKeySectionTipQueryArguments",viewBlockType:"SettingBlockTypeSettingSection",isViewBlockRenderable:()=>!!n("useDataSource").getByIndex(0)&&!1!==i.state.mainViewBlock.viewBlockState.userResourceQueryWidget["query-item-arguments-tip"],getViewBlockTitle:()=>Object(s.jsx)(m.a,{isModal:!1,hasFooter:!1,title:r("configureQuery"),bodyContent:r("hintQueryArgumentsSetting"),panelVisible:!0,setPanelVisible:()=>Ye(void 0,void 0,void 0,(function*(){return yield p(()=>{l("query-item-arguments-tip",!1),i.state.mainViewBlock.viewBlockState.userResourceQueryWidget["query-item-arguments-tip"]=!1})})),getI18nMessage:i.getI18nMessage})},{viewBlockKey:"SettingBlockKeySectionAttributeFilter",viewBlockType:"SettingBlockTypeSettingSectionWithSwitch",viewBlockState:{},isViewBlockRenderable:()=>!!n("useDataSource").getByIndex(0),getViewBlockTitle:()=>r("attributeFilter"),getViewBlockData:()=>{var e;return{enabled:null===(e=n("useAttributeFilter").getByIndex(0))||void 0===e||e,setEnabled:e=>{n("useAttributeFilter").setByIndices([0,e])}}},subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldAttributeFilterLabel",viewBlockType:"SettingBlockTypeFieldTextInput",getViewBlockTitle:()=>r("label"),getViewBlockData:()=>({fieldStyle:{rowMode:"TwoRow"},valueMan:n("attributeFilterLabel"),defaultValue:r("attributeFilter"),getTextInputProps:()=>({onChange:e=>n("attributeFilterLabel").setByIndices([0,e.target.value,{removeMatchingDefaultValue:!0,defaultValue:r("attributeFilter")}])})})},{viewBlockKey:"SettingBlockKeyFieldSQLExpressionBuilder",viewBlockType:"SettingBlockTypeFieldSQLExpressionBuilder",getViewBlockTitle:()=>r("addSQLExpressionsToYourQuery"),getViewBlockData:()=>({valueMan:n("useDataSource","sqlExprObj"),getI18nMessage:r,getPopupProps:()=>({onChange:e=>d({sqlExprObj:e})})})}]},{viewBlockKey:"SettingBlockKeySectionSpatialFilter",viewBlockType:"SettingBlockTypeSettingSectionWithSwitch",viewBlockState:{},isViewBlockRenderable:()=>{const e=n("useDataSource").getByIndex(0),t=s.DataSourceManager.getInstance().getDataSource(null==e?void 0:e.mainDataSourceId);return!(!e||(null==t?void 0:t.type)!==a.AllDataSourceTypes.SceneLayer&&!(null==t?void 0:t.getGeometryType()))},getViewBlockTitle:()=>r("spatialFilter"),getViewBlockData:()=>{var e;return{enabled:null===(e=n("useSpatialFilter").getByIndex(0))||void 0===e||e,setEnabled:e=>{n("useSpatialFilter").setByIndices([0,e])}}},subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldSpatialFilterLabel",viewBlockType:"SettingBlockTypeFieldTextInput",getViewBlockTitle:()=>r("label"),getViewBlockData:()=>({fieldStyle:{rowMode:"TwoRow"},valueMan:n("spatialFilterLabel"),defaultValue:r("spatialFilter"),getTextInputProps:()=>({onChange:e=>n("spatialFilterLabel").setByIndices([0,e.target.value,{removeMatchingDefaultValue:!0,defaultValue:r("spatialFilter")}])})})},{viewBlockKey:"SettingBlockKeyFieldMapSelect",viewBlockType:"SettingBlockTypeFieldMapSelect",getViewBlockTitle:()=>r("chooseAMapWidget"),getViewBlockData:()=>({fieldStyle:{rowMode:"TwoRow"},valueMan:n("spatialMapWidgetIds")})},{viewBlockKey:"SettingBlockKeyFieldFilterTypes",viewBlockType:"SettingBlockTypeFieldCheckInputGroup",getViewBlockTitle:()=>r("typesOfFilter"),getViewBlockData:({topViewBlock:e})=>({valueMan:n("spatialFilterTypes"),itemChildren:Object.values(u.f).map(e=>{var t;return{itemKey:e,itemHidden:!(null===(t=n("spatialMapWidgetIds").getByIndex(0))||void 0===t?void 0:t.length)&&[u.f.CurrentMapExtent,u.f.InteractiveDrawMode].includes(e)}}),getLabelContent:e=>r("spatialFilterType_"+e),getAdditionalContent:(t,{checked:o})=>[u.f.InteractiveDrawMode].includes(t)&&o&&Object(s.jsx)(c.Button,{size:"sm",type:"tertiary",icon:!0,onClick:()=>Ye(void 0,void 0,void 0,(function*(){return yield p(()=>{e.viewBlockState.settingStage=t})}))},Object(s.jsx)(c.Icon,{size:12,color:i.props.theme.colors.black,icon:Ke.arrowRight}))})}]},{viewBlockKey:"SettingBlockKeySectionResults",viewBlockType:"SettingBlockTypeSettingSection",viewBlockState:{},isViewBlockRenderable:()=>!!n("useDataSource").getByIndex(0),getViewBlockTitle:()=>r("results"),getViewBlockData:()=>({contentCollapsable:!0,setContentCollapsed:e=>Ye(void 0,void 0,void 0,(function*(){return yield p(e)}))}),subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldResultsLabel",viewBlockType:"SettingBlockTypeFieldTextInput",getViewBlockTitle:()=>r("label"),getViewBlockData:()=>({fieldStyle:{rowMode:"TwoRow"},valueMan:n("resultsLabel"),defaultValue:r("results"),getTextInputProps:()=>({onChange:e=>n("resultsLabel").setByIndices([0,e.target.value,{removeMatchingDefaultValue:!0,defaultValue:r("results")}])})})},{viewBlockKey:"SettingBlockKeyFieldListDirection",viewBlockType:"SettingBlockTypeFieldDirection",getViewBlockTitle:()=>r("listDirection"),getViewBlockData:()=>({valueMan:n("resultListDirection")})},{viewBlockKey:"SettingBlockKeyFieldFields",viewBlockType:"SettingBlockTypeFieldCustom",getViewBlockTitle:()=>r("fields"),getViewBlockData:()=>({fieldStyle:{rowMode:"TwoRow"}}),renderViewBlock:({currentViewBlock:e})=>Object(s.jsx)("span",null,r("field_"+u.b.PopupSetting))},{viewBlockKey:"SettingBlockKeyFieldSortSetting",viewBlockType:"SettingBlockTypeFieldSortSetting",getViewBlockTitle:()=>r("sort"),getViewBlockData:()=>({valueMan:n("useDataSource","sortOptions"),onChange:e=>d({sortData:e})})},{viewBlockKey:"SettingBlockKeyFieldSymbolType",viewBlockType:"SettingBlockTypeFieldCheckInputGroup",getViewBlockTitle:()=>r("symbol"),getViewBlockData:({topViewBlock:e})=>({valueMan:n("resultSymbolType"),itemChildren:Object.values(u.h).map(e=>({itemKey:e})),getInputProps:()=>({_inputType:"radio"}),getLabelContent:e=>r("symbolType_"+e),getAdditionalContent:(e,{checked:t})=>e===u.h.CustomSymbol&&t?Object(s.jsx)(Je,{currentSymbol:n("resultCustomSymbol").getByIndex(0),setCurrentSymbol:e=>n("resultCustomSymbol").setByIndices([0,e]),esriModuleMap:i.state.esriModuleMap,intl:i.props.intl}):null})}]}]},{viewBlockKey:"SettingBlockKeySettingContentQueryItemInteractiveDrawMode",viewBlockType:"SettingBlockTypeSettingContent",isViewBlockRenderable:({topViewBlock:e})=>!!n("useDataSource").getByIndex(0)&&u.f.InteractiveDrawMode===e.viewBlockState.settingStage,subViewBlocks:[{viewBlockKey:"SettingBlockKeySectionIntersectNavBack",viewBlockType:"SettingBlockTypeNavBackSection",getViewBlockTitle:()=>r("interactiveDrawMode"),getViewBlockData:({topViewBlock:e})=>({onNavBack:()=>Ye(void 0,void 0,void 0,(function*(){return yield p(()=>{e.viewBlockState.settingStage=""})}))})},{viewBlockKey:"SettingBlockKeySectionInteractiveDrawMode",viewBlockType:"SettingBlockTypeSettingSection",subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldSelectionTools",viewBlockType:"SettingBlockTypeFieldSketchToolsSelect",getViewBlockTitle:()=>r("chooseSelectionTools"),getViewBlockData:()=>({valueMan:n("spatialInteractiveCreateToolTypes"),getI18nMessage:e=>r(e)})},{viewBlockKey:"SettingBlockKeyFieldInteractiveBufferSetting",viewBlockType:"SettingBlockTypeFieldsBufferSetting",getViewBlockData:()=>({valueMan:n("spatialInteractiveEnableBuffer","spatialInteractiveBufferDistance","spatialInteractiveBufferUnit"),getI18nMessage:e=>r(e)})}]}]},{viewBlockKey:"SettingBlockKeySettingContentQueryItemSpatialRelationship",viewBlockType:"SettingBlockTypeSettingContent",isViewBlockRenderable:({topViewBlock:e})=>!1,subViewBlocks:[{viewBlockKey:"SettingBlockKeySectionSpatialNavBack",viewBlockType:"SettingBlockTypeNavBackSection",getViewBlockTitle:()=>r("spatialRelationship"),getViewBlockData:({topViewBlock:e})=>({onNavBack:()=>Ye(void 0,void 0,void 0,(function*(){return yield p(()=>{e.viewBlockState.settingStage=""})}))})},{viewBlockKey:"SettingBlockKeySectionSpatialRelationship",viewBlockType:"SettingBlockTypeSettingSection",subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldSpatialRelationship",viewBlockType:"SettingBlockTypeFieldSpatialRelationshipPicker",getViewBlockTitle:()=>r("chooseSpatialRelationshipRules"),getViewBlockData:({currentViewBlock:e})=>({valueMan:n("spatialRelations"),fieldStyle:{rowMode:"TwoRow"},getTextInputProps:()=>({type:"text",readOnly:!0}),getI18nMessage:e=>r(e)})},{viewBlockKey:"SettingBlockKeyFieldLayer",viewBlockType:"SettingBlockTypeFieldDataSource",getViewBlockTitle:()=>r("layer"),getViewBlockData:()=>({valueMan:n("spatialRelationUseDataSources"),getDssProps:()=>({_dsTypes:[a.AllDataSourceTypes.FeatureLayer],_multipleEnabled:!0,widgetId:i.props.id}),getMapThumbProps:()=>({_dsJsons:i.props.dsJsons}),thumbEnabled:!0})},{viewBlockKey:"SettingBlockKeyFieldSelectTool",viewBlockType:"SettingBlockTypeFieldSwitch",isViewBlockRenderable:()=>{var e;return!!(null===(e=n("spatialMapWidgetIds").getByIndex(0))||void 0===e?void 0:e.length)},getViewBlockTitle:()=>r("enableSelectTool"),getViewBlockData:()=>({valueMan:n("spatialRelationEnableSelectTool")})},{viewBlockKey:"SettingBlockKeyFieldSpatialBufferSetting",viewBlockType:"SettingBlockTypeFieldsBufferSetting",getViewBlockData:()=>({valueMan:n("spatialRelationEnableBuffer","spatialRelationBufferDistance","spatialRelationBufferUnit"),getI18nMessage:e=>r(e)})}]}]}]}},{iconMap:Xe,iconPropMap:et}=g(),tt=e=>{const{targetSelf:t,getValueMan:i}=e,{getI18nMessage:o,createSettingPaneQueryItemViewBlock:a}=t,n={viewBlockKey:"SettingBlockKeySectionQueryItem",viewBlockType:"SettingBlockTypeSettingSection",getViewBlockTitle:()=>o("queryItem"),subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldQueryItem",viewBlockType:"SettingBlockTypeCustom",viewBlockState:{},getViewBlockData:()=>({fieldStyle:{rowMode:"MultiRow"}}),renderViewBlock:e=>{const{topViewBlock:a}=e,{config:n}=t.props,d={isItemFocused:(e,i)=>{const{itemJsons:[s]}=i.props;return+t.state.currentQueryItemPanelIndex==+(null==s?void 0:s.itemKey)},overrideItemBlockInfo:({itemBlockInfo:e},t)=>({name:y.TreeItemActionType.RenderOverrideItem,children:[{name:y.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:y.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:y.TreeItemActionType.RenderOverrideItemBody,children:[{name:y.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:y.TreeItemActionType.RenderOverrideItemDragHandle},{name:y.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:y.TreeItemActionType.RenderOverrideItemTitle},{name:y.TreeItemActionType.RenderOverrideItemDetailToggle},{name:y.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})},h=s.React.useRef(null);return Object(s.jsx)("div",{ref:h},Object(s.jsx)(l.a,Object.assign({},e,{currentViewBlock:{viewBlockKey:"SettingBlockKeyFieldNewQuery",viewBlockType:"SettingBlockTypeFieldButton",getViewBlockData:()=>({fieldStyle:{rowMode:"TwoRow"},getButtonProps:()=>({className:"w-100 text-dark set-link-btn",type:"primary",onClick:()=>{t.onToggleQueryItemPanel(t.props.config.queryItems.length)},children:Object(s.jsx)("div",{className:"w-100 px-2 text-truncate"},Object(s.jsx)(c.Icon,{icon:Xe.iconAdd,className:"mr-1",size:14}),o("newQuery"))})})}})),Object(s.jsx)("div",{className:"setting-ui-unit-list"},!!n.queryItems.length&&Object(s.jsx)(y.List,Object.assign({className:"setting-ui-unit-list-exsiting",itemsJson:Array.from(n.queryItems).map((e,i)=>{var s;return{itemStateDetailContent:e,itemKey:""+i,itemStateIcon:{icon:null===(s=e.icon)||void 0===s?void 0:s.svg},itemStateTitle:e.name,itemStateCommands:[{label:o("close"),iconProps:()=>({icon:Xe.iconClose,size:12}),action:({data:e})=>{const{itemJsons:[i]}=e;t.tryRemoveQueryItem(+i.itemKey)}}]}}),dndEnabled:!0,renderOverrideItemDetailToggle:(e,i)=>{var a,n,l;const{itemJsons:r}=i.props,[p]=r,d=null===(n=null===(a=null==p?void 0:p.itemStateDetailContent)||void 0===a?void 0:a.useDataSource)||void 0===n?void 0:n.dataSourceId,h=(null===(l=t.props.useDataSources)||void 0===l?void 0:l.filter(e=>d===e.dataSourceId).length)>0,u=null!=s.DataSourceManager.getInstance().getDataSource(d);return h&&u?"":Object(s.jsx)(c.Alert,{buttonType:"tertiary",form:"tooltip",size:"small",type:"error",text:o("dataSourceCreateError")})},onUpdateItem:(e,t)=>{const{itemJsons:s}=t.props,[,o]=s;i("queryItems").setByIndices([0,o.map(e=>e.itemStateDetailContent),{dsUpdateRequired:!0}])},onClickItemBody:(e,i)=>{const{itemJsons:[s]}=i.props;t.onToggleQueryItemPanel(+s.itemKey)}},d)),n.queryItems.length===t.state.currentQueryItemPanelIndex&&Object(s.jsx)(y.List,Object.assign({className:"setting-ui-unit-list-new",itemsJson:[{icon:et.defaultIconResult,name:"......"}].map((e,i)=>{var s;return{itemKey:""+t.state.currentQueryItemPanelIndex,itemStateIcon:{icon:null===(s=e.icon)||void 0===s?void 0:s.svg},itemStateTitle:e.name,itemStateCommands:[]}}),dndEnabled:!1},d)),!n.queryItems.length&&n.queryItems.length!==t.state.currentQueryItemPanelIndex&&Object(s.jsx)("div",{className:"empty-placeholder w-100"},Object(s.jsx)("div",{className:"empty-placeholder-icon"},Object(s.jsx)(c.Icon,{icon:Xe.iconEmpty,width:48,height:48})),Object(s.jsx)("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:o("noQueryTip",{values:{newQuery:o("newQuery")}})}}))),Object(s.jsx)(p.SidePopper,{disableActivateOverlay:!0,isOpen:t.state.currentQueryItemPanelIndex>=0&&!s.urlUtils.getAppIdPageIdFromUrl().pageId,toggle:()=>t.onToggleQueryItemPanel(t.state.currentQueryItemPanelIndex),position:"right",trigger:null==h?void 0:h.current},((i,o)=>{if(o<0)return null;const n=a.viewBlockState.queryItemViewBlockMap[o===i.length?"newQueryId":i[o].configId];return Object(s.jsx)("div",{className:"setting-query__query-item-panel w-100 h-100",css:Object(r.a)(t.props.theme)},Object(s.jsx)(l.a,Object.assign({},e,{currentViewBlock:n,parentViewBlock:n,topViewBlock:n})))})(n.queryItems,t.state.currentQueryItemPanelIndex)))}}]},d={viewBlockKey:"SettingBlockKeySectionArrangement",viewBlockType:"SettingBlockTypeSettingSection",isViewBlockRenderable:()=>t.props.config.queryItems.length>0,getViewBlockTitle:()=>o("arrangementStyle"),subViewBlocks:[{viewBlockKey:"SettingBlockKeyFieldsArrangementStyle",viewBlockType:"SettingBlockTypeFieldsArrangementStyle",getViewBlockData:()=>({getI18nMessage:o,valueMan:i("arrangeType","arrangeWrap")})}]};return{viewBlockKey:"SettingBlockKeySettingPaneMain",viewBlockType:"SettingBlockTypeSettingPane",viewBlockState:{queryItemViewBlockMap:[{configId:"newQueryId"}].reduce((e,t,i)=>Object.assign(Object.assign({},e),{[t.configId]:a({configId:t.configId})}),{}),userResourceQueryWidget:{"query-item-arguments-tip":!1}},subViewBlocks:[{viewBlockKey:"SettingBlockKeySettingContentMain",viewBlockType:"SettingBlockTypeSettingContent",subViewBlocks:[n,d]}]}};var it=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{r(s.next(e))}catch(e){a(e)}}function l(e){try{r(s.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,l)}r((s=s.apply(e,t||[])).next())}))};class st extends s.React.PureComponent{constructor(e){super(e),this.getI18nMessage=Object(l.c)({intl:this.props.intl,defaultMessages:n}),this.loadUserResource=()=>it(this,void 0,void 0,(function*(){var e;const t=yield o.userServices.initUserResource();if(null==t?void 0:t.success){const t=yield o.userServices.getUserResource();this.state.mainViewBlock.viewBlockState.userResourceQueryWidget=(null===(e=null==t?void 0:t.widgets)||void 0===e?void 0:e.queryWidget)||{},this.setState(({mainViewBlock:e})=>({mainViewBlock:Object.assign({},e)}))}})),this.createSettingPaneQueryItemViewBlock=({configId:e})=>$e({configId:e,targetSelf:this,updateUserServicesQueryWidgetStore:(e,t)=>it(this,void 0,void 0,(function*(){return yield o.userServices.updateUserResource({widgets:{queryWidget:{[e]:t}}})})),onCloseSettingPane:()=>this.onToggleQueryItemPanel(this.state.currentQueryItemPanelIndex),getValueMan:(...t)=>({getByIndex:i=>Object(l.f)([this.props.config.queryItems.find(t=>t.configId===e),t[i]]),setByIndices:(...e)=>this.updateItemValueInQueryItem(...(e||[]).map(([e,...i])=>[t[e],...i]))})}),this.onToggleQueryItemPanel=e=>{this.setState(({currentQueryItemPanelIndex:t})=>({currentQueryItemPanelIndex:e===t?-1:e}))},this.updateWidgetJson=(...e)=>{const[t,...i]=e,s=Object.assign(Object.assign({id:this.props.id},t));this.props.onSettingChange(s,...i)},this.updateConfigForOptions=(...e)=>{let t=null;const i=e.reduce((e,[i,s,o])=>("queryItems"===i&&(null==o?void 0:o.dsUpdateRequired)&&(t=this.getAllDataSources(s)),e.set(i,s)),this.props.config);t?this.updateWidgetJson({config:i,useDataSources:Object.values(t.useDataSourceMap)},t.outputDataSources):this.updateWidgetJson({config:i})},this.tryRemoveQueryItem=e=>{const t=this.props.config.queryItems[e];0===a.dataComponentsUtils.getWidgetsUsingDsOrItsDescendantDss(t.outputDataSourceId,this.props.appConfig.widgets).length?this.doRemoveQueryItem(e,!0):this.setState({showRemoveQueryItemWarning:!0,indexOfQueryItemToRemove:e,dsToRemove:t.outputDataSourceId})},this.beforeRemovingDataSource=()=>{this.doRemoveQueryItem(this.state.indexOfQueryItemToRemove)},this.doRemoveQueryItem=(e,t=!1)=>{const i={dsUpdateRequired:t},s=this.props.config.queryItems.asMutable({deep:!0}),o=s[e];s.splice(e,1),this.setState({currentQueryItemPanelIndex:s.indexOf(o)}),this.updateConfigForOptions(["queryItems",s,i])},this.afterRemovingDataSource=()=>{this.setState({showRemoveQueryItemWarning:!1,indexOfQueryItemToRemove:-1,dsToRemove:null})},this.updateItemValueInQueryItem=(...e)=>{const t={dsUpdateRequired:!1},i=this.props.config.queryItems.asMutable({deep:!0});i[this.state.currentQueryItemPanelIndex]=e.reduce((e,i)=>{const[s,o,a]=i;return e[s]=o,(null==a?void 0:a.dsUpdateRequired)&&(t.dsUpdateRequired=!0),(null==a?void 0:a.removeMatchingDefaultValue)&&(null==a?void 0:a.defaultValue)===o&&delete e[s],e},i[this.state.currentQueryItemPanelIndex]||{configId:(""+Math.random()).slice(2)}),this.updateConfigForOptions(["queryItems",i,t])},this.getAllDataSources=e=>Object(s.Immutable)(e).asMutable({deep:!0}).reduce((e,t)=>{var i,o;[t.useDataSource,...t.spatialRelationUseDataSources].forEach(t=>{const i=t.dataSourceId;e.useDataSourceMap[i]=e.useDataSourceMap[i]||t,e.useDataSourceMap[i].fields=Array.from(new Set([...e.useDataSourceMap[i].fields||[],...t.fields||[]]))});const a=s.DataSourceManager.getInstance().getDataSource(null===(i=t.useDataSource)||void 0===i?void 0:i.dataSourceId);if(a){const i=null===(o=N(a))||void 0===o?void 0:o.getDataSourceJson(),s={id:t.outputDataSourceId,label:this.getI18nMessage("outputDsLabel",{values:{label:""+t.name}}),type:null==i?void 0:i.type,geometryType:null==i?void 0:i.geometryType,url:null==i?void 0:i.url,itemId:null==i?void 0:i.itemId,portalUrl:null==i?void 0:i.portalUrl,originDataSources:[t.useDataSource],layerId:null==i?void 0:i.layerId,isDataInDataSourceInstance:null==i?void 0:i.isDataInDataSourceInstance};e.outputDataSources.push(s)}return e},{useDataSourceMap:{},outputDataSources:[]}),this.hideRemovePopup=()=>{this.setState({showRemoveQueryItemWarning:!1})},this.state={currentQueryItemPanelIndex:-1,self:this,esriModuleMap:{},showRemoveQueryItemWarning:!1,indexOfQueryItemToRemove:-1,dsToRemove:null,mainViewBlock:tt({targetSelf:this,getValueMan:(...e)=>({getByIndex:t=>this.props.config[e[t]],setByIndices:(...t)=>{this.updateConfigForOptions(...(t||[]).map(([t,...i])=>[e[t],...i]))}})})}}static getDerivedStateFromProps(e,t){const i=e.config.queryItems.asMutable().filter(e=>!t.mainViewBlock.viewBlockState.queryItemViewBlockMap[e.configId]);return i.length?(i.forEach(e=>{t.mainViewBlock.viewBlockState.queryItemViewBlockMap[e.configId]=t.self.createSettingPaneQueryItemViewBlock({configId:e.configId})}),{mainViewBlock:Object.assign({},t.mainViewBlock)}):null}componentDidMount(){Object(s.loadArcGISJSAPIModules)(["esri/widgets/Sketch","esri/layers/GraphicsLayer","esri/symbols/support/jsonUtils"]).then(e=>{const[t,i,s]=e;this.setState({esriModuleMap:{SketchClass:t,GraphicsLayer:i,jsonUtils:s}})}),this.loadUserResource().catch(e=>console.error(e))}render(){return Object(s.jsx)("div",{className:"setting-query",css:Object(r.a)(this.props.theme)},Object(s.jsx)("div",{className:"jimu-widget-setting setting-query__setting-content"},Object(s.jsx)(l.a,{currentViewBlock:this.state.mainViewBlock,parentViewBlock:this.state.mainViewBlock,topViewBlock:this.state.mainViewBlock,getViewBlockScenarios:j,associatedData:{targetComponent:this}})),Object(s.jsx)(a.DataSourceRemoveWarningPopup,{dataSourceId:this.state.dsToRemove,isOpen:this.state.showRemoveQueryItemWarning,toggle:this.hideRemovePopup,reason:a.DataSourceRemoveWaringReason.DataSourceRemoved,afterRemoving:this.afterRemovingDataSource,beforeRemoving:this.beforeRemovingDataSource}))}}st.mapExtraStateProps=(e,t)=>({dsJsons:e.appStateInBuilder.appConfig.dataSources,appConfig:e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig,appTheme:e&&e.appStateInBuilder&&e.appStateInBuilder.theme})},50:function(e,t){e.exports=d},51:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},60:function(e,t){e.exports=h},62:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i(0);function o(e){return s.css`
    .jimu-rtl & {
      .setting-query__setting-block-type-setting-pane {
        .setting-query__setting-block-key-field-arrangement-type,
        .setting-query__setting-block-key-field-filter-types,
        .setting-query__setting-block-type-nav-back-section {
          button.jimu-btn {
            transform: scaleX(-1);
          }
        }
      }
      .ui-unit-nav-line {
        button.jimu-btn {
          transform: scaleX(-1);
        }
      }
    }

    .expand-mobile-panel & {
      &.runtime-query__runtime-block-type-query-board {
        padding: .5rem;
      }
    }

    &.runtime-query {
      .runtime-query__widget-popper {
      }
      .runtime-query__widget-static {
        width: 100%;
        height: 100%;
        overflow: auto;
      }
    }
    &.runtime-query__runtime-block-type-query-board {
      display: flex;
      flex-flow: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      padding: 1rem;

      &.runtime-query_arrange-type-popper {
        min-width: 300px;
        max-width: 800px;
      }

      &.runtime-query_arrange-type-inline {
        &.runtime-query_arrange-wrap-true {
          .runtime-query__query-list {
            flex-wrap: wrap;
          }
        }
        .runtime-query__query-list {
          flex-direction: row;
          .runtime-query__query-list-item {
            align-items: center;
            margin: .25rem;
            .ui-unit-entity-status_type-icon {
              margin-left: .5rem;
              .jimu-icon {
                margin-right: 0;
              }
            }
          }
        }
      }

      .runtime-query__runtime-block-type-query-board {
        padding: 0;
      }
      .runtime-query__runtime-block-type-query-stage {
        position: relative;
        display: flex;
        flex-flow: column;
        flex: 1;
        overflow: auto;
        .runtime-query__runtime-block-key-spatial-filter {
          .ui-unit-entity-status {
            padding-top: .5rem;
          }
        }
        .runtime-query__runtime-block-key-interactive-draw {
          display: flex;
        }
      }
      .ui-unit-form-action-bar {
        align-items: flex-end;
        padding: .25rem 0;
        .ui-unit-button {
          font-weight: 500;
        }
        .ui-unit-button_clear-results {
          font-size: .8125rem;
          padding: 0 .5rem;
        }
      }
      .ui-unit-nav-line {
        font-weight: 500;
        font-size: .875rem;
        padding: .25rem 0;
      }
      .ui-unit-title-text-group {
        display: flex;
        flex: 1;
        justify-content: space-between;
      }
      .runtime-query__query-list {
        display: flex;
        flex-flow: column;
        .runtime-query__query-list-item {
          display: flex;
        }
      }
      .runtime-query__runtime-block-type-form-line {
        padding: .25rem 0;
        .runtime-ui-unit-form-line__title {
          font-weight: 500;
          font-size: .875rem;
          padding: .25rem 0;
        }
      }
      .runtime-query__runtime-block-type-form-questions {
        flex: 1;
        padding: .5rem 0;
      }
      .runtime-query__query-result-info {
      }
      .runtime-query__query-result-list-container {
        display: flex;
        flex: 1;
        flex-flow: column;
        overflow: auto;
      }
    }
    &.ui-unit-popper_k-query-item {
      .panel-header {
        display: none;
      }
    }

    .ui-unit-nav-line {
      display: flex;
      width: 100%;
      align-items: center;
      justify-content: space-between;

      &.ui-unit-nav-line_type-back {

        .ui-unit-nav-line-button {
          padding-left: 0;
        }
      }
      &.ui-unit-nav-line_type-enter {
        justify-content: flex-end;
        cursor: pointer;
      }
      &.ui-unit-nav-line_disabled-true {
        cursor: unset;
        .ui-unit-nav-line-button {
          opacity: .2;
        }
      }

      .ui-unit-nav-line-option {
        display: flex;
        .ui-unit-button {
          margin: 0 .25rem;
        }
      }

      .ui-unit-nav-line-title {
        display: flex;
        flex: 1;
        align-items: center;
        padding-right: 0.5rem;
      }

      .ui-unit-icon {
        width: 0.875rem;
        margin-right: 0.25rem;
      }
    }

    .setting-query__setting-block-type-setting-pane {
      width: 100%;
      height: 100%;

      &.setting-query__setting-block-key-setting-pane-main {
        .setting-query__setting-block-key-section-query-item {
          .setting-ui-unit-list {
            margin-top: 1rem;
          }
        }

        .setting-query__setting-block-key-field-arrangement-type {
          margin-top: 10px;
          margin-left: -0.5rem;
          display: flex;
          justify-content: flex-start;
          .jimu-btn {
            margin-left: 0.5rem;
            padding: 0;
            background: ${e.colors.palette.light[200]};
            &.active {
              border: 1px solid ${e.colors.palette.primary[600]};
            }
          }
        }
      }

      .setting-query__setting-block-key-setting-content-query-item-main {
        &.setting-query__setting-block-type-setting-content {
          height: calc(100% - ${s.polished.rem(50)});
          overflow: auto;
          .setting-query__setting-block-key-field-symbol-type {
            label {
              flex: none;
            }
          }
        }
      }

      .setting-ui-unit-header {
        .left-part {
          .jimu-btn {
            border-radius: 50%;
            background: ${e.colors.palette.light[500]};
          }
        }
      }

      .setting-query__setting-block-type-setting-content {

        .setting-query__setting-field-row0:not(.collapse)+.jimu-widget-setting--row {
          margin-top: 0;
        }

        .ui-unit-select, .setting-ui-unit-input {
          flex: 1;
        }

        textarea.setting-ui-unit-input {
          height: 80px;
        }

        .jimu-widget-setting--row-label {
          +.ui-unit-select, +.setting-ui-unit-input {
            flex: 0 0 50%;
          }
        }

        .setting-ui-unit-check-input-item {
          width: 100%;
          display: flex;
          align-items: center;

          .setting-ui-unit-check-input-label {
            flex: 1;
            overflow: hidden;
          }

          .setting-ui-unit-check-input-element, .setting-ui-unit-check-input-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin: .25rem .5rem .25rem 0;
          }
        }

        .setting-ui-unit-tree, .setting-ui-unit-list {
          width: 100%;

          .tree-item {
            justify-content: space-between;
            align-items: center;
            font-size: ${s.polished.rem(13)};

            &.tree-item_level-1 {
            }
            .jimu-checkbox {
              margin-right: .5rem;
            }
          }
        }
      }

      .setting-collapse {
        > .collapse {
          margin-top: 1rem;
        }
      }
    }

    .setting-query__spatial-relationship-dialog {
      width: 400px;
      padding: 10px;
      background-color: ${e.colors.palette.light[300]};

      table {
        .setting-ui-unit-table-col:nth-of-type(1) {
          width: 20%;
        }
        .setting-ui-unit-table-col:nth-of-type(2) {
          width: 40%;
        }
        .setting-ui-unit-table-col:nth-of-type(3) {
          width: 40%;
        }
        .text-content {
          color: ${e.colors.black};
          font-size: 0.875rem;
        }
      }
    }
    .ui-unit-form-action-bar {
      display: flex;
      justify-content: flex-end;
      > .ui-unit-separator {
        flex: 1;
      }
      > * {
        &.first-child {
          margin-left: 0;
        }
        margin-left: 0.5rem;
      }
    }
    .ui-unit-sketch-icon {
      vertical-align: middle;
      padding-right: .5rem;
    }
    .empty-placeholder {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      flex-flow: column;
      align-items: center;
      padding: 2rem;
      .empty-placeholder-text {
        color: ${e.colors.palette.dark[500]};
        font-size: ${s.polished.rem(14)};
        margin-top: 16px;
        text-align: center;
      }
      .empty-placeholder-icon {
        color: ${e.colors.palette.dark[200]};
      }
    }
  `}},66:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.637 15.866L30.951 27.18a2.667 2.667 0 01-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 01.781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 014.552.781l11.314 11.314L27.18.781a2.667 2.667 0 013.771 3.771L19.637 15.866z"></path></svg>'},69:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 8a.522.522 0 01-.516.527H3.976L7.473 12.1a.535.535 0 010 .746.508.508 0 01-.73 0L2 8l4.743-4.846a.508.508 0 01.73 0 .535.535 0 010 .746L3.976 7.473h9.508c.285 0 .516.236.516.527z" fill="#000" fill-rule="nonzero"></path></svg>'},71:function(e,t){e.exports='<svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M35.477 22.045c-.53-.142-.844-.686-.74-1.226.653-3.414.13-7.07-1.744-10.316-4.142-7.175-13.316-9.633-20.49-5.49-7.175 4.142-9.633 13.315-5.49 20.49a14.944 14.944 0 008.24 6.728c.526.176.848.723.704 1.258-.142.531-.688.85-1.21.681a16.938 16.938 0 01-9.467-7.667C.586 18.372 3.372 7.975 11.503 3.28c8.13-4.694 18.528-1.908 23.222 6.223a16.936 16.936 0 011.95 11.823c-.108.543-.662.863-1.198.72zm-5.8-1.554c-.529-.142-.84-.683-.763-1.225a8.961 8.961 0 00-1.117-5.763 9 9 0 10-10.989 12.914c.52.197.845.743.701 1.28-.142.53-.686.85-1.202.667a10.957 10.957 0 01-5.83-4.861c-3.038-5.261-1.235-11.989 4.026-15.026 5.261-3.038 11.988-1.235 15.026 4.026a10.954 10.954 0 011.332 7.262c-.09.55-.646.87-1.183.726zM43.78 35.583l-12.512 1.648-7.682 10.011c-.564.736-1.738.375-1.792-.55L20.24 19.918a1 1 0 011.548-.893l22.41 14.731c.774.51.5 1.706-.42 1.827zm-14.099.43l-6.046 7.88-1.282-22.104 18.501 12.162-9.847 1.297a2 2 0 00-1.326.765z" fill="#000"></path></svg>'},79:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 110 1.5h-6.5v6.5a.75.75 0 11-1.5 0v-6.5H.75a.75.75 0 110-1.5h6.5V.75A.75.75 0 018 0z" fill="#000" fill-rule="evenodd"></path></svg>'},90:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.185 0c.105 0 .195.118.232.24l.013.062.245 1.567c.294.145.588.29.85.465l.19.138 1.53-.603c.154-.05.264-.016.332.031l.036.03 1.224 2.11c.051.1.06.201-.01.302l-.05.06-1.286 1.025c.061.181.061.362.061.603 0 .181-.034.328-.052.467l-.01.136 1.409.965c.105.052.12.192.083.307l-.022.055-1.224 2.11c-.053.104-.195.163-.312.14l-.056-.019-1.53-.603a4.796 4.796 0 01-.82.494l-.22.109-.245 1.568c0 .103-.135.207-.25.234L7.246 12H4.798c-.157 0-.27-.089-.298-.19l-.253-1.619c-.293-.145-.587-.29-.85-.465l-.19-.138-1.53.603c-.153.05-.264.017-.332-.03l-.036-.03L.085 8.02c-.05-.101-.06-.202.01-.302l.051-.06 1.286-1.026c-.061-.18-.061-.362-.061-.603 0-.18.034-.328.051-.466l.01-.137-1.286-.965c-.104-.103-.164-.25-.14-.329L1.247 1.99c.102-.1.204-.16.342-.141l.087.02 1.469.603.419-.281c.135-.09.268-.17.407-.236l.214-.086.245-1.628c0-.103.135-.207.25-.234L4.738 0h2.448zm-.658 1h-1.2l-.243 1.627-.586.192a1.42 1.42 0 00-.3.154l-.503.335-.441.29-1.439-.593-.59 1.017 1.207.905v.5c0 .088-.003.147-.013.228l-.044.31a.577.577 0 00-.004.065l.005.26.005.027.223.66L1.258 8.05l.581 1.001 1.536-.604.45.356c.162.126.334.226.712.416l.618.304.23 1.476h1.274l.23-1.476.751-.371c.206-.106.342-.182.453-.258l.126-.091.451-.356 1.506.595.587-1.01-1.272-.872v-.607l.009-.117.048-.341.003-.035v-.18l-.003-.098-.004-.034-.225-.665 1.345-1.073-.581-1.002-1.535.605-.451-.355-.126-.092a5.312 5.312 0 00-.59-.326l-.614-.303L6.527 1zM6 3.75a2.25 2.25 0 110 4.5 2.25 2.25 0 010-4.5zm0 1a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z" fill="#000" fill-rule="nonzero"></path></svg>'},95:function(e,t){e.exports='<svg viewBox="0 0 9 5" xmlns="http://www.w3.org/2000/svg"><path d="M4.128 4.587L.751.834A.5.5 0 011.123 0h6.754a.5.5 0 01.372.834L4.872 4.587a.5.5 0 01-.744 0z" fill="#000" fill-rule="evenodd"></path></svg>'}}))}}}));