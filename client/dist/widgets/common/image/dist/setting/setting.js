System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/expression-builder","jimu-ui/advanced/resource-selector"],(function(e){var t,i,s,o,n,a;return{setters:[function(e){t=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){n=e},function(e){a=e}],execute:function(){e(function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=495)}({0:function(e,i){e.exports=t},1:function(e,t){e.exports=i},138:function(e,t,i){var s={"./circle.svg":139,"./hexagon.svg":140,"./oval.svg":141,"./pentagon.svg":142,"./rectangle.svg":143,"./rhombus.svg":144,"./triangle.svg":145};function o(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id=138},139:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M28 14c0 7.732-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0s14 6.268 14 14z"></path></svg>'},14:function(e,t){e.exports=o},140:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14.124 0l12.124 7v14l-12.124 7L2 21V7z"></path></svg>'},141:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M28 14c0 5.523-6.268 10-14 10S0 19.523 0 14 6.268 4 14 4s14 4.477 14 10z"></path></svg>'},142:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 1l14 10.172-5.348 16.458H5.347L-.001 11.172z"></path></svg>'},143:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M0 0v28h28V0H0z"></path></svg>'},144:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 0l14 14-14 14L0 14z"></path></svg>'},145:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 0l14 28H0z"></path></svg>'},2:function(e,t){e.exports=s},23:function(e,t,i){"use strict";var s,o;i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return o})),function(e){e.ByUpload="BYUPLOAD",e.ByStaticUrl="BYSTATICURL",e.ByDynamicUrl="BYDYNAMICURL"}(s||(s={})),function(e){e.Expression="EXPRESSION",e.Attachment="ATTACHMENT",e.Symbol="SYMBOL"}(o||(o={}))},33:function(e,t){e.exports=n},345:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDIwIDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNCAoNjczNzgpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5SZWN0YW5nbGU8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJTeW1ib2xzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNvbmZpZ3VyZS1MaW5rIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjUuMDAwMDAwLCAtNjQ4LjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjRTZFQkYwIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMDAwMDAwLCA2MTEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDI5LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iNS41IiB5PSI4LjUiIHdpZHRoPSIxOSIgaGVpZ2h0PSIxMyI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},346:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNCAoNjczNzgpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5SZWN0YW5nbGU8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJTeW1ib2xzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNvbmZpZ3VyZS1MaW5rIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjUuMDAwMDAwLCAtNjQ1LjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjRTZFQkYwIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMDAwMDAwLCA2MTEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDI5LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iNDUuNSIgeT0iNS41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHJ4PSI2Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},347:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIycHgiIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDIyIDE4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNCAoNjczNzgpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5PdmFsPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0iU3ltYm9scyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJDb25maWd1cmUtTGluayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwNC4wMDAwMDAsIC02NDYuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNFNkVCRjAiPg0KICAgICAgICAgICAgPGcgaWQ9IlNldHRpbmdQYW5lbCI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMC4wMDAwMDAsIDYxMS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgMjkuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZWxsaXBzZSBpZD0iT3ZhbCIgY3g9Ijk1IiBjeT0iMTUiIHJ4PSIxMCIgcnk9IjgiPjwvZWxsaXBzZT4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},38:function(e,t,i){"use strict";t.a={imageSource:"Image source",imageNoneSource:"None",staticSource:"Static",dynamicSource:"Dynamic",imageSet:"Select an image",toolTip:"Tooltip",altText:"Alt text",imageSetLink:"Set link",imageShape:"Shape",setLinkForImage:"Set link",imagePosition:"Position",imageFit:"Fit",imageFill:"Fill",imageAttachment:"Attachment",imageCustom:"Custom",imageAttachmentName:"Attachment name",imageSymbol:"Symbol",imageSymbolScale:"Symbol scale",imagerectangle:"Rectangle/Square",imagecircle:"Oval/Circle",imagehexagon:"Hexagon",imagepentagon:"Pentagon",imagerhombus:"Rhombus",imagetriangle:"Triangle",imageShapeSettings:"Shape settings",imageUploadBlankStatus:'Click the "{ButtonString}" button to select an image from your device.'}},44:function(e,t){e.exports=a},495:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return I}));var s=i(0),o=i(2),n=i(1),a=i(44),p=i(14),r=i(23);const c={shapes:{square:{borderRadius:{number:[0],unit:"px"},thumbUrl:i(345)},capsule:{borderRadius:{number:[10,10,10,10],unit:"%"},thumbUrl:i(346)},round:{borderRadius:{number:[50,50,50,50],unit:"%"},thumbUrl:i(347)}}};var l=i(38);class g extends s.React.PureComponent{constructor(e){super(e),this.cropShapeList=["rectangle","circle","hexagon","pentagon","rhombus","triangle"],this.shapeClick=(e,t)=>{if(this.props.cropParam&&this.props.cropParam.cropShape===this.cropShapeList[t])return;const i=e.currentTarget.getElementsByTagName("svg")&&e.currentTarget.getElementsByTagName("svg")[0];if(i){let e=this.props.cropParam;e||(e=Object(s.Immutable)({})),e=e.set("svgViewBox",i.getAttribute("viewBox")),e=e.set("svgPath",i.getElementsByTagName("path")[0].getAttribute("d")),e=e.set("cropShape",this.cropShapeList[t]),this.props.onShapeChoosed&&this.props.onShapeChoosed(e)}}}getStyle(){const e=this.props.theme;return s.css`
      .widget-image-chooseshape-item {
        flex: 1;
        cursor: pointer;

        svg {
          fill: ${e.colors.black};
        }
      }

      .widget-image-chooseshape-bg {
        background-color: ${e.colors.palette.secondary[200]};
      }
      `}render(){return Object(s.jsx)("div",{className:"w-100 d-flex",css:this.getStyle()},this.cropShapeList.map((e,t)=>{const o=i(138)(`./${e}.svg`);return"rectangle"!==e||this.props.cropParam?Object(s.jsx)("div",{key:t,className:Object(s.classNames)("d-flex justify-content-center align-items-center widget-image-chooseshape-bg widget-image-chooseshape-item",{"border-selected":this.props.cropParam&&this.props.cropParam.cropShape===e}),style:{height:"30px",width:"30px",marginRight:"3px"},onClick:e=>this.shapeClick(e,t),title:this.props.intl.formatMessage({id:"image"+e,defaultMessage:l.a["image"+e]})},Object(s.jsx)(n.Icon,{width:12,height:12,icon:o})):Object(s.jsx)("div",{key:t,className:Object(s.classNames)("d-flex justify-content-center align-items-center widget-image-chooseshape-bg widget-image-chooseshape-item border-selected"),style:{height:"30px",width:"30px",marginRight:"3px"},onClick:e=>this.shapeClick(e,t),title:this.props.intl.formatMessage({id:"imagerectangle",defaultMessage:l.a.imagerectangle})},Object(s.jsx)(n.Icon,{width:12,height:12,icon:o}))}))}}var h=i(33);const u=Object(s.Immutable)([h.ExpressionInputType.Static,h.ExpressionInputType.Attribute,h.ExpressionInputType.Statistics,h.ExpressionInputType.Expression]);class m extends s.React.PureComponent{constructor(e){super(e),this.getRenderContent=()=>this.props.useDataSourcesEnabled?this.props.imgSourceType!==r.b.ByDynamicUrl||this.props.dynamicUrlType!==r.a.Attachment&&this.props.dynamicUrlType!==r.a.Symbol?s.React.createElement("div",{style:{width:"100%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onToolTipExpChange,openExpPopup:this.props.openToolTipPopup,expression:this.props.toolTipExpression,isExpPopupOpen:this.props.isToolTipPopupOpen,closeExpPopup:this.props.closeToolTipPopup,types:u,widgetId:this.props.widgetId})):this.props.dynamicUrlType===r.a.Attachment?s.React.createElement("div",{className:"w-100"},s.React.createElement(o.SettingRow,{flow:"wrap"},s.React.createElement("div",{className:"align-items-center d-flex"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onToolTipWithAttachmentNameChange(!1),checked:!this.props.toolTipWithAttachmentName}),s.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onToolTipWithAttachmentNameChange(!1)},this.props.intl.formatMessage({id:"imageCustom",defaultMessage:l.a.imageCustom})))),!this.props.toolTipWithAttachmentName&&s.React.createElement(o.SettingRow,null,s.React.createElement("div",{className:"w-100 d-flex justify-content-end"},s.React.createElement("div",{style:{width:"90%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onToolTipExpChange,openExpPopup:this.props.openToolTipPopup,expression:this.props.toolTipExpression,isExpPopupOpen:this.props.isToolTipPopupOpen,closeExpPopup:this.props.closeToolTipPopup,types:u,widgetId:this.props.widgetId})))),s.React.createElement(o.SettingRow,null,s.React.createElement("div",{className:"align-items-center d-flex"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onToolTipWithAttachmentNameChange(!0),checked:this.props.toolTipWithAttachmentName}),s.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onToolTipWithAttachmentNameChange(!0)},this.props.intl.formatMessage({id:"imageAttachmentName",defaultMessage:l.a.imageAttachmentName}))))):this.props.dynamicUrlType===r.a.Symbol?s.React.createElement("div",{style:{width:"100%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onToolTipExpChange,openExpPopup:this.props.openToolTipPopup,expression:this.props.toolTipExpression,isExpPopupOpen:this.props.isToolTipPopupOpen,closeExpPopup:this.props.closeToolTipPopup,types:u,widgetId:this.props.widgetId})):void 0:s.React.createElement("div",{style:{width:"100%",position:"relative"}},s.React.createElement(n.TextInput,{size:"sm",style:{width:"100%"},className:"float-right",value:this.props.toolTipText,onChange:e=>{this.props.onToolTipTextInputChange(e.target.value)},onBlur:()=>{this.props.toolTipConfigChange()},onKeyUp:()=>{this.props.toolTipConfigChange()}}))}render(){return s.React.createElement(o.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"toolTip",defaultMessage:l.a.toolTip})},this.getRenderContent())}}const d=Object(s.Immutable)([h.ExpressionInputType.Static,h.ExpressionInputType.Attribute,h.ExpressionInputType.Statistics,h.ExpressionInputType.Expression]);class f extends s.React.PureComponent{constructor(e){super(e),this.getRenderContent=()=>this.props.useDataSourcesEnabled?this.props.imgSourceType!==r.b.ByDynamicUrl||this.props.dynamicUrlType!==r.a.Attachment&&this.props.dynamicUrlType!==r.a.Symbol?s.React.createElement("div",{style:{width:"100%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onAltTextExpChange,openExpPopup:this.props.openAltTextPopup,expression:this.props.altTextExpression,isExpPopupOpen:this.props.isAltTextPopupOpen,closeExpPopup:this.props.closeAltTextPopup,types:d,widgetId:this.props.widgetId})):this.props.dynamicUrlType===r.a.Attachment?s.React.createElement("div",{className:"w-100"},s.React.createElement(o.SettingRow,{flow:"wrap"},s.React.createElement("div",{className:"align-items-center d-flex"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onAltTextWithAttachmentNameChange(!1),checked:!this.props.altTextWithAttachmentName}),s.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onAltTextWithAttachmentNameChange(!1)},this.props.intl.formatMessage({id:"imageCustom",defaultMessage:l.a.imageCustom})))),!this.props.altTextWithAttachmentName&&s.React.createElement(o.SettingRow,null,s.React.createElement("div",{className:"w-100 d-flex justify-content-end"},s.React.createElement("div",{style:{width:"90%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onAltTextExpChange,openExpPopup:this.props.openAltTextPopup,expression:this.props.altTextExpression,isExpPopupOpen:this.props.isAltTextPopupOpen,closeExpPopup:this.props.closeAltTextPopup,types:d,widgetId:this.props.widgetId})))),s.React.createElement(o.SettingRow,null,s.React.createElement("div",{className:"align-items-center d-flex"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onAltTextWithAttachmentNameChange(!0),checked:this.props.altTextWithAttachmentName}),s.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onAltTextWithAttachmentNameChange(!0)},this.props.intl.formatMessage({id:"imageAttachmentName",defaultMessage:l.a.imageAttachmentName}))))):this.props.dynamicUrlType===r.a.Symbol?s.React.createElement("div",{style:{width:"100%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onAltTextExpChange,openExpPopup:this.props.openAltTextPopup,expression:this.props.altTextExpression,isExpPopupOpen:this.props.isAltTextPopupOpen,closeExpPopup:this.props.closeAltTextPopup,types:d,widgetId:this.props.widgetId})):void 0:s.React.createElement("div",{style:{width:"100%",position:"relative"}},s.React.createElement(n.TextInput,{size:"sm",style:{width:"100%"},className:"float-right",value:this.props.altTextText,onChange:e=>{this.props.onAltTextTextInputChange(e.target.value)},onBlur:()=>{this.props.altTextConfigChange()},onKeyUp:()=>{this.props.altTextConfigChange()}}))}render(){return s.React.createElement(o.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"altText",defaultMessage:l.a.altText})},this.getRenderContent())}}const S=Object(s.Immutable)([h.ExpressionInputType.Attribute,h.ExpressionInputType.Expression]);class C extends s.React.PureComponent{constructor(e){super(e),this.getRenderContent=e=>{const t=e&&e.supportAttachment(),i=e&&e.supportSymbol();return e?((!t&&this.props.dynamicUrlType===r.a.Attachment||!i&&this.props.dynamicUrlType===r.a.Symbol)&&this.props.onTypeNoSupportChange&&this.props.onTypeNoSupportChange(),i||t?s.React.createElement("div",{className:"w-100"},this.getExpressionSettingWithRadio(),t&&s.React.createElement("div",{className:"w-100 d-flex justify-content-end mt-3","data-testid":"dynamicurl-attachment"},s.React.createElement("div",{className:"w-100"},s.React.createElement(o.SettingRow,{flow:"wrap"},s.React.createElement("div",{className:"d-flex justify-content-between w-100"},s.React.createElement("div",{className:"align-items-center d-flex"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onDynamicUrlTypeChanged(r.a.Attachment),checked:this.props.dynamicUrlType===r.a.Attachment}),s.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onDynamicUrlTypeChanged(r.a.Attachment)},this.props.intl.formatMessage({id:"imageAttachment",defaultMessage:l.a.imageAttachment})))),this.props.dynamicUrlType===r.a.Attachment&&s.React.createElement("div",{className:"d-flex w-100 justify-content-end mt-3"},s.React.createElement("div",{style:{width:"90%",position:"relative"}},s.React.createElement(p.MainDataAndViewSelector,{hideMainDataSourceSelect:!0,widgetId:this.props.widgetId,useDataSources:this.props.useDataSources,selectedUseDataSource:this.props.useDataSourceForMainDataAndViewSelector,onChange:this.props.onSelectedUseDsChangeForAttachment,isSelectedFromRepeatedDataSourceContext:this.props.isSelectedFromRepeatedDataSourceContext,usePopulatedDataView:!0,useSelectionDataView:!0,defaultDataViewPriority:p.DataViewPriority.First})))))),i&&s.React.createElement("div",{className:"w-100 d-flex justify-content-end mt-3"},s.React.createElement("div",{className:"w-100"},s.React.createElement(o.SettingRow,{flow:"wrap"},s.React.createElement("div",{className:"d-flex justify-content-between w-100"},s.React.createElement("div",{className:"align-items-center d-flex"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onDynamicUrlTypeChanged(r.a.Symbol),checked:this.props.dynamicUrlType===r.a.Symbol}),s.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onDynamicUrlTypeChanged(r.a.Symbol)},this.props.intl.formatMessage({id:"imageSymbol",defaultMessage:l.a.imageSymbol})))),this.props.dynamicUrlType===r.a.Symbol&&s.React.createElement("div",{className:"d-flex w-100 justify-content-end mt-3"},s.React.createElement("div",{style:{width:"90%",position:"relative"}},s.React.createElement(p.MainDataAndViewSelector,{hideMainDataSourceSelect:!0,widgetId:this.props.widgetId,useDataSources:this.props.useDataSources,selectedUseDataSource:this.props.useDataSourceForMainDataAndViewSelector,isSelectedFromRepeatedDataSourceContext:this.props.isSelectedFromRepeatedDataSourceContext,onChange:this.props.onSelectedUseDsChangeForSymbol,usePopulatedDataView:!0,useSelectionDataView:!0,defaultDataViewPriority:p.DataViewPriority.First}))))))):this.getExpressionSettingWithoutRadio()):this.getExpressionSettingWithoutRadio()},this.getExpressionSettingWithRadio=()=>s.React.createElement("div",{className:"w-100 d-flex justify-content-end"},s.React.createElement("div",{className:"w-100"},s.React.createElement("div",{className:"d-flex w-100 align-items-center"},s.React.createElement(n.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onDynamicUrlTypeChanged(r.a.Expression),checked:this.props.dynamicUrlType===r.a.Expression||!this.props.dynamicUrlType,"data-testid":"dynamicurl-expression"}),s.React.createElement("label",{className:"m-0 ml-2",onClick:()=>this.props.onDynamicUrlTypeChanged(r.a.Expression)},"URL")),(this.props.srcExpression||this.props.dynamicUrlType===r.a.Expression||!this.props.dynamicUrlType)&&s.React.createElement("div",{className:"d-flex w-100 justify-content-end mt-3"},s.React.createElement("div",{style:{width:"90%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onSrcExpChange,openExpPopup:this.props.openSrcPopup,expression:this.props.srcExpression,isExpPopupOpen:this.props.isSrcPopupOpen,closeExpPopup:this.props.closeSrcPopup,types:S,widgetId:this.props.widgetId}))))),this.getExpressionSettingWithoutRadio=()=>s.React.createElement("div",{className:"w-100 d-flex justify-content-end"},s.React.createElement("div",{className:"w-100"},s.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},s.React.createElement("label",{className:"m-0"},"URL")),this.props.srcExpression||this.props.dynamicUrlType===r.a.Expression||!this.props.dynamicUrlType?s.React.createElement("div",{className:"mt-2",style:{width:"100%",position:"relative"}},s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onSrcExpChange,openExpPopup:this.props.openSrcPopup,expression:this.props.srcExpression,isExpPopupOpen:this.props.isSrcPopupOpen,closeExpPopup:this.props.closeSrcPopup,types:S,widgetId:this.props.widgetId})):s.React.createElement("div",{className:"mt-2",style:{width:"100%",position:"relative"}},s.React.createElement("div",{className:"w-100 h-100",style:{position:"absolute",opacity:.5,backgroundColor:"gray",zIndex:100}}),s.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onSrcExpChange,openExpPopup:this.props.openSrcPopup,expression:this.props.srcExpression,isExpPopupOpen:this.props.isSrcPopupOpen,closeExpPopup:this.props.closeSrcPopup,types:S,widgetId:this.props.widgetId}))))}render(){let e=null;if(this.props.useDataSources)for(let t=0;t<this.props.useDataSources.length;t++)e=this.props.useDataSources[0];return s.React.createElement(o.SettingRow,{flow:"wrap"},e&&s.React.createElement(s.DataSourceComponent,{useDataSource:e},e=>this.getRenderContent(e)),!e&&this.getExpressionSettingWithoutRadio())}}const x=i(82);class I extends s.React.PureComponent{constructor(e){super(e),this.supportedTypes=Object(s.Immutable)([p.AllDataSourceTypes.FeatureLayer,p.AllDataSourceTypes.SceneLayer]),this.onSymbolScaleChanged=null,this.minSymbolScale=.5,this.maxSymbolScale=5,this.SymbolScaleStep=.1,this.linkSettingTrigger=s.React.createRef(),this.settingLinkConfirm=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","linkParam"],e)}),this.setState({isShowLinkSetting:!1})},this.updateStyle=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["styleConfig",e],t)})},this.shapeChange=e=>{let t=Object(s.Immutable)(this.props.config.styleConfig);t=t.set("shape",e),t=t.set("borderRadius",this.props.preDefinedConfigs.shapes[e].borderRadius),this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["styleConfig"],t)})},this.altTextConfigChange=()=>{const e={id:this.props.id,config:this.props.config.setIn(["functionConfig","altText"],this.state.currentAltTextInput).setIn(["functionConfig","altTextExpression"],null),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(e)},this.toolTipConfigChange=()=>{const e={id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTip"],this.state.currentTipInput).setIn(["functionConfig","toolTipExpression"],null),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(e)},this.imgSourceTypeChanged=e=>{let t=Object(s.Immutable)(this.props.config.functionConfig);t=t.set("dynamicUrlType",null),t=t.set("imgSourceType",e),t=t.set("srcExpression",null),t=t.set("imageParam",this.resetImageParam(this.props.config.functionConfig.imageParam)),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",t)})},this.dynamicUrlTypeChanged=e=>{let t=Object(s.Immutable)(this.props.config.functionConfig);t=t.set("dynamicUrlType",e),t=t.set("imgSourceType",r.b.ByDynamicUrl),t=t.set("srcExpression",null),t=t.set("imageParam",this.resetImageParam(this.props.config.functionConfig.imageParam)),t=t.set("altTextWithAttachmentName",null),t=t.set("toolTipWithAttachmentName",null),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",t)})},this.openSrcPopup=()=>{this.setState({isSrcPopupOpen:!0,isAltTextPopupOpen:!1,isToolTipPopupOpen:!1})},this.closeSrcPopup=()=>{this.setState({isSrcPopupOpen:!1})},this.openToolTipPopup=()=>{this.setState({isSrcPopupOpen:!1,isAltTextPopupOpen:!1,isToolTipPopupOpen:!0})},this.closeToolTipPopup=()=>{this.setState({isToolTipPopupOpen:!1})},this.openAltTextPopup=()=>{this.setState({isSrcPopupOpen:!1,isAltTextPopupOpen:!0,isToolTipPopupOpen:!1})},this.closeAltTextPopup=()=>{this.setState({isAltTextPopupOpen:!1})},this.getUseDataSourcesWithoutFields=()=>this.props.useDataSources&&this.props.useDataSources[0]&&this.props.useDataSources[0].dataSourceId?[this.props.useDataSources[0].without("fields")]:[],this.getSrcExpression=()=>{const e=this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.srcExpression&&this.props.config.functionConfig.srcExpression;return e&&e.asMutable({deep:!0})||null},this.getToolTipExpression=()=>{const e=this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTipExpression&&this.props.config.functionConfig.toolTipExpression;return e&&e.asMutable({deep:!0})||null},this.getAltTextExpression=()=>{const e=this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.altTextExpression&&this.props.config.functionConfig.altTextExpression;return e&&e.asMutable({deep:!0})||null},this.onToolTipExpChange=e=>{if(!e)return;const t=this.getSrcExpression(),i=this.getAltTextExpression(),s=this.mergeUseDataSources(t,e,i);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTipExpression"],e).setIn(["functionConfig","toolTip"],""),useDataSources:s}),this.setState({isToolTipPopupOpen:!1})},this.onAltTextExpChange=e=>{if(!e)return;const t=this.getSrcExpression(),i=this.getToolTipExpression(),s=this.mergeUseDataSources(t,i,e);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","altTextExpression"],e).setIn(["functionConfig","altText"],""),useDataSources:s}),this.setState({isAltTextPopupOpen:!1})},this.onSrcExpChange=e=>{if(!e)return;const t=this.getToolTipExpression(),i=this.getAltTextExpression(),s=this.mergeUseDataSources(e,t,i);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","srcExpression"],e).setIn(["functionConfig","imageParam"],this.resetImageParam(this.props.config.functionConfig.imageParam)),useDataSources:s}),this.setState({isSrcPopupOpen:!1})},this.mergeUseDataSources=(e,t,i)=>{const o=s.expressionUtils.getUseDataSourceFromExpParts(e&&e.parts,this.props.useDataSources),n=s.expressionUtils.getUseDataSourceFromExpParts(t&&t.parts,this.props.useDataSources),a=s.expressionUtils.getUseDataSourceFromExpParts(i&&i.parts,this.props.useDataSources);return this.mergeUseDataSourcesByDss(o,n,a)},this.mergeUseDataSourcesByDss=(e,t,i)=>{const o=this.getUseDataSourcesWithoutFields();let n=s.expressionUtils.mergeUseDataSources(o,t);return n=s.expressionUtils.mergeUseDataSources(n,i),n=s.expressionUtils.mergeUseDataSources(n,e),n},this.onResourceChange=e=>{let t=e;t||(t={});let i=Object(s.Immutable)(this.props.config.functionConfig);i.imageParam&&i.imageParam.cropParam&&(t.cropParam={svgViewBox:i.imageParam.cropParam.svgViewBox,svgPath:i.imageParam.cropParam.svgPath,cropShape:i.imageParam.cropParam.cropShape}),i=i.set("imageParam",t),i=i.set("imgSourceType",""),i=i.set("srcExpression",null),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",i)})},this.resetImageParam=e=>e&&e.cropParam?{cropParam:e.cropParam}:null,this.onToggleUseDataEnabled=e=>{this.props.onSettingChange({id:this.props.id,useDataSourcesEnabled:e})},this.onDataSourceChange=e=>{e&&this.props.onSettingChange({id:this.props.id,useDataSources:e,config:this.props.config.setIn(["functionConfig","dynamicUrlType"],null).setIn(["functionConfig","altTextWithAttachmentName"],null).setIn(["functionConfig","toolTipWithAttachmentName"],null).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],null).setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],null)})},this.onTypeNoSupportChange=()=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","dynamicUrlType"],null).setIn(["functionConfig","altTextWithAttachmentName"],null).setIn(["functionConfig","toolTipWithAttachmentName"],null).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],null).setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],null)})},this.onDataSourceRemoved=()=>{this.props.onSettingChange({id:this.props.id,useDataSources:[],config:this.props.config.setIn(["functionConfig","dynamicUrlType"],null).setIn(["functionConfig","altTextWithAttachmentName"],null).setIn(["functionConfig","toolTipWithAttachmentName"],null)})},this.handleChooseShape=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","imageParam","cropParam"],e)})},this.handleImageFillModeChange=e=>{let t=this.props.config.setIn(["functionConfig","imageFillMode"],e);t.functionConfig.imageParam&&t.functionConfig.imageParam.originalUrl&&(t=t.setIn(["functionConfig","imageParam","url"],t.functionConfig.imageParam.originalUrl)),t.functionConfig.imageParam&&t.functionConfig.imageParam.cropParam&&(t=t.setIn(["functionConfig","imageParam","cropParam"],{svgViewBox:t.functionConfig.imageParam.cropParam.svgViewBox,svgPath:t.functionConfig.imageParam.cropParam.svgPath,cropShape:t.functionConfig.imageParam.cropParam.cropShape})),this.props.onSettingChange({id:this.props.id,config:t})},this.getIsDataSourceUsed=()=>this.props.useDataSourcesEnabled,this.handleSymbolScaleChange=e=>{const t=parseFloat(e);t!==this.props.config.functionConfig.symbolScale&&(clearTimeout(this.onSymbolScaleChanged),this.onSymbolScaleChanged=setTimeout(()=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","symbolScale"],t)})},500))},this.onToolTipTextInputChange=e=>{this.setState({currentTipInput:e})},this.onAltTextTextInputChange=e=>{this.setState({currentAltTextInput:e})},this.onToolTipWithSomeKeyChange=(e,t)=>{const i={id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTip"],null).setIn(["functionConfig","toolTipExpression"],null).setIn(["functionConfig",e],t),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(i)},this.onAltTextWithSomeKeyChange=(e,t)=>{const i={id:this.props.id,config:this.props.config.setIn(["functionConfig","altText"],null).setIn(["functionConfig","altTextExpression"],null).setIn(["functionConfig",e],t),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(i)},this.onTabSelect=e=>{"dynamicSource"===e?this.imgSourceTypeChanged(r.b.ByDynamicUrl):this.imgSourceTypeChanged(r.b.ByUpload)},this.onSelectedUseDsChangeForSymbol=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],e).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],t)})},this.onSelectedUseDsChangeForAttachment=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],e).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],t)})},this.getWhetherDsIdInUseDss=e=>{if(!e)return!1;const t=this.props.useDataSources||[];if(e.split("-").reverse()[0]===s.CONSTANTS.SELECTION_DATA_VIEW_ID){const i=s.DataSourceManager.getInstance().getDataSource(e),o=i&&i.getMainDataSource(),n=o&&o.id;return t.some(e=>e.mainDataSourceId===n)}return t.some(t=>t.dataSourceId===e)},this.state={currentTipInput:this.props.config.functionConfig.toolTip,currentAltTextInput:this.props.config.functionConfig.altText,isShowLinkSetting:!1,shadowOpen:!!this.props.config.styleConfig.boxShadow,isSrcPopupOpen:!1,isToolTipPopupOpen:!1,isAltTextPopupOpen:!1}}getStyle(e){return s.css`
      .widget-setting-image {
        font-size: 13px;
        font-weight: lighter;
        overflow-y: auto;

        .setting-function {

          .setting-function-item {
            overflow: hidden;

            .setting-function-item-input {
              width: 200px;
            }
          }
        }

        .widget-image-chooseshape-item {
          border: 2px solid transparent;
        }

        .border-selected {
          border: 2px solid ${e.colors.palette.primary[600]} !important;
        }

        .uploadInput {
          position: absolute;
          opacity: 0;
          left: 0;
          top: 0;
          cursor: pointer;
        }

        .uploadFileName {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          opacity: 0.5;
        }

        .uploadInput-container {
          position: relative;
        }

        .setting-exterior {

          .exterior-shape-item {
            padding-bottom: 100%;
            cursor: pointer;
          }
        }

        .setting-stylepicker-selected {
          border-width: 2px !important;
        }

        .set-link-btn{
          background-color: ${e.colors.palette.light[500]};
        }
        .set-link-btn:hover, .set-link-btn:hover.set-link-btn:active{
          background-color: ${e.colors.palette.light[400]};
        }

        .set-clear-image {
          &:focus {
            outline: none;
            box-shadow: none !important;
            text-decoration: none;
          }
        }
      }
    `}componentDidUpdate(e){var t,i,o,n,a,p,c,l;if(this.props.useDataSourcesEnabled!==e.useDataSourcesEnabled){const e=this.props.useDataSourcesEnabled;let t=Object(s.Immutable)(this.props.config.functionConfig);e?this.props.config.functionConfig.imgSourceType===r.b.ByStaticUrl&&(t=t.set("imgSourceType",r.b.ByDynamicUrl)):this.props.config.functionConfig.imgSourceType===r.b.ByDynamicUrl&&(t=t.set("imgSourceType",r.b.ByStaticUrl)),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",t)})}this.props.useDataSourcesEnabled||((null===(i=null===(t=this.props.config)||void 0===t?void 0:t.functionConfig)||void 0===i?void 0:i.toolTip)!==(null===(n=null===(o=e.config)||void 0===o?void 0:o.functionConfig)||void 0===n?void 0:n.toolTip)&&this.setState({currentTipInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTip||""}),(null===(p=null===(a=this.props.config)||void 0===a?void 0:a.functionConfig)||void 0===p?void 0:p.altText)!==(null===(l=null===(c=e.config)||void 0===c?void 0:c.functionConfig)||void 0===l?void 0:l.altText)&&this.setState({currentAltTextInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.altText||""}))}render(){var e,t,i;const c=this.props.config.functionConfig.imageParam&&this.props.config.functionConfig.imageParam.originalName;return Object(s.jsx)("div",{css:this.getStyle(this.props.theme),className:"jimu-widget"},Object(s.jsx)("div",{className:"widget-setting-image"},Object(s.jsx)(o.SettingSection,null,Object(s.jsx)(o.SettingRow,null,Object(s.jsx)("div",{className:"choose-ds w-100"},Object(s.jsx)(p.DataSourceSelector,{types:this.supportedTypes,useDataSourcesEnabled:this.props.useDataSourcesEnabled,useDataSources:this.props.useDataSources,onToggleUseDataEnabled:this.onToggleUseDataEnabled,onChange:this.onDataSourceChange,widgetId:this.props.id}))),Object(s.jsx)(o.SettingRow,{label:this.props.intl.formatMessage({id:"imageSource",defaultMessage:l.a.imageSource})}),!this.props.useDataSourcesEnabled&&Object(s.jsx)(o.SettingRow,null,Object(s.jsx)("div",{className:"w-100 d-flex align-items-center"},Object(s.jsx)("div",{style:{minWidth:"60px"}},Object(s.jsx)(a.ImageSelector,{buttonClassName:"text-dark d-flex justify-content-center btn-browse",widgetId:this.props.id,buttonLabel:this.props.intl.formatMessage({id:"imageSet",defaultMessage:l.a.imageSet}),buttonSize:"sm",onChange:this.onResourceChange,imageParam:this.props.config.functionConfig.imageParam})),Object(s.jsx)("div",{style:{width:"70px"},className:"uploadFileName ml-2",title:c||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.a.imageNoneSource})},c||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.a.imageNoneSource})))),this.props.useDataSourcesEnabled&&Object(s.jsx)("div",{className:"mt-3"},Object(s.jsx)(n.Tabs,{fill:!0,type:"pills",onChange:this.onTabSelect,value:this.props.config.functionConfig.imgSourceType===r.b.ByDynamicUrl?"dynamicSource":"staticSource"},Object(s.jsx)(n.Tab,{id:"staticSource",title:this.props.intl.formatMessage({id:"staticSource",defaultMessage:l.a.staticSource})},Object(s.jsx)("div",{className:"mt-3"},(!this.props.config.functionConfig.imgSourceType||this.props.config.functionConfig.imgSourceType===r.b.ByUpload)&&Object(s.jsx)(o.SettingRow,null,Object(s.jsx)("div",{className:"w-100 d-flex align-items-center"},Object(s.jsx)("div",{style:{minWidth:"60px"}},Object(s.jsx)(a.ImageSelector,{buttonClassName:"text-dark d-flex justify-content-center btn-browse",widgetId:this.props.id,buttonLabel:this.props.intl.formatMessage({id:"imageSet",defaultMessage:l.a.imageSet}),buttonSize:"sm",disabled:this.props.config.functionConfig.imgSourceType===r.b.ByStaticUrl||this.props.config.functionConfig.imgSourceType===r.b.ByDynamicUrl,onChange:this.onResourceChange,imageParam:this.props.config.functionConfig.imageParam})),Object(s.jsx)("div",{style:{width:"70px"},className:"uploadFileName ml-2",title:c||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.a.imageNoneSource})},c||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.a.imageNoneSource})))))),Object(s.jsx)(n.Tab,{id:"dynamicSource",title:this.props.intl.formatMessage({id:"dynamicSource",defaultMessage:l.a.dynamicSource})},Object(s.jsx)("div",{className:"mt-3"},this.props.config.functionConfig.imgSourceType===r.b.ByDynamicUrl&&Object(s.jsx)(C,{dynamicUrlType:this.props.config.functionConfig.dynamicUrlType,srcExpression:this.getSrcExpression(),useDataSources:this.props.useDataSources,isSrcPopupOpen:this.state.isSrcPopupOpen,onDynamicUrlTypeChanged:this.dynamicUrlTypeChanged,onSrcExpChange:this.onSrcExpChange,openSrcPopup:this.openSrcPopup,closeSrcPopup:this.closeSrcPopup,widgetId:this.props.id,intl:this.props.intl,isSelectedFromRepeatedDataSourceContext:this.props.config.functionConfig.isSelectedFromRepeatedDataSourceContext,useDataSourceForMainDataAndViewSelector:this.getWhetherDsIdInUseDss(null===(t=null===(e=this.props.config.functionConfig)||void 0===e?void 0:e.useDataSourceForMainDataAndViewSelector)||void 0===t?void 0:t.dataSourceId)?this.props.config.functionConfig.useDataSourceForMainDataAndViewSelector:null,onSelectedUseDsChangeForSymbol:this.onSelectedUseDsChangeForSymbol,onSelectedUseDsChangeForAttachment:this.onSelectedUseDsChangeForAttachment,onTypeNoSupportChange:this.onTypeNoSupportChange})))))),Object(s.jsx)(o.SettingSection,null,Object(s.jsx)(o.SettingRow,null,Object(s.jsx)(n.Button,{className:"w-100 text-dark",type:"primary",onClick:()=>{this.setState({isShowLinkSetting:!this.state.isShowLinkSetting})},ref:this.linkSettingTrigger},Object(s.jsx)(n.Icon,{icon:x,className:"mr-3"}),this.props.intl.formatMessage({id:"setLinkForImage",defaultMessage:l.a.setLinkForImage}))),Object(s.jsx)(m,{imgSourceType:this.props.config.functionConfig.imgSourceType,dynamicUrlType:this.props.config.functionConfig.dynamicUrlType,intl:this.props.intl,useDataSourcesEnabled:this.props.useDataSourcesEnabled,useDataSources:this.props.useDataSources,openToolTipPopup:this.openToolTipPopup,closeToolTipPopup:this.closeToolTipPopup,toolTipExpression:this.getToolTipExpression(),onToolTipExpChange:this.onToolTipExpChange,isToolTipPopupOpen:this.state.isToolTipPopupOpen,toolTipConfigChange:this.toolTipConfigChange,onToolTipTextInputChange:this.onToolTipTextInputChange,toolTipText:this.state.currentTipInput,widgetId:this.props.id,toolTipWithAttachmentName:this.props.config.functionConfig.toolTipWithAttachmentName,onToolTipWithAttachmentNameChange:e=>{this.onToolTipWithSomeKeyChange("toolTipWithAttachmentName",e)}}),Object(s.jsx)(f,{imgSourceType:this.props.config.functionConfig.imgSourceType,dynamicUrlType:this.props.config.functionConfig.dynamicUrlType,intl:this.props.intl,useDataSourcesEnabled:this.props.useDataSourcesEnabled,useDataSources:this.props.useDataSources,openAltTextPopup:this.openAltTextPopup,closeAltTextPopup:this.closeAltTextPopup,altTextExpression:this.getAltTextExpression(),onAltTextExpChange:this.onAltTextExpChange,isAltTextPopupOpen:this.state.isAltTextPopupOpen,altTextConfigChange:this.altTextConfigChange,onAltTextTextInputChange:this.onAltTextTextInputChange,altTextText:this.state.currentAltTextInput,widgetId:this.props.id,altTextWithAttachmentName:this.props.config.functionConfig.altTextWithAttachmentName,onAltTextWithAttachmentNameChange:e=>{this.onAltTextWithSomeKeyChange("altTextWithAttachmentName",e)}})),Object(s.jsx)(o.SettingSection,null,this.props.config.functionConfig.dynamicUrlType!==r.a.Symbol&&Object(s.jsx)(o.SettingRow,{label:this.props.intl.formatMessage({id:"imagePosition",defaultMessage:l.a.imagePosition})},Object(s.jsx)("div",{style:{width:"50%"}},Object(s.jsx)(n.Select,{size:"sm",value:this.props.config.functionConfig.imageFillMode?this.props.config.functionConfig.imageFillMode:n.ImageFillMode.Fill,onChange:e=>this.handleImageFillModeChange(e.target.value)},Object(s.jsx)("option",{key:0,value:n.ImageFillMode.Fill},this.props.intl.formatMessage({id:"imageFill",defaultMessage:l.a.imageFill})),Object(s.jsx)("option",{key:1,value:n.ImageFillMode.Fit},this.props.intl.formatMessage({id:"imageFit",defaultMessage:l.a.imageFit}))))),this.props.config.functionConfig.dynamicUrlType===r.a.Symbol&&Object(s.jsx)(o.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"imageSymbolScale",defaultMessage:l.a.imageSymbolScale})},Object(s.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},Object(s.jsx)(n.Slider,{style:{width:"60%"},"data-field":"space",onChange:e=>{this.handleSymbolScaleChange(e.currentTarget.value)},value:this.props.config.functionConfig.symbolScale?this.props.config.functionConfig.symbolScale:1,title:"0.5-5",size:"sm",min:this.minSymbolScale,max:this.maxSymbolScale,step:this.SymbolScaleStep}),Object(s.jsx)(n.NumericInput,{style:{width:"35%"},showHandlers:!1,min:this.minSymbolScale,max:this.maxSymbolScale,value:this.props.config.functionConfig.symbolScale?this.props.config.functionConfig.symbolScale:1,onBlur:e=>{this.handleSymbolScaleChange(e.currentTarget.value)},title:"0.5-5"}))),this.props.config.functionConfig.dynamicUrlType!==r.a.Symbol&&Object(s.jsx)(o.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"imageShape",defaultMessage:l.a.imageShape})},Object(s.jsx)(g,{theme:this.props.theme,cropParam:this.props.config.functionConfig.imageParam&&this.props.config.functionConfig.imageParam.cropParam,onShapeChoosed:e=>{this.handleChooseShape(e)},intl:this.props.intl}))),this.state.isShowLinkSetting&&!s.urlUtils.getAppIdPageIdFromUrl().pageId&&Object(s.jsx)(o.LinkSettingPopup,{showDialog:this.state.isShowLinkSetting,onSettingCancel:()=>{this.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm,linkParam:this.props.config.functionConfig.linkParam,useDataSources:this.getIsDataSourceUsed()&&this.props.useDataSources,widgetId:this.props.id,trigger:null===(i=this.linkSettingTrigger)||void 0===i?void 0:i.current})))}}I.mapExtraStateProps=e=>({preDefinedConfigs:c})},82:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.42 8.84a.502.502 0 010 .71L6 10.97A3.515 3.515 0 111.03 6l1.42-1.42a.502.502 0 11.71.71L1.74 6.71a2.51 2.51 0 103.55 3.55l1.42-1.42a.502.502 0 01.71 0zm1.42-2.13l1.42-1.42a2.51 2.51 0 10-3.55-3.55L5.29 3.16a.502.502 0 11-.71-.71L6 1.03A3.515 3.515 0 1110.97 6L9.55 7.42a.502.502 0 11-.71-.71zm-4.97.71l3.55-3.55a.502.502 0 01.71.71L4.58 8.13a.502.502 0 01-.71-.71z" fill="#000" fill-rule="nonzero"></path></svg>'}}))}}}));