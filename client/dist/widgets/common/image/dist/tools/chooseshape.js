System.register(["jimu-core","jimu-ui"],(function(e){var t,o;return{setters:[function(e){t=e},function(e){o=e}],execute:function(){e(function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=341)}({0:function(e,o){e.exports=t},1:function(e,t){e.exports=o},105:function(e,t,o){"use strict";t.a={_widgetLabel:"Image",imageChooseShape:"Shape",imageCrop:"Crop"}},138:function(e,t,o){var i={"./circle.svg":139,"./hexagon.svg":140,"./oval.svg":141,"./pentagon.svg":142,"./rectangle.svg":143,"./rhombus.svg":144,"./triangle.svg":145};function n(e){var t=r(e);return o(t)}function r(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id=138},139:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M28 14c0 7.732-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0s14 6.268 14 14z"></path></svg>'},140:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14.124 0l12.124 7v14l-12.124 7L2 21V7z"></path></svg>'},141:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M28 14c0 5.523-6.268 10-14 10S0 19.523 0 14 6.268 4 14 4s14 4.477 14 10z"></path></svg>'},142:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 1l14 10.172-5.348 16.458H5.347L-.001 11.172z"></path></svg>'},143:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M0 0v28h28V0H0z"></path></svg>'},144:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 0l14 14-14 14L0 14z"></path></svg>'},145:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 0l14 28H0z"></path></svg>'},23:function(e,t,o){"use strict";var i,n;o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return n})),function(e){e.ByUpload="BYUPLOAD",e.ByStaticUrl="BYSTATICURL",e.ByDynamicUrl="BYDYNAMICURL"}(i||(i={})),function(e){e.Expression="EXPRESSION",e.Attachment="ATTACHMENT",e.Symbol="SYMBOL"}(n||(n={}))},341:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return l}));var i=o(0),n=o(1),r=o(23),a=o(105),s=o(38);class c extends i.React.PureComponent{constructor(){super(...arguments),this.cropShapeList=["rectangle","circle","hexagon","pentagon","rhombus","triangle"],this.shapeClick=(e,t)=>{if(this.props.widgetConfig.functionConfig.imageParam&&this.props.widgetConfig.functionConfig.imageParam.cropParam&&this.props.widgetConfig.functionConfig.imageParam.cropParam.cropShape===this.cropShapeList[t])return;const o=e.currentTarget.getElementsByTagName("svg")&&e.currentTarget.getElementsByTagName("svg")[0];if(o){const e=i.moduleLoader.getJimuForBuilderModules().getAppConfigAction();let n=Object(i.Immutable)(this.props.widgetConfig),r=Object(i.Immutable)(n.functionConfig.imageParam?n.functionConfig.imageParam.cropParam:null);r||(r=Object(i.Immutable)({})),r=r.set("svgViewBox",o.getAttribute("viewBox")),r=r.set("svgPath",o.getElementsByTagName("path")[0].getAttribute("d")),r=r.set("cropShape",this.cropShapeList[t]),n=n.setIn(["functionConfig","imageParam","cropParam"],r),e.editWidgetConfig(this.props.id,n).exec()}}}getStyle(){const e=this.props.theme;return i.css`
      .widget-image-chooseshape-item {
        background-color: ${e.colors.palette.light[300]};
      }

      .widget-image-chooseshape-item:hover {
        cursor: 'pointer';
        background-color: ${e.colors.palette.light[500]};
      }

      .chooseshape-item-selected {
        background-color: ${e.colors.palette.light[500]};
      }
      `}getTooltipStyle(){const e=this.props.theme;return i.css`
      border: none;

      .tooltip {
        color: ${e.colors.black};
        background-color: ${e.colors.palette.light[600]};
        border-color: ${e.colors.palette.light[300]};
      }
    `}render(){const{id:e,appConfig:t,theme:r,widgetConfig:a}=this.props,c=t.widgets[e],g=window.parent._widgetSettingManager.getSettingI18nMessagesByUri(c.uri);return Object(i.jsx)("div",{style:{width:"50px"},css:this.getStyle()},this.cropShapeList.map((e,t)=>{var c,l,u,p;const m=o(138)(`./${e}.svg`),h="image"+e,f=null!==(c=g[h])&&void 0!==c?c:s.a[h],d="rectangle"===e&&!(null===(l=a.functionConfig.imageParam)||void 0===l?void 0:l.cropParam)||(null===(p=null===(u=a.functionConfig.imageParam)||void 0===u?void 0:u.cropParam)||void 0===p?void 0:p.cropShape)===e;return Object(i.jsx)(n.Tooltip,{key:t,title:f,placement:"right-start",css:this.getTooltipStyle()},Object(i.jsx)("div",{className:Object(i.classNames)("w-100 d-flex justify-content-center align-items-center widget-image-chooseshape-item",{"chooseshape-item-selected":d}),style:{height:"40px"},onClick:e=>this.shapeClick(e,t)},Object(i.jsx)(n.Icon,{icon:m,color:r.colors.black})))}))}}const g=i.themeUtils.withBuilderTheme(c);class l{constructor(){this.index=0,this.id="choose-shape",this.classes={},this.isEmptySource=e=>!(e.functionConfig.imageParam&&e.functionConfig.imageParam.url||e.functionConfig.srcExpression||e.functionConfig.dynamicUrlType===r.a.Attachment)}getGroupId(){return null}getTitle(){const e=this.widgetId,t=i.i18n.getIntl(e);return t?t.formatMessage({id:"imageChooseShape",defaultMessage:a.a.imageChooseShape}):"Shape"}getIcon(){return o(342)}onClick(e){return null}visible(e){const t=Object(i.getAppStore)().getState().appConfig.widgets[e.layoutItem.widgetId];if(t){const e=t.config;return!this.isEmptySource(e)}return!1}getSettingPanel(e){const t=e.layoutItem.widgetId;if(this.classes[t])return this.classes[t];return this.classes[t]=i.ReactRedux.connect(e=>{const o=Object(i.Immutable)(e.appConfig.widgets[t].config);return{id:t,appConfig:e.appConfig,queryObject:e.queryObject,widgetConfig:o}})(g),this.classes[t]}}},342:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.022 11H1a1 1 0 01-1-1V1a1 1 0 011-1h9a1 1 0 011 1v4.022A5.5 5.5 0 115.022 11zm0-1A5.502 5.502 0 0110 5.022V1H1v9h4.022zm5.478 5a4.5 4.5 0 100-9 4.5 4.5 0 000 9z" fill="#000" fill-rule="nonzero"></path></svg>'},38:function(e,t,o){"use strict";t.a={imageSource:"Image source",imageNoneSource:"None",staticSource:"Static",dynamicSource:"Dynamic",imageSet:"Select an image",toolTip:"Tooltip",altText:"Alt text",imageSetLink:"Set link",imageShape:"Shape",setLinkForImage:"Set link",imagePosition:"Position",imageFit:"Fit",imageFill:"Fill",imageAttachment:"Attachment",imageCustom:"Custom",imageAttachmentName:"Attachment name",imageSymbol:"Symbol",imageSymbolScale:"Symbol scale",imagerectangle:"Rectangle/Square",imagecircle:"Oval/Circle",imagehexagon:"Hexagon",imagepentagon:"Pentagon",imagerhombus:"Rhombus",imagetriangle:"Triangle",imageShapeSettings:"Shape settings",imageUploadBlankStatus:'Click the "{ButtonString}" button to select an image from your device.'}}}))}}}));