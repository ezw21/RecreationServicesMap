System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-layouts/layout-runtime","jimu-for-builder","jimu-layouts/layout-builder"],(function(e){var t,o,n,r,i,l;return{setters:[function(e){t=e},function(e){o=e},function(e){n=e},function(e){r=e},function(e){i=e},function(e){l=e}],execute:function(){e(function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=488)}({0:function(e,o){e.exports=t},1:function(e,t){e.exports=o},10:function(e,t){e.exports=i},104:function(e,t,o){"use strict";t.a={_widgetLabel:"Widget Controller",placeholder:"Drag widget here",addWidget:"Add widget",moveOrRemoveWidget:"Move widget"}},2:function(e,t){e.exports=n},32:function(e,t,o){"use strict";o.d(t,"h",(function(){return b})),o.d(t,"f",(function(){return m})),o.d(t,"i",(function(){return y})),o.d(t,"l",(function(){return w})),o.d(t,"k",(function(){return j})),o.d(t,"j",(function(){return O})),o.d(t,"b",(function(){return x})),o.d(t,"g",(function(){return S})),o.d(t,"d",(function(){return C})),o.d(t,"c",(function(){return R})),o.d(t,"a",(function(){return I})),o.d(t,"e",(function(){return k}));var n=o(0),r=o(1),i=o(53),l=o(7),a=o(57),c=o(52);const{useState:s,useEffect:u,useMemo:d,useRef:p}=n.React,{useSelector:g}=n.ReactRedux,f=()=>document.body.getBoundingClientRect(),h=(e,t)=>e.right>=t.right||e.left<=t.left,v=(e,t)=>e.bottom>=t.bottom||e.top<=t.top,b=(e,t,o,n,l,a)=>{const[c,d]=s(()=>f()),[g,b]=s([o]),m=p(0);u(()=>{const e=()=>{const e=f();d(e)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const y=r.hooks.useEventCallback(t=>{if(m.current++,m.current>7)return console.warn(`Number of cycles: ${m.current}.You may have opened too many panels, and now there is not enough space for them to be placed without overstepping and blocking`),t;const n=((e,t)=>!(!e||!t)&&(h(e,t)||v(e,t)))(t,c);if(!n)return t;const{width:r,height:a}=t;let{left:s,top:u,right:d,bottom:p}=t;if(n){const t=h({left:s,top:u,right:d,bottom:p,width:r,height:a},c),n=v({left:s,top:u,right:d,bottom:p,width:r,height:a},c);t&&(s=e===i.a.SideBySide?o.x:c.right-r),n||e!==i.a.SideBySide||(u+=l),d=s+r,p=u+a}return y({left:s,top:u,right:d,bottom:p,width:r,height:a})});return u(()=>{const r=[];let a={width:0,height:0};t.forEach((t,c)=>{const s=0!==c?r[c-1]:o;let{x:u,y:d}=s;if(e===i.a.SideBySide){const{width:e}=a;u+=e,u+=0!==c?n:0}else e===i.a.Stack&&(u+=0!==c?n:0,d+=0!==c?l:0);const p={left:u,top:d,right:u+t.width,bottom:d+t.height,width:t.width,height:t.height},{left:g,top:f}=y(p);m.current>7?(u=s.x,d=s.y):(u=g,d=f),m.current=0,r.push({x:u,y:d}),a=t}),b(r)},[e,o,n,l,c.width,c.height,y,t]),g},m=e=>n.ReactRedux.useSelector(t=>{const o=t.appRuntimeInfo.selection,r=t.appConfig;let i=!1;if(o&&r.layouts[o.layoutId]){const t=r.layouts[o.layoutId].content[o.layoutItemId],a=t&&t.widgetId;let c=[];a&&(c=l.searchUtils.getChildrenContents(r,a,n.LayoutItemType.Widget,!1));let s=[a,e];c&&(s=s.concat(c)),i=s.includes(a)}return i}),y=()=>{const e=n.ReactRedux.useSelector(e=>e.appConfig.widgets);return t=>{var o;return null===(o=null==e?void 0:e[t])||void 0===o?void 0:o.label}},w=e=>n.ReactRedux.useSelector(t=>{var o,n;return null===(n=null===(o=t.appConfig.widgets)||void 0===o?void 0:o[e])||void 0===n?void 0:n.label}),j=(e,t)=>g(o=>{var n,r,i;return null===(i=null===(r=null===(n=o.appConfig.widgets)||void 0===n?void 0:n[e])||void 0===r?void 0:r.layouts)||void 0===i?void 0:i[t]}),O=(e,t)=>{const o=n.ReactRedux.useSelector(e=>e.widgetsRuntimeInfo),r=Object(c.b)(e,t),i=d(()=>Object.keys(o).filter(e=>{var t;const r=null===(t=o[e])||void 0===t?void 0:t.state;return!(r!==n.WidgetState.Opened&&r!==n.WidgetState.Active)}),[o]);return d(()=>r.filter(e=>i.includes(e)),[r,i])},x=e=>{const t=n.appActions.closeWidget(e);Object(n.getAppStore)().dispatch(t)},S=(e,t)=>{const o=O(e,t);return r.hooks.useEventCallback(()=>(e=>{const t=n.appActions.closeWidgets(e);Object(n.getAppStore)().dispatch(t)})(o))},C=e=>{const t=n.appActions.openWidgets(e);Object(n.getAppStore)().dispatch(t)},R=e=>{const t=n.appActions.openWidget(e);Object(n.getAppStore)().dispatch(t)},I=e=>{const t=n.appActions.activateWidget(e);Object(n.getAppStore)().dispatch(t)},k=(e,t)=>{const o=null==e?void 0:e.showLabel,n=null==e?void 0:e.labelGrowth,r=null==e?void 0:e.avatar.size,i=null==e?void 0:e.avatar.shape;return Object(a.b)(r,o,i)+t+n}},34:function(e,t){e.exports=l},36:function(e,t,o){"use strict";o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return i})),o.d(t,"f",(function(){return l})),o.d(t,"e",(function(){return a})),o.d(t,"d",(function(){return c})),o.d(t,"g",(function(){return s}));const n=5,r="controller",i="_openwidget",l=150,a=50,c=21,s={sm:24,default:32,lg:48}},488:function(e,t,o){"use strict";o.r(t);var n=o(0),r=o(73),i=o(32),l=o(36),a=o(57),c=o(7),s=o(34),u=o(1),d=o(10),p=o(52);const g=e=>{var t,o;const r=null==e?void 0:e.itemType,i=null===(t=null==e?void 0:e.manifest)||void 0===t?void 0:t.widgetType,l=null===(o=null==e?void 0:e.manifest)||void 0===o?void 0:o.name;return r!==n.LayoutItemType.Section&&i!==n.WidgetType.Layout&&"controller"!==l&&!c.utils.isWidgetPlaceholder(c.utils.getAppConfig(),e)},f=(e,t)=>{const o=Object(i.k)(e,t),r=Object(p.c)(e,t),l=n.ReactRedux.useSelector(e=>e.browserSizeMode);return e=>{console.log("SyncWidgets"),Object.keys(o).forEach(t=>{l!==t&&e.copyLayoutContent(r.id,o[t])})}},h=(e,t)=>{const o=f(e,t);return(e,t,n,r,i)=>((e,t,o,n,r,i)=>{const l={layoutId:e.id};let a=Object(d.getAppConfigAction)();Object(s.addItemToLayout)(a.appConfig,t,l,o,n,r||0).then(e=>{a=Object(d.getAppConfigAction)(e.updatedAppConfig),null==i||i(a),a.exec()})})(e,t,n,r,i,o)};var v=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const{useState:b,useRef:m,useEffect:y,forwardRef:w}=n.React,j=n.css`
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    bottom: 0;
    top: 0;
    right: 0;
    background: transparent;
    z-index: -1;
    > .drop-area {
      width: 100%;
      height: 100%;
    }
    > .overlay {
      position: absolute;
      left: 0;
      bottom: 0;
      top: 0;
      right: 0;
      background: transparent;
      z-index: -1;
      &.hide {
        display: none;
      }
    }
  `,O=w((e,t)=>{const{widgetId:o,layout:r,layouts:i,vertical:a,childClass:d,placeholder:p,className:g}=e,f=v(e,["widgetId","layout","layouts","vertical","childClass","placeholder","className"]),{color:w,size:[O,x]}=p,S=m(null),C=m(null),R=m(null),I=m(null),k=m(null),[A,E]=b(!1),N=u.hooks.useForkRef(S,t);y(()=>{C.current=new s.CanvasPane(k.current)},[]);const L=h(o,l.a);return Object(n.jsx)("div",Object.assign({className:Object(n.classNames)("drop-zone",g),ref:N},f,{css:j}),Object(n.jsx)(s.DropArea,{style:j,className:"drop-area",layouts:i,highlightDragover:!0,onDragOver:(e,t,o,r)=>{let i=r;const l=I.current,c=S.current.offsetHeight,s=S.current.offsetWidth;if(l&&l.length)if(a){const{insertY:e,refId:t}=((e,t,o)=>{const n=t.top+t.height/2;let r,i,l=!1;if(o.some((e,t)=>{if(e.top+e.height/2>n){if(0===t)r=e.top/2;else{const n=o[t-1];r=(e.top+n.top+n.height)/2}l=!0,i=e.id}return l}),!l){const t=o[o.length-1];r=(t.top+t.height+e.height)/2}return{insertY:r,refId:i}})(o,i,l);R.current=t,i={top:e-O/2+S.current.scrollTop,width:O,left:(s-O)/2+S.current.scrollLeft,height:x}}else{const{insertX:e,refId:t}=((e,t,o)=>{const n=t.left+t.width/2;let r,i,l=!1;if(o.some((e,t)=>{if(e.left+e.width/2>n){if(0===t)r=e.left/2;else{const n=o[t-1];r=(e.left+n.left+n.width)/2}l=!0,i=e.id}return l}),!l){const t=o[o.length-1];r=(t.left+t.width+e.width)/2}return{insertX:r,refId:i}})(o,i,l);R.current=t,i={left:e-x/2+S.current.scrollLeft,width:x,top:(c-O)/2+S.current.scrollTop,height:O}}else i=a?{top:o.height/2-x/2,width:O,left:x/2,height:x}:{left:o.width/2-x/2,width:x,top:(c-O)/2+S.current.scrollTop,height:O};C.current.clear(),C.current.setColor(n.polished.rgba(w,1)),C.current.drawRect(i)},onDrop:(e,t,o)=>{C.current.clear();let n=0;R.current?n=r.order&&r.order.indexOf(R.current)||0:r.order&&(n=r.order.length),L(r,e,t,o,n),R.current=null,I.current=[]},onToggleDragoverEffect:e=>{e&&(R.current=null,(()=>{I.current=[];const e=S.current.getBoundingClientRect(),t=S.current.parentNode.querySelectorAll("."+d);t&&t.length&&t.forEach(t=>{const o=t.getAttribute("data-layoutitemid");if(r.order&&r.order.includes(o)){const n=c.utils.relativeClientRect(t.getBoundingClientRect(),e);n.id=o,I.current.push(n)}}),a?I.current.sort((e,t)=>e.top-t.top):I.current.sort((e,t)=>e.left-t.left)})(),C.current.setSize(S.current.clientWidth,S.current.clientHeight)),E(e)}}),Object(n.jsx)("canvas",{className:Object(n.classNames)("overlay",{hide:!A}),ref:k}))});var x=o(85);const S=Object(s.withRnd)(!1)(x.b),C=e=>{const{className:t,draggable:o,layoutId:r,layoutItem:i,onClick:l,label:a,showLabel:c,labelGrowth:s,markerEnabled:u,avatar:d,active:p,removeWidget:g}=e;return n.React.createElement(S,{className:Object(n.classNames)(t,"brw-controller__layout-item"),layoutId:r,layoutItem:i,widgetid:i.widgetId,layoutItemId:i.id,label:a,markerEnabled:u,showLabel:c,labelGrowth:s,avatar:d,active:p,editDraggable:o,useDragHandler:!0,onClick:l,onMarkerClick:()=>g(i.widgetId)})};var R=o(2),I=o(104),k=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const A=o(79),{useState:E,useRef:N}=n.React,L=n.css`
  width: 300px;
  height: 300px;
  overflow-y: auto;
`,z=e=>{const{layout:t,item:o,insertSyncWidgetToLayout:r}=e,i=k(e,["layout","item","insertSyncWidgetToLayout"]),[l,a]=E(!1),c=N(null),s=N(n.themeUtils.getBuilderThemeVariables()),d=()=>{a(e=>!e)},p=u.hooks.useTranslate(I.a);return Object(n.jsx)(n.React.Fragment,null,Object(n.jsx)(x.a,Object.assign({},o,i,{title:p("addWidget"),icon:u.utils.toIconResult(A,"add"),ref:c,onClick:e=>{e.stopPropagation(),d()}})),l&&Object(n.jsx)(R.WidgetListPopper,{css:L,builderTheme:s.current,referenceElement:c.current,isItemAccepted:g,onItemSelect:e=>{var o,n;const i=null!==(n=null===(o=t.order)||void 0===o?void 0:o.length)&&void 0!==n?n:0;r(t,e,{},{},i)},onClose:d}))};var P=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const{useMemo:T,forwardRef:W}=n.React,M=W((e,t)=>{const{widgetId:o,draggable:s,itemStyle:u,vertical:v,className:b,space:m,dropZoneRef:y,onItemClick:w,onClick:j,scrollListRef:x}=e,S=P(e,["widgetId","draggable","itemStyle","vertical","className","space","dropZoneRef","onItemClick","onClick","scrollListRef"]),R=Object(i.k)(o,l.a),I=Object(p.c)(o,l.a),k=Object(p.a)(I),A=n.themeUtils.getBuilderThemeVariables(),E=Object(i.j)(o,l.a),N=Object(i.e)(u,m),L={color:null==A?void 0:A.colors.palette.primary[700],size:[N,l.c]},W=((e,t)=>{const o=f(e,t);return e=>{const t=Object(d.getAppConfigAction)();t.removeWidget(e),o(t),t.exec()}})(o,l.a),M=h(o,l.a),B=((e,t,o,r)=>T(()=>{var i,l;const c=Object.assign(Object.assign({},t),{showLabel:!o&&(null==t?void 0:t.showLabel),avatar:null==t?void 0:t.avatar});return{position:"end",length:Object(a.b)(null===(i=null==t?void 0:t.avatar)||void 0===i?void 0:i.size,null==t?void 0:t.showLabel,null===(l=null==t?void 0:t.avatar)||void 0===l?void 0:l.shape),node:n.React.createElement(z,{className:"scroll-list-item",insertSyncWidgetToLayout:r,layout:e,item:c})}},[t,e,o,r]))(I,u,0===k.length,M);return n.React.createElement(c.LayoutContext.Provider,{value:{isItemAccepted:g}},n.React.createElement("div",{ref:t,className:"layout controller-layout w-100 h-100","data-layoutid":I.id,onClick:j},n.React.createElement(O,{widgetId:o,vertical:v,layout:I,childClass:`layout-${I.id}-item`,placeholder:L,layouts:R}),n.React.createElement(r.a,Object.assign({},S,{ref:x,className:Object(n.classNames)(b,"layout-item-list"),vertical:v,placeholder:B,itemLength:N,space:m,autoHideArrow:!0,lists:k,autoScrollEnd:!0,createItem:(e,t)=>{const o=I.content[e],r=o&&o.widgetId||"",i=E.indexOf(r)>-1;return n.React.createElement(C,Object.assign({},u,{key:e,className:Object(n.classNames)(`layout-${null==I?void 0:I.id}-item layout-item`,t),widgetid:r,layoutId:I.id,layoutItemId:e,draggable:s,markerEnabled:!0,layoutItem:o,active:i,removeWidget:W,onClick:w}))}}))))}),{useEffect:B,useState:D}=n.React,_=n.css`
  /* hide rnd-resize bar for the outermost layout item */
  .controller-configuration-container > * > * > .builder-layout-item > .select-wrapper > .action-area {
      > .rnd-resize-top,
      > .rnd-resize-right,
      > .rnd-resize-bottom,
      > .rnd-resize-left {
        display: none;
      }
    }

    .controller-configuration-container .builder-layout-item > .select-wrapper > .lock-layout-tip {
      display: none;
    }

  .selectable {
    > div {
      cursor: default;
    }
  }

  .widget-container {
    height: 100%;
    overflow: auto;
  }
`,$={width:150,height:150},H={width:300,height:300},G=()=>!1,F=e=>{const{reference:t,placement:o,widgetId:r,controllerId:a,onClose:c,onSizeChange:g,size:f,version:h}=e,v=Object(i.k)(a,l.b),b=Object(p.c)(a,l.b),m=Object(i.f)(a),y=n.ReactRedux.useSelector(e=>{var t;return null===(t=e.widgetsState[a])||void 0===t?void 0:t.layoutAbility}),w=Object(i.l)(r),[j,O]=D(!!r);u.hooks.useUpdateEffect(()=>{O(!1),setTimeout(()=>{O(!!r)},100)},[r]),B(()=>{y&&(null==c||c())},[y,c]),B(()=>{m||null==c||c()},[m,c]);const x=u.hooks.useRefValue(b);B(()=>{r&&((e,t)=>{if(t){let o=Object(d.getAppConfigAction)().appConfig;const r=(e=>({type:"WIDGET",widgetId:e,bbox:{left:0,top:0,bottom:0,right:0},id:"0"}))(e);o=o.setIn(["layouts",t.id,"content",r.id],r).setIn(["layouts",t.id,"order"],[r.id]),Object(d.getAppConfigAction)(o).exec(),Object(n.getAppStore)().dispatch(n.appActions.selectionChanged(Object(n.Immutable)({layoutId:t.id,layoutItemId:"0"})))}})(r,x.current)},[r,x]);return Object(n.jsx)(n.React.Fragment,null,j&&Object(n.jsx)(u.Popper,{floating:!0,open:!0,headerTitle:w,onHeaderClose:c,minSize:$,onResize:e=>{g(r,e)},dragBounds:"body",defaultSize:f||H,css:_,version:h,className:"flex-grow-1",reference:t,placement:o},Object(n.jsx)("div",{className:"widget-container controller-configuration-container d-flex p-1"},Object(n.jsx)(s.LayoutBuilder,{isItemAccepted:G,layouts:v,itemDraggable:!1,itemResizable:!0,showDefaultTools:!1}))))},{useSelector:V}=n.ReactRedux,{useEffect:U,useRef:Y,useState:X}=n.React;t.default={Builder:e=>{var t,o,r,a;const{id:c,config:s,version:u}=e,p=null===(t=null==s?void 0:s.behavior)||void 0===t?void 0:t.vertical,g=null===(o=s.behavior)||void 0===o?void 0:o.size,f=p?"right-start":"bottom",h=V(e=>e.widgetsState[c]),v=null==h?void 0:h.layoutAbility,b=null==h?void 0:h.version,m=Y(null),y=Y({hideArrow:!0,disablePrevious:!0,disableNext:!1,scroll:()=>{}}),{hideArrow:w,disablePrevious:j,disableNext:O,scroll:x}=y.current,[S,C]=X(null),R=Object(i.j)(c,l.a),I=Object(i.g)(c,l.a),k=null==R?void 0:R[0],A=null==g?void 0:g[k];U(()=>{I()},[u,I]);const E=Object(i.f)(c);U(()=>{E||Object(n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(c,"layoutAbility",!1))},[E,c]),U(()=>{Object(n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(c,"hideArrow",w)),Object(n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(c,"disablePrevious",j)),Object(n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(c,"disableNext",O)),Object(n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(c,"onArrowClick",x))},[w,j,O,x,b,c]);return n.React.createElement(n.React.Fragment,null,k&&n.React.createElement(F,{reference:S,version:u,widgetId:k,controllerId:c,size:A,onClose:I,onSizeChange:(e,t)=>{if(!e)return;let o=(null==s?void 0:s.behavior.size)||Object(n.Immutable)({});o=o.set(e,t),(e=>{Object(d.getAppConfigAction)().editWidgetConfig(c,e).exec()})(s.setIn(["behavior","size"],o))},placement:f}),n.React.createElement(M,{ref:m,scrollListRef:y,onClick:e=>{var t;if(!v)return;const o=e.target,r=!(!o.classList||!o.classList.contains("scroll-list-root")),i=!(null===(t=m.current)||void 0===t?void 0:t.contains(o));(r||i)&&Object(n.getAppStore)().dispatch(n.appActions.widgetStatePropChange(c,"layoutAbility",!1))},vertical:null===(r=null==s?void 0:s.behavior)||void 0===r?void 0:r.vertical,widgetId:c,onItemClick:e=>{var t;const o=e.currentTarget,n=null===(t=o.dataset)||void 0===t?void 0:t.widgetid;C(o),I(),Object(i.c)(n)},itemStyle:s.appearance.card,draggable:null==h?void 0:h.layoutAbility,space:null===(a=null==s?void 0:s.appearance)||void 0===a?void 0:a.space}))}}},51:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},52:function(e,t,o){"use strict";o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return s}));var n=o(0),r=o(7);const{useMemo:i}=n.React,{useSelector:l}=n.ReactRedux,a=e=>{let t=(e.order&&e.order.asMutable()||[]).map(t=>{var o;return null===(o=e.content)||void 0===o?void 0:o[t]});return t=t.filter(e=>e&&!e.isPending),t.map(e=>null==e?void 0:e.id)},c=(e,t)=>{const o=s(e,t);return i(()=>(e=>a(e).map(t=>{var o,n;return null===(n=null===(o=e.content)||void 0===o?void 0:o[t])||void 0===n?void 0:n.widgetId}))(o),[o])},s=(e,t)=>l(o=>{var n,i,l;const a=null===(i=null===(n=(o=o.appContext.isBuilder?o.appStateInBuilder:o).appConfig.widgets)||void 0===n?void 0:n[e])||void 0===i?void 0:i.layouts,c=r.searchUtils.findLayoutId(a[t],o.browserSizeMode,o.appConfig.mainSizeMode);return null===(l=o.appConfig.layouts)||void 0===l?void 0:l[c]})},53:function(e,t,o){"use strict";var n;o.d(t,"a",(function(){return n})),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(n||(n={}))},57:function(e,t,o){"use strict";o.d(t,"b",(function(){return c})),o.d(t,"a",(function(){return u}));var n=o(0),r=o(1),i=o(36),l=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const{useState:a}=n.React,c=(e,t,o)=>{let n=i.g[e];t&&(n+=i.d);return n+=2*s(e,o),n},s=(e,t)=>"circle"===t?"sm"===e?4:"default"===e?2:"lg"===e?0:void 0:6,u=n.React.forwardRef((e,t)=>{var o;const{label:i,className:u,title:d,showLabel:p,labelGrowth:g=0,icon:f,marker:h,onMarkerClick:v,avatar:b,autoFlip:m,onClick:y,active:w,editDraggable:j}=e,O=l(e,["label","className","title","showLabel","labelGrowth","icon","marker","onMarkerClick","avatar","autoFlip","onClick","active","editDraggable"]),x=b||{},{shape:S,style:C}=x,R=l(x,["shape","style"]),I=null==R?void 0:R.size,k=n.React.useMemo(()=>{const e=c(I,p,S),t=e+g,o=s(I,S);return n.css`
      display: flex;
      align-items:center;
      flex-direction: column;
      justify-content: ${p?"space-around":"center"};
      width: ${n.polished.rem(t)} !important;
      height: ${n.polished.rem(e)};
      .tool-drag-handler {
        cursor: auto;
      }
      .avatar {
        padding: ${o}px;
        position: relative;
        text-align: center;
        .marker {
          position: absolute;
          right: 0;
          top: 0;
          padding: 0;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          .icon-btn-sizer {
            min-width: .625rem;
            min-height: .625rem;
          }
        }
      }
      .avatar-label {
        text-align: center;
        width: 100%;
        min-height: ${n.polished.rem(21)};
      }
    `},[I,p,S,g]),[A,E]=a(null);return Object(n.jsx)("div",Object.assign({},O,{ref:t,className:Object(n.classNames)("avatar-card",u+" rw-controller__avatar-card"),css:k,onClick:y}),Object(n.jsx)("div",{className:Object(n.classNames)({"no-drag-action":!j},"avatar tool-drag-handler"),onMouseEnter:()=>{E(!0)},onMouseLeave:()=>{E(!1)}},h&&A&&Object(n.jsx)(r.Button,{className:"marker",size:"sm",icon:!0,onClick:v},Object(n.jsx)(r.Icon,{size:10,icon:h})),Object(n.jsx)(r.Tooltip,{title:d||i,style:{pointerEvents:"none"}},Object(n.jsx)(r.Button,Object.assign({icon:!0,active:w,className:"avatar-button"},R,{style:Object.assign({borderRadius:"circle"===S?"50%":void 0},C)}),Object(n.jsx)(r.Icon,{color:"string"!=typeof f&&(null===(o=f.properties)||void 0===o?void 0:o.color),icon:"string"!=typeof f?f.svg:f,autoFlip:m})))),p&&Object(n.jsx)("div",{className:Object(n.classNames)("avatar-label text-capitalize text-truncate",{active:w})},i))})},7:function(e,t){e.exports=r},73:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));var n=o(0),r=o(1),i=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const{useRef:l,useEffect:a,useState:c,useImperativeHandle:s,forwardRef:u}=n.React,d=u((e,t)=>{var o,u;const{className:d,lists:p=[],createItem:g,vertical:f,itemLength:h,space:v,onChange:b,autoHideArrow:m,placeholder:y,minLength:w=h,autoScrollEnd:j}=e,O=i(e,["className","lists","createItem","vertical","itemLength","space","onChange","autoHideArrow","placeholder","minLength","autoScrollEnd"]),x=r.hooks.useTranslate(),S=f?"clientHeight":"clientWidth",C=null!==(o=null==p?void 0:p.length)&&void 0!==o?o:0,R=null!==(u=null==y?void 0:y.length)&&void 0!==u?u:h,I=null==y?void 0:y.node,k=null==y?void 0:y.position,A=((e,t,o)=>n.css`
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    .root {
      flex-direction: ${e?"column":"row"};
      width: 100%;
      height: 100%;
      min-width: ${n.polished.rem(o)};
      display: flex;
      justify-content: center;
      flex-wrap: nowrap;
      align-items: center;
      .scroll-list-item {
        &:not(:first-of-type) {
          margin-top: ${e?n.polished.rem(t):"unset"};
          margin-left: ${e?"unset":n.polished.rem(t)};
        }
      }
    }
`)(f,v,w),E=l(null),[N,L]=c(0),[z,P]=c(0),[T,W]=c(0),[M,B]=c(0),[D,_]=c(!0),[$,H]=c(!1),[G,F]=c(!0),V=r.hooks.useRefValue(M),U=r.hooks.useRefValue(T),Y=r.hooks.useRefValue(z);s(t,()=>({hideArrow:G,disablePrevious:D,disableNext:$,scroll:J,ref:E}));const X=l(()=>{});a(()=>(X.current=n.lodash.debounce(L,500),()=>{var e;null===(e=X.current)||void 0===e||e.cancel()}),[]);const Z=r.hooks.useEventCallback(()=>{var e;let t=E.current[S]||0;t+=v,t-=I?R:0,t=Math.max(t,w),null===(e=X.current)||void 0===e||e.call(X,t)});a(()=>{const e=E.current,t=new n.ResizeObserver(Z);return t.observe(e),()=>{t.disconnect()}},[E,Z]),a(()=>{const e=Math.floor(N/h);P(e)},[N,h]),a(()=>{let e=U.current,t=V.current;t-e>z?t=U.current+z:t-e<z&&(e=0,t=e+z),W(e),B(t)},[z,U,V]);const q=l([]),K=r.hooks.useEventCallback(()=>{if(j&&p.length>0&&q.current.length>0&&p[p.length-1]!==q.current[q.current.length-1]){let e=0,t=0;t=C,e=t-Y.current,e=Math.max(0,e),W(e),B(t)}});a(()=>{K(),q.current=p},[p,K]);const J=r.hooks.useEventCallback((e,t=!0)=>{const o=t?1:z;let n=0,r=0;e?(n=T-o,n<0?(n=0,r=n+z):r=M-o):(r=M+o,r>C?(r=C,n=r-z):n=T+o),W(n),B(r)});return a(()=>{const e=M-T>=C,t=M===C;_(0===T),H(t),F(e)},[T,M,C]),Object(n.jsx)(r.NavButtonGroup,Object.assign({},O,{css:A,type:"tertiary",vertical:f,onChange:e=>{null==b||b(e),J(e,!0)},disablePrevious:D,disableNext:$,previousAriaLabel:x("previous"),nextAriaLabel:x("next"),previousStyle:{visibility:G?"hidden":"visible"},nextStyle:{visibility:G?"hidden":"visible"},className:Object(n.classNames)("scroll-list",d)}),Object(n.jsx)("div",{className:"root scroll-list-root",ref:E},"start"===k&&I,p.slice(T,M).map(e=>g(e,"scroll-list-item")),"end"===k&&I))})},79:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 110 1.5h-6.5v6.5a.75.75 0 11-1.5 0v-6.5H.75a.75.75 0 110-1.5h6.5V.75A.75.75 0 018 0z" fill="#000" fill-rule="evenodd"></path></svg>'},85:function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"a",(function(){return r.a}));var n=o(0),r=o(57),i=o(1);const l=o(51),a=e=>{var t,o;const{markerEnabled:a,onMarkerClick:c,widgetid:s,showLabel:u,labelGrowth:d,avatar:p,onClick:g,active:f,editDraggable:h,className:v}=e,b=n.ReactRedux.useSelector(e=>{var t;return null===(t=e.appConfig.widgets)||void 0===t?void 0:t[s]});return b?n.React.createElement(r.a,{className:"rw-controller__widget-avatar-card "+v,"data-widgetid":s,showLabel:u,labelGrowth:d,avatar:p,label:b.label,icon:b.icon,autoFlip:null===(o=null===(t=null==b?void 0:b.manifest)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.flipIcon,marker:a?l:"",active:f,editDraggable:h,onMarkerClick:c,onClick:g}):n.React.createElement(i.Loading,null)};o(73),o(32)}}))}}}));