System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-layouts/layout-runtime","jimu-for-builder","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker"],(function(e){var t,n,a,i,o,l,r;return{setters:[function(e){t=e},function(e){n=e},function(e){a=e},function(e){i=e},function(e){o=e},function(e){l=e},function(e){r=e}],execute:function(){e(function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=506)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},10:function(e,t){e.exports=o},17:function(e,t){e.exports=l},2:function(e,t){e.exports=a},28:function(e,t){e.exports=r},36:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return s}));const a=5,i="controller",o="_openwidget",l=150,r=50,c=21,s={sm:24,default:32,lg:48}},506:function(e,t,n){"use strict";n.r(t);var a,i=n(0),o=n(10),l=n(2),r=n(7),c=n(53),s=n(1),d={_widgetLabel:"Widget Controller",behavior:"Behavior",openWidget:"How many widgets can be opened",displayType:"Display type",iconStyle:"Icon",showIconLabel:"Label",iconSizeOverride:"Size",iconInterval:"Spacing",textFormatOverride:"Text",iconBackgroundOverride:"Icon",openStart:"Open widgets when the page is loaded",widgetsSelected:"{widgetNumber} widgets selected"};!function(e){e[e.Circle=0]="Circle",e[e.Rectangle=1]="Rectangle"}(a||(a={}));const u=({className:e,title:t,type:n,active:o,theme:l,onClick:r})=>{const c=(e=>{const t=null==e?void 0:e.colors.white,n=null==e?void 0:e.colors.palette.primary[700],a=null==e?void 0:e.colors.palette.dark[900];return i.React.useMemo(()=>i.css`
    background-color: ${t};
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: ${i.polished.rem(28)};
    height: ${i.polished.rem(28)};
    margin: 2px;
    &.active{
      outline: 2px ${n} solid;
    }
    .inner {
      width: 66%;
      height: 66%;
      border: 1px ${a} solid;
      border-radius: 2px;
      &.circle {
        border-radius: 50%;
      }
    }
  `,[t,n,a])})(l);return Object(i.jsx)("div",{css:c,onClick:r,title:t,className:Object(i.classNames)("choose-shape",{active:o},e)},Object(i.jsx)("div",{className:Object(i.classNames)("inner",{rectangle:n===a.Rectangle},{circle:n===a.Circle})}))};var p=n(17),v=n(52),b=n(36),g=n(28);const m=({variant:e,appTheme:t,onSettingConfigChange:n,themeBoxDataItems:a,getI18nMessage:o})=>{var r;return Object(i.jsx)(l.SettingRow,{className:"sw-controller__advanced-setting",flow:"wrap"},Object(i.jsx)(s.Tabs,{type:"pills",className:"flex-grow-1 w-100 h-100",fill:!0,defaultValue:null===(r=a[0])||void 0===r?void 0:r.themeKey},a.map((a,r)=>{const c=null==e?void 0:e[a.themeKey],d=e=>Object(i.jsx)(g.ThemeColorPicker,{specificTheme:t,value:null==c?void 0:c[e],onChange:t=>n(["appearance","card","variant",a.themeKey,e],t)});return Object(i.jsx)(s.Tab,{key:r,id:a.themeKey,className:"tab-title-item",title:a.title},Object(i.jsx)(l.SettingRow,{className:"mt-2",label:o("textFormatOverride"),flow:"no-wrap"},Object(i.jsx)("div",{className:"font-setting-row"},Object(i.jsx)(p.FontStyle,{bold:null==c?void 0:c.bold,italic:null==c?void 0:c.italic,underline:null==c?void 0:c.underline,strike:null==c?void 0:c.strike,onChange:(e,t)=>n(["appearance","card","variant",a.themeKey,e],t)}),d("color"))),Object(i.jsx)(l.SettingRow,{className:"mt-2",label:o("iconBackgroundOverride"),flow:"no-wrap"},d("bg")))})))},{useSelector:j}=i.ReactRedux,f=i.css`
    font-size: 13px;
    font-weight: lighter;
    .setting-row-item {
      width: 100%;
      display: flex;
      margin-top: 0.5rem;
      > span.jimu-radio {
        flex-shrink: 0;
        margin-top: 0.1rem;
      }
      > label {
        margin-bottom: 0;
      }
    }
    .font-setting-row {
      display: flex;
      align-items: center;
    }
    .jimu-multi-select {
      width: 100%;
      > .jimu-dropdown {
        width: 100%;
      }
      > .jimu-menu-item {
        width: 100%;
        height: ${i.polished.rem(26)};
      }
    }
  `,h=(e,t)=>{var n,a,i,o,l;const r=(null===(a=null===(n=null==t?void 0:t.appearance)||void 0===n?void 0:n.card.avatar)||void 0===a?void 0:a.type)||"primary";let c=null===(l=null===(o=null===(i=null==e?void 0:e.components)||void 0===i?void 0:i.button)||void 0===o?void 0:o.variants)||void 0===l?void 0:l[r];return c=c.setIn(["default","color"],"#080808"),c=c.setIn(["active","color"],"#080808"),c},y=({getI18nMessage:e})=>[{themeKey:"default",title:e("regular")},{themeKey:"active",title:e("selected")},{themeKey:"hover",title:e("hover")}];t.default=e=>{var t,n,g,x,w,O,S,I,C,k,N,R,T,M,B;const{id:L,config:_,theme:K,onSettingChange:z}=e,P=null===(t=null==_?void 0:_.behavior)||void 0===t?void 0:t.onlyOpenOne,A=null===(n=null==_?void 0:_.behavior)||void 0===n?void 0:n.displayType,D=null===(g=null==_?void 0:_.behavior)||void 0===g?void 0:g.vertical,$=null===(x=null==_?void 0:_.behavior)||void 0===x?void 0:x.openStarts,G=null===(w=null==_?void 0:_.appearance)||void 0===w?void 0:w.space,W=null===(O=null==_?void 0:_.appearance)||void 0===O?void 0:O.advanced,E=null===(S=null==_?void 0:_.appearance.card)||void 0===S?void 0:S.showLabel,F=null!==(C=null===(I=null==_?void 0:_.appearance.card)||void 0===I?void 0:I.labelGrowth)&&void 0!==C?C:0,U=null===(N=null===(k=null==_?void 0:_.appearance.card)||void 0===k?void 0:k.avatar)||void 0===N?void 0:N.size,H=null===(T=null===(R=null==_?void 0:_.appearance.card)||void 0===R?void 0:R.avatar)||void 0===T?void 0:T.shape,V=null!==(M=null==$?void 0:$[0])&&void 0!==M?M:"none",X=D?G:F,Y=j(e=>e.appStateInBuilder.theme),q=((e,t)=>{const n=Object(v.b)(e,t),a=j(e=>e.appStateInBuilder.appConfig.widgets);return Object(i.Immutable)(n||[]).map(e=>{var t;return{label:null===(t=a[e])||void 0===t?void 0:t.label,value:e}})})(L,b.a),J=s.hooks.useTranslate(s.defaultMessages,r.defaultMessages,d),Q=W?null===(B=null==_?void 0:_.appearance)||void 0===B?void 0:B.card.variant:h(Y,_),Z=(e,t)=>{let n=null;n=Array.isArray(e)?_.setIn(e,t):_.set(e,t),z({id:L,config:n})},ee=(e,t,n)=>{if(!e.currentTarget.checked)return;let a=null;"onlyOpenOne"===t?a=_.setIn(["behavior","openStarts"],Object(i.Immutable)([])).setIn(["behavior",t],n):"displayType"===t&&(n=n?c.a.Stack:c.a.SideBySide,a=_.setIn(["behavior",t],n)),z({id:L,config:a})};return Object(i.jsx)("div",{className:"widget-setting-controller jimu-widget-setting",css:f},Object(i.jsx)(l.SettingSection,null,Object(i.jsx)(l.SettingRow,{flow:"no-wrap",label:J("direction")},Object(i.jsx)(l.DirectionSelector,{vertical:D,onChange:e=>{const t=_.setIn(["behavior","vertical"],e).setIn(["appearance","card","labelGrowth"],0).setIn(["appearance","space"],0);z({id:L,config:t}),Object(o.getAppConfigAction)().exchangeWidthAndHeight().exec()}}))),Object(i.jsx)(l.SettingSection,{title:J("behavior")},Object(i.jsx)(l.SettingRow,{flow:"wrap",label:J("openWidget")},Object(i.jsx)("div",{className:"setting-row-item"},Object(i.jsx)(s.Radio,{id:"only-open-one",style:{cursor:"pointer"},name:"only-open-one",onChange:e=>ee(e,"onlyOpenOne",!0),checked:P}),Object(i.jsx)(s.Label,{style:{cursor:"pointer"},for:"only-open-one",className:"ml-2"},J("single"))),Object(i.jsx)("div",{className:"setting-row-item"},Object(i.jsx)(s.Radio,{id:"open-multiple",style:{cursor:"pointer"},name:"only-open-one",onChange:e=>ee(e,"onlyOpenOne",!1),checked:!P}),Object(i.jsx)(s.Label,{style:{cursor:"pointer"},for:"open-multiple",className:"ml-2"},J("multiple")))),Object(i.jsx)(l.SettingRow,{flow:"wrap",label:J("openStart")},!P&&Object(i.jsx)(s.MultiSelect,{values:$,items:q,onClickItem:(e,t,n)=>{const a=P?n.length?[t]:[]:n;Z(["behavior","openStarts"],a)},displayByValues:e=>{if(P&&e.length){const t=q.find(t=>t.value===e[0]);return null==t?void 0:t.label}{const t=(null==e?void 0:e.length)||0;return J("widgetsSelected",{widgetNumber:t})}}}),P&&Object(i.jsx)(s.Select,{value:V,onChange:e=>{const t=e.target.value;let n=[];"none"!==t&&(n=[t]),Z(["behavior","openStarts"],n)},className:"w-100"},Object(i.jsx)("option",{value:"none"},J("none")),null==q?void 0:q.map(e=>Object(i.jsx)("option",{key:e.value,value:e.value},e.label)))),!P&&Object(i.jsx)(l.SettingRow,{flow:"wrap",label:J("displayType")},Object(i.jsx)("div",{className:"setting-row-item"},Object(i.jsx)(s.Radio,{id:"display-stack",style:{cursor:"pointer"},name:"display-type",onChange:e=>ee(e,"displayType",!0),checked:A===c.a.Stack}),Object(i.jsx)(s.Label,{style:{cursor:"pointer"},for:"display-stack",className:"ml-2"},J("stack"))),Object(i.jsx)("div",{className:"setting-row-item"},Object(i.jsx)(s.Radio,{id:"display-side-by-side",style:{cursor:"pointer"},name:"display-type",onChange:e=>ee(e,"displayType",!1),checked:A===c.a.SideBySide}),Object(i.jsx)(s.Label,{style:{cursor:"pointer"},for:"display-side-by-side",className:"ml-2"},J("sideBySide"))))),Object(i.jsx)(l.SettingSection,{title:J("appearance",!0)},Object(i.jsx)(l.SettingRow,{flow:"wrap",label:J("iconStyle")},Object(i.jsx)(u,{type:a.Circle,title:J("circle",!0),className:"mr-2",active:"circle"===H,theme:K,onClick:()=>Z(["appearance","card","avatar","shape"],"circle")}),Object(i.jsx)(u,{type:a.Rectangle,title:J("rectangle"),active:"rectangle"===H,theme:K,onClick:()=>Z(["appearance","card","avatar","shape"],"rectangle")})),Object(i.jsx)(l.SettingRow,{label:J("showIconLabel")},Object(i.jsx)(s.Switch,{checked:E,onChange:e=>Z(["appearance","card","showLabel"],e.target.checked)})),Object(i.jsx)(l.SettingRow,{flow:"no-wrap",label:J("iconSizeOverride")},Object(i.jsx)(s.Select,{value:U,onChange:e=>Z(["appearance","card","avatar","size"],e.target.value),className:"w-50"},Object(i.jsx)("option",{value:"sm"},J("small")),Object(i.jsx)("option",{value:"default"},J("medium")),Object(i.jsx)("option",{value:"lg"},J("large")))),Object(i.jsx)(l.SettingRow,{flow:"no-wrap",label:J("iconInterval")},Object(i.jsx)(p.InputUnit,{className:"w-50",min:0,max:999,value:{distance:X,unit:s.UnitTypes.PIXEL},onChange:({distance:e})=>(e=>{e=+e,isNaN(e)&&(e=0);let t=_;t=t.behavior.vertical?t.setIn(["appearance","space"],e).setIn(["appearance","card","labelGrowth"],0):t.setIn(["appearance","card","labelGrowth"],e).setIn(["appearance","space"],0),z({id:L,config:t})})(e)}))),Object(i.jsx)(l.SettingSection,null,Object(i.jsx)(l.SettingRow,{flow:"no-wrap",label:J("advance")},Object(i.jsx)(s.Switch,{checked:W,onChange:()=>{var e;const t=!(null===(e=null==_?void 0:_.appearance)||void 0===e?void 0:e.advanced);let n=_.setIn(["appearance","advanced"],t);if(t){const e=h(Y,_);n=n.setIn(["appearance","card","variant"],e)}else n=n.setIn(["appearance","card","variant"],void 0);z({id:L,config:n})}})),W&&Object(i.jsx)(m,{themeBoxDataItems:y({getI18nMessage:J}),variant:Q,appTheme:Y,onSettingConfigChange:Z,getI18nMessage:J})))}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var a=n(0),i=n(7);const{useMemo:o}=a.React,{useSelector:l}=a.ReactRedux,r=e=>{let t=(e.order&&e.order.asMutable()||[]).map(t=>{var n;return null===(n=e.content)||void 0===n?void 0:n[t]});return t=t.filter(e=>e&&!e.isPending),t.map(e=>null==e?void 0:e.id)},c=(e,t)=>{const n=s(e,t);return o(()=>(e=>r(e).map(t=>{var n,a;return null===(a=null===(n=e.content)||void 0===n?void 0:n[t])||void 0===a?void 0:a.widgetId}))(n),[n])},s=(e,t)=>l(n=>{var a,o,l;const r=null===(o=null===(a=(n=n.appContext.isBuilder?n.appStateInBuilder:n).appConfig.widgets)||void 0===a?void 0:a[e])||void 0===o?void 0:o.layouts,c=i.searchUtils.findLayoutId(r[t],n.browserSizeMode,n.appConfig.mainSizeMode);return null===(l=n.appConfig.layouts)||void 0===l?void 0:l[c]})},53:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(a||(a={}))},7:function(e,t){e.exports=i}}))}}}));