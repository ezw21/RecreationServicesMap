System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-for-builder","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-ui/advanced/expression-builder","jimu-ui/advanced/resource-selector"],(function(t){var e,s,i,o,n,r,p,a,l;return{setters:[function(t){e=t},function(t){s=t},function(t){i=t},function(t){o=t},function(t){n=t},function(t){r=t},function(t){p=t},function(t){a=t},function(t){l=t}],execute:function(){t(function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=491)}({0:function(t,s){t.exports=e},1:function(t,e){t.exports=s},10:function(t,e){t.exports=o},14:function(t,e){t.exports=n},17:function(t,e){t.exports=r},2:function(t,e){t.exports=i},28:function(t,e){t.exports=p},33:function(t,e){t.exports=a},44:function(t,e){t.exports=l},491:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return T}));var i=s(0),o=s(10),n=s(2),r=s(44),p=s(1),a=s(14),l=s(33),c=s(78);var u=s(17);const g=[p.BorderSides.TL,p.BorderSides.TR,p.BorderSides.BR,p.BorderSides.BL];class h extends i.React.PureComponent{constructor(){super(...arguments),this.onBackgroundStyleChange=t=>{var e,s;let o=Object(i.Immutable)(null!==(s=null===(e=this.props.style)||void 0===e?void 0:e.background)&&void 0!==s?s:{});for(const e in t)switch(e){case"fillType":o.fillType!==t[e]&&(o=o.set("fillType",t[e]));break;case"color":o=o.set("color",t[e]);break;case"image":o=o.set("image",t[e])}this.props.onChange(this.getStyleSettings().set("background",o))},this.updateBorder=t=>{this.props.onChange(this.getStyleSettings().set("border",t))},this.updateRadius=t=>{this.props.onChange(this.getStyleSettings().set("borderRadius",t))},this.updateShadow=t=>{this.props.onChange(this.getStyleSettings().set("boxShadow",t))}}getStyleSettings(){return this.props.style?Object(i.Immutable)(this.props.style):Object(i.Immutable)({})}render(){const t=this.props.style||Object(i.Immutable)({});return Object(i.jsx)("div",{className:"common-style-setting"},Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"background",defaultMessage:p.defaultMessages.background})}),Object(i.jsx)(n.SettingRow,null,Object(i.jsx)(u.BackgroundSetting,{background:t.background,onChange:this.onBackgroundStyleChange}))),Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"border",defaultMessage:p.defaultMessages.border})}),Object(i.jsx)(n.SettingRow,null,Object(i.jsx)(u.BorderSetting,{value:t.border,onChange:this.updateBorder})),Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"borderRadius",defaultMessage:p.defaultMessages.borderRadius}),flow:"wrap"},Object(i.jsx)(u.BorderRadiusSetting,{sides:g,value:t.borderRadius,onChange:this.updateRadius}))),Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"shadow",defaultMessage:p.defaultMessages.shadow})}),Object(i.jsx)(n.SettingRow,null,Object(i.jsx)(u.BoxShadowSetting,{value:t.boxShadow,onChange:this.updateShadow}))))}}var f=s(28);class d extends i.React.PureComponent{constructor(){super(...arguments),this.units=[p.UnitTypes.PIXEL],this.onSizeChange=t=>{this.changeIcon("size",t.distance)},this.onColorChange=t=>{this.changeIcon("color",t)},this.changeIcon=(t,e)=>{const s=this.props.iconProps?this.props.iconProps.set(t,e):Object(i.Immutable)({[t]:e});this.props.onChange(s)}}render(){const t=this.props.iconProps||{};return Object(i.jsx)("div",{className:"w-100 d-flex justify-content-between icon-size-font-style-setting"},Object(i.jsx)("div",null,Object(i.jsx)(u.InputUnit,{units:this.units,value:{distance:t.size,unit:p.UnitTypes.PIXEL},onChange:this.onSizeChange})),Object(i.jsx)("div",null,Object(i.jsx)(f.ThemeColorPicker,{specificTheme:this.props.appTheme,value:t.color,onChange:this.onColorChange})))}}class m extends i.React.PureComponent{constructor(){super(...arguments),this.changeText=(t,e)=>{const s=this.props.text?this.props.text.set(t,e):Object(i.Immutable)({[t]:e});this.props.onChange(s)}}render(){return Object(i.jsx)(u.TextStyle,Object.assign({},this.props.text,{onChange:this.changeText}))}}class x extends i.React.PureComponent{constructor(){super(...arguments),this.onTextChange=t=>{const e=this.getStyleFromCustomAndTheme().set("text",t);this.props.onChange(e)},this.onIconChange=t=>{const e=this.getStyleFromCustomAndTheme().set("iconProps",t);this.props.onChange(e)},this.onCommonChange=t=>{const e=this.getStyleFromCustomAndTheme(),s=Object.assign(Object.assign({},e),t);this.props.onChange(Object(i.Immutable)(s))},this.getStyleFromCustomAndTheme=()=>{const t=this.props.themeStyle||Object(i.Immutable)({}),e=this.props.style||Object(i.Immutable)({});return t.merge(e)}}render(){const t=this.getStyleFromCustomAndTheme();return Object(i.jsx)("div",{className:"advance-style-setting mt-3"},this.props.isTextSettingOpen&&Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"text",defaultMessage:p.defaultMessages.text})}),Object(i.jsx)(n.SettingRow,null,Object(i.jsx)(m,{appTheme:this.props.appTheme,text:t.text,onChange:this.onTextChange}))),this.props.isIconSettingOpen&&Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon})}),Object(i.jsx)(n.SettingRow,null,Object(i.jsx)(d,{appTheme:this.props.appTheme,intl:this.props.intl,iconProps:t.iconProps,onChange:this.onIconChange}))),Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(h,{intl:this.props.intl,style:t,onChange:this.onCommonChange})))}}class S extends i.React.PureComponent{constructor(t){super(t)}render(){return i.React.createElement("div",{className:"w-100"},i.React.createElement("div",{onClick:this.props.toggle,className:"d-flex justify-content-between mb-2"},i.React.createElement("div",null,i.React.createElement(p.Label,{for:"open-collapse",className:"collapse-label"},this.props.title)),i.React.createElement("div",null,i.React.createElement(p.Switch,{id:"open-collapse",name:"open-collapse",onChange:this.props.toggle,checked:this.props.isOpen}))),i.React.createElement(p.Collapse,{isOpen:this.props.isOpen},this.props.children))}}var C=s(87);const b=s(82),j=Object(i.Immutable)([l.ExpressionInputType.Static,l.ExpressionInputType.Attribute,l.ExpressionInputType.Statistics,l.ExpressionInputType.Expression]),v=Object(i.Immutable)([a.AllDataSourceTypes.FeatureLayer,a.AllDataSourceTypes.SceneLayer]);var y;!function(t){t.hover="HOVER",t.regular="REGULAR"}(y||(y={}));class T extends i.React.PureComponent{constructor(t){var e,s,n,r;super(t),this.linkSettingTrigger=i.React.createRef(),this.toggleLinkSetting=()=>{this.setState({isLinkSettingShown:!this.state.isLinkSettingShown})},this.onSettingLinkConfirm=t=>{let e;if(t){if(t.expression){const s=this.getTextExpression(),i=this.getTipExpression(),o=t.expression,n=this.mergeUseDataSources(s,i,o);e={id:this.props.id,config:this.props.config.setIn(["functionConfig","linkParam"],t),useDataSources:n}}else{let s;if(this.getIsDataSourceUsed()){const t=this.getTextExpression(),e=this.getTipExpression();s=this.mergeUseDataSources(t,e,null)}else s=this.getUseDataSourcesWithoutFields();e={id:this.props.id,config:this.props.config.setIn(["functionConfig","linkParam"],t),useDataSources:s}}this.props.onSettingChange(e),this.setState({isLinkSettingShown:!1})}},this.onTextChange=()=>{const t={id:this.props.id,config:this.props.config.setIn(["functionConfig","text"],this.state.currentTextInput).setIn(["functionConfig","textExpression"],null),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(t)},this.onToolTipChange=()=>{const t={id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTip"],this.state.currentTipInput).setIn(["functionConfig","toolTipExpression"],null),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(t)},this.onTextExpChange=t=>{if(!t)return;const e=this.getTipExpression(),s=this.getLinkSettingExpression(),o=this.mergeUseDataSources(Object(i.Immutable)(t),e,s);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","textExpression"],t).setIn(["functionConfig","text"],""),useDataSources:o}),this.setState({isTextExpOpen:!1})},this.onTipExpChange=t=>{if(!t)return;const e=this.getTextExpression(),s=this.getLinkSettingExpression(),o=this.mergeUseDataSources(e,Object(i.Immutable)(t),s);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTipExpression"],t).setIn(["functionConfig","toolTip"],""),useDataSources:o}),this.setState({isTipExpOpen:!1})},this.onToggleUseDataEnabled=t=>{var e,s,o,n,r,p;let a=this.props.config;t?(a=a.setIn(["functionConfig","textExpression"],this.getTextExpression()).setIn(["functionConfig","toolTipExpression"],this.getTipExpression()),a=a.set("functionConfig",a.functionConfig.without("text").without("toolTip")),(null===(o=null===(s=null===(e=this.props.config)||void 0===e?void 0:e.functionConfig)||void 0===s?void 0:s.linkParam)||void 0===o?void 0:o.linkType)===i.LinkType.WebAddress&&(a=a.setIn(["functionConfig","linkParam","expression"],this.getLinkSettingExpression()),a=a.setIn(["functionConfig","linkParam"],a.functionConfig.linkParam.without("value")))):(a=a.setIn(["functionConfig","text"],this.state.currentTextInput).setIn(["functionConfig","toolTip"],this.state.currentTipInput),a=a.set("functionConfig",a.functionConfig.without("textExpression").without("toolTipExpression")),(null===(p=null===(r=null===(n=this.props.config)||void 0===n?void 0:n.functionConfig)||void 0===r?void 0:r.linkParam)||void 0===p?void 0:p.linkType)===i.LinkType.WebAddress&&(a=a.setIn(["functionConfig","linkParam","value"],""),a=a.setIn(["functionConfig","linkParam"],a.functionConfig.linkParam.without("expression")))),this.props.onSettingChange({id:this.props.id,useDataSourcesEnabled:t,config:a})},this.onDataSourceChange=t=>{t&&this.props.onSettingChange({id:this.props.id,useDataSources:t})},this.getDefaultIconColor=t=>{const e=t?"regular":"hover";return this.props.config.getIn(["styleConfig","customStyle",e,"iconProps","color"])||this.props.appTheme.colors.dark},this.onIconResultChange=t=>{let e;if(t){e=this.props.config;const s=this.props.config.getIn(["functionConfig","icon","position"])||c.a.Left,i=this.getDefaultIconColor(!0),o=this.getDefaultIconColor(!1),n=this.props.config.getIn(["styleConfig","customStyle","regular","iconProps","size"])||t.properties.size,r=this.props.config.getIn(["styleConfig","customStyle","hover","iconProps","size"])||t.properties.size;e=e.setIn(["functionConfig","icon","data"],t.svg).setIn(["functionConfig","icon","position"],s).setIn(["styleConfig","customStyle","regular","iconProps","color"],i).setIn(["styleConfig","customStyle","regular","iconProps","size"],n).setIn(["styleConfig","customStyle","hover","iconProps","color"],o).setIn(["styleConfig","customStyle","hover","iconProps","size"],r)}else e=this.props.config.set("functionConfig",this.props.config.functionConfig.without("icon")).setIn(["styleConfig","customStyle","regular"],this.props.config.getIn(["styleConfig","customStyle","regular"],Object(i.Immutable)({})).without("iconProps")).setIn(["styleConfig","customStyle","hover"],this.props.config.getIn(["styleConfig","customStyle","hover"],Object(i.Immutable)({})).without("iconProps"));this.props.onSettingChange({id:this.props.id,config:e})},this.getWhetherHaveCustomStyle=t=>{const e=t?"regular":"hover";let s=this.props.config.getIn(["styleConfig","customStyle",e]);return s&&s.iconProps&&(s=s.without("iconProps")),!!(s&&Object.keys(s).length>0)},this.onRegularStyleChange=t=>{let e=this.props.config.setIn(["styleConfig","customStyle","regular"],t);this.getWhetherHaveCustomStyle(!1)||(e=e.setIn(["styleConfig","customStyle","hover"],this.getThemeStyle(!1))),e.getIn(["styleConfig","themeStyle"])&&(e=e.set("styleConfig",e.styleConfig.without("themeStyle"))),this.props.onSettingChange({id:this.props.id,config:e})},this.onHoverStyleChange=t=>{let e=this.props.config.setIn(["styleConfig","customStyle","hover"],t);this.getWhetherHaveCustomStyle(!0)||(e=e.setIn(["styleConfig","customStyle","regular"],this.getThemeStyle(!0))),e.getIn(["styleConfig","themeStyle"])&&(e=e.set("styleConfig",e.styleConfig.without("themeStyle"))),this.props.onSettingChange({id:this.props.id,config:e})},this.onIconPositionChange=t=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","icon","position"],t.target.value)})},this.onAdvanceTabSelect=t=>{const e=t===y.hover;o.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:this.props.id,propKey:"isConfiguringHover",value:e})},this.mergeUseDataSources=(t,e,s)=>{const o=i.expressionUtils.getUseDataSourceFromExpParts(t&&t.parts,this.props.useDataSources),n=i.expressionUtils.getUseDataSourceFromExpParts(e&&e.parts,this.props.useDataSources),r=i.expressionUtils.getUseDataSourceFromExpParts(s&&s.parts,this.props.useDataSources);return this.mergeUseDataSourcesByDss(o,n,r)},this.mergeUseDataSourcesByDss=(t,e,s)=>{const o=this.getUseDataSourcesWithoutFields();let n=i.expressionUtils.mergeUseDataSources(o,t);return n=i.expressionUtils.mergeUseDataSources(n,e),n=i.expressionUtils.mergeUseDataSources(n,s),n},this.getUseDataSourcesWithoutFields=()=>this.props.useDataSources&&this.props.useDataSources[0]&&this.props.useDataSources[0].dataSourceId?Object(i.Immutable)([this.props.useDataSources[0].without("fields").asMutable({deep:!0})]):Object(i.Immutable)([]),this.getIsDataSourceUsed=()=>!!this.props.useDataSourcesEnabled,this.getTipExpression=()=>this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTipExpression&&this.props.config.functionConfig.toolTipExpression||Object(i.Immutable)({name:"",parts:[{type:i.ExpressionPartType.String,exp:`"${this.state.currentTipInput}"`}]}),this.getTextExpression=()=>this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.textExpression&&this.props.config.functionConfig.textExpression||Object(i.Immutable)({name:"",parts:[{type:i.ExpressionPartType.String,exp:`"${this.state.currentTextInput}"`}]}),this.getLinkSettingExpression=()=>{var t,e,s,o,n,r,p,a,l;return this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.linkParam&&this.props.config.functionConfig.linkParam&&this.props.config.functionConfig.linkParam.expression||((null===(s=null===(e=null===(t=this.props.config)||void 0===t?void 0:t.functionConfig)||void 0===e?void 0:e.linkParam)||void 0===s?void 0:s.linkType)===i.LinkType.WebAddress&&(null===(r=null===(n=null===(o=this.props.config)||void 0===o?void 0:o.functionConfig)||void 0===n?void 0:n.linkParam)||void 0===r?void 0:r.value)?Object(i.Immutable)({name:"",parts:[{type:i.ExpressionPartType.String,exp:`"${null===(l=null===(a=null===(p=this.props.config)||void 0===p?void 0:p.functionConfig)||void 0===a?void 0:a.linkParam)||void 0===l?void 0:l.value}"`}]}):null)},this.getThemeStyle=t=>{if(!this.props.config.getIn(["styleConfig","themeStyle"]))return Object(i.Immutable)({});const e=this.props.config.getIn(["styleConfig","themeStyle","quickStyleType"]),s=t?"default":"hover",o=this.props.appTheme.getIn(["components","button","variants",e,s])||{},n=this.props.appTheme.getIn(["components","button","sizes","default"])||{},r=parseFloat(p.styleUtils.remToPixel(n.borderRadius)),a={color:o.color,size:parseFloat(p.styleUtils.remToPixel(n.fontSize))},l={background:{color:o.bg,fillType:p.FillType.FILL},border:{type:p.NormalLineType.SOLID,color:o.border&&o.border.color,width:p.utils.stringOfLinearUnit({distance:o.border&&"string"==typeof o.border.width?parseFloat(p.styleUtils.remToPixel(o.border.width)):void 0,unit:p.UnitTypes.PIXEL})},text:{color:o.color,size:p.styleUtils.remToPixel(n.fontSize)},borderRadius:{unit:p.UnitTypes.PIXEL,number:[r,r,r,r]},iconProps:a};return Object(i.Immutable)(l)},this.openTextExpPopup=()=>{this.setState({isTextExpOpen:!0,isTipExpOpen:!1})},this.openTipExpPopup=()=>{this.setState({isTextExpOpen:!1,isTipExpOpen:!0})},this.closeTextExpPopup=()=>{this.setState({isTextExpOpen:!1,isTipExpOpen:!1})},this.closeTipExpPopup=()=>{this.setState({isTextExpOpen:!1,isTipExpOpen:!1})},this.showTextSetting=()=>!!(this.getIsDataSourceUsed()?!this.props.config.getIn(["functionConfig","textExpression"])||this.props.config.getIn(["functionConfig","textExpression"])&&this.props.config.getIn(["functionConfig","textExpression","parts"])&&(this.props.config.getIn(["functionConfig","textExpression","parts"]).length>1||'""'!==this.props.config.getIn(["functionConfig","textExpression","parts","0","exp"])):this.state.currentTextInput),this.showIconSetting=()=>!!this.props.config.getIn(["functionConfig","icon"]),this.toggleUseCustom=()=>{let t=this.props.config;t=t.setIn(["styleConfig","useCustom"],!t.getIn(["styleConfig","useCustom"])),t.getIn(["styleConfig","useCustom"])?(t=t.setIn(["styleConfig","customStyle","hover"],this.getThemeStyle(!1)),t=t.setIn(["styleConfig","customStyle","regular"],this.getThemeStyle(!0)),t=t.set("styleConfig",t.styleConfig.without("themeStyle"))):(t=t.setIn(["styleConfig","themeStyle","quickStyleType"],"default"),t=t.setIn(["styleConfig","customStyle","regular"],{iconProps:Object(C.a)(!0,"default",this.props.appTheme)}),t=t.setIn(["styleConfig","customStyle","hover"],{iconProps:Object(C.a)(!1,"default",this.props.appTheme)})),this.props.onSettingChange({id:this.props.id,config:t})},this.state={isLinkSettingShown:!1,isTextExpOpen:!1,isTipExpOpen:!1,currentTextInput:"string"==typeof(null===(s=null===(e=this.props.config)||void 0===e?void 0:e.functionConfig)||void 0===s?void 0:s.text)?null===(r=null===(n=this.props.config)||void 0===n?void 0:n.functionConfig)||void 0===r?void 0:r.text:this.props.intl.formatMessage({id:"variableButton",defaultMessage:p.defaultMessages.variableButton}),currentTipInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTip||""}}componentDidUpdate(t){var e,s,i,o,n,r,a,l,c,u,g,h;this.getIsDataSourceUsed()||((null===(s=null===(e=this.props.config)||void 0===e?void 0:e.functionConfig)||void 0===s?void 0:s.text)!==(null===(o=null===(i=t.config)||void 0===i?void 0:i.functionConfig)||void 0===o?void 0:o.text)&&this.setState({currentTextInput:"string"==typeof(null===(r=null===(n=this.props.config)||void 0===n?void 0:n.functionConfig)||void 0===r?void 0:r.text)?null===(l=null===(a=this.props.config)||void 0===a?void 0:a.functionConfig)||void 0===l?void 0:l.text:this.props.intl.formatMessage({id:"variableButton",defaultMessage:p.defaultMessages.variableButton})}),(null===(u=null===(c=this.props.config)||void 0===c?void 0:c.functionConfig)||void 0===u?void 0:u.toolTip)!==(null===(h=null===(g=t.config)||void 0===g?void 0:g.functionConfig)||void 0===h?void 0:h.toolTip)&&this.setState({currentTipInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTip||""}))}componentWillUnmount(){o.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:this.props.id,propKey:"isConfiguringHover",value:!1})}render(){var t,e,s;const o=this.props.config.functionConfig.icon?{svg:this.props.config.functionConfig.icon.data}:null,u=this.props.config.styleConfig&&this.props.config.styleConfig.customStyle,g=this.showTextSetting(),h=this.showIconSetting(),f=g&&h;return Object(i.jsx)("div",{css:(d=this.props.theme,i.css`
    .widget-setting-link {
      overflow-y: auto;
      font-size: 13px;
      font-weight: lighter;
      .collapse-label{
        color: ${d.colors.palette.dark[400]};
      }
      .font-size-container{
        width: ${i.polished.rem(82)};
      }
    }

  `)},Object(i.jsx)("div",{className:"widget-setting-link jimu-widget"},Object(i.jsx)("div",null,Object(i.jsx)(n.SettingSection,null,Object(i.jsx)(n.SettingRow,null,Object(i.jsx)("div",{className:"choose-ds w-100"},Object(i.jsx)(a.DataSourceSelector,{types:v,useDataSources:this.props.useDataSources,useDataSourcesEnabled:this.getIsDataSourceUsed(),onToggleUseDataEnabled:this.onToggleUseDataEnabled,onChange:this.onDataSourceChange,widgetId:this.props.id})))),Object(i.jsx)(n.SettingSection,null,Object(i.jsx)(n.SettingRow,null,Object(i.jsx)(p.Button,{className:"w-100 text-dark set-link-btn",type:"primary",onClick:this.toggleLinkSetting,ref:this.linkSettingTrigger},Object(i.jsx)("div",{className:"w-100 px-2 text-truncate"},Object(i.jsx)(p.Icon,{icon:b,size:12,className:"add-data-icon"}),this.props.intl.formatMessage({id:"setLink",defaultMessage:p.defaultMessages.setLink})))),Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"tooltip",defaultMessage:p.defaultMessages.tooltip})}),Object(i.jsx)(n.SettingRow,null,this.getIsDataSourceUsed()?Object(i.jsx)("div",{className:"w-100"},Object(i.jsx)(l.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.onTipExpChange,openExpPopup:this.openTipExpPopup,expression:this.getTipExpression(),isExpPopupOpen:this.state.isTipExpOpen,closeExpPopup:this.closeTipExpPopup,types:j,widgetId:this.props.id})):Object(i.jsx)(p.TextInput,{className:"w-100",value:this.state.currentTipInput,onChange:t=>{this.setState({currentTipInput:t.target.value})},onBlur:()=>{this.onToolTipChange()},onKeyUp:()=>{this.onToolTipChange()}})),Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"text",defaultMessage:p.defaultMessages.text})}),Object(i.jsx)(n.SettingRow,null,this.getIsDataSourceUsed()?Object(i.jsx)("div",{className:"w-100"},Object(i.jsx)(l.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.onTextExpChange,openExpPopup:this.openTextExpPopup,expression:this.getTextExpression(),isExpPopupOpen:this.state.isTextExpOpen,closeExpPopup:this.closeTextExpPopup,types:j,widgetId:this.props.id})):Object(i.jsx)(p.TextInput,{className:"w-100",value:this.state.currentTextInput,onChange:t=>{this.setState({currentTextInput:t.target.value})},onBlur:()=>{this.onTextChange()},onKeyUp:()=>{this.onTextChange()}})),Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon})},Object(i.jsx)(r.IconPicker,{icon:o,configurableOption:"none",onChange:this.onIconResultChange})),f&&Object(i.jsx)(n.SettingRow,{label:this.props.intl.formatMessage({id:"position",defaultMessage:p.defaultMessages.position})},Object(i.jsx)("div",null,Object(i.jsx)(p.Select,{onChange:this.onIconPositionChange,value:this.props.config.functionConfig&&this.props.config.functionConfig.icon&&this.props.config.functionConfig.icon.position},Object.keys(c.a).map(t=>Object(i.jsx)("option",{value:c.a[t],key:t},this.props.intl.formatMessage({id:t.toLowerCase(),defaultMessage:p.defaultMessages[t.toLowerCase()]}))))))),Object(i.jsx)(n.SettingSection,null,Object(i.jsx)(S,{title:this.props.intl.formatMessage({id:"advance",defaultMessage:p.defaultMessages.advance}),isOpen:!!(null===(e=null===(t=this.props.config)||void 0===t?void 0:t.styleConfig)||void 0===e?void 0:e.useCustom),toggle:this.toggleUseCustom},Object(i.jsx)(p.Tabs,{fill:!0,type:"pills",onChange:this.onAdvanceTabSelect,defaultValue:y.regular},Object(i.jsx)(p.Tab,{id:y.regular,title:this.props.intl.formatMessage({id:"regular",defaultMessage:p.defaultMessages.regular})},Object(i.jsx)(x,{intl:this.props.intl,appTheme:this.props.appTheme,style:u&&u.regular,themeStyle:this.getThemeStyle(!0),onChange:this.onRegularStyleChange,isTextSettingOpen:g,isIconSettingOpen:h})),Object(i.jsx)(p.Tab,{id:y.hover,title:this.props.intl.formatMessage({id:"hover",defaultMessage:p.defaultMessages.hover})},Object(i.jsx)(x,{intl:this.props.intl,appTheme:this.props.appTheme,style:u&&u.hover,themeStyle:this.getThemeStyle(!1),onChange:this.onHoverStyleChange,isTextSettingOpen:g,isIconSettingOpen:h})))))),this.state.isLinkSettingShown&&!i.urlUtils.getAppIdPageIdFromUrl().pageId&&Object(i.jsx)(n.LinkSettingPopup,{isOpen:this.state.isLinkSettingShown,onSettingCancel:()=>{this.setState({isLinkSettingShown:!1})},onSettingConfirm:this.onSettingLinkConfirm,linkParam:this.props.config.functionConfig.linkParam,useDataSources:this.getIsDataSourceUsed()&&this.props.useDataSources,widgetId:this.props.id,trigger:null===(s=this.linkSettingTrigger)||void 0===s?void 0:s.current})));var d}}T.mapExtraStateProps=(t,e)=>({appTheme:t&&t.appStateInBuilder&&t.appStateInBuilder.theme||Object(i.Immutable)({})})},78:function(t,e,s){"use strict";var i;s.d(e,"a",(function(){return i})),function(t){t.Left="LEFT",t.Right="RIGHT"}(i||(i={}))},82:function(t,e){t.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.42 8.84a.502.502 0 010 .71L6 10.97A3.515 3.515 0 111.03 6l1.42-1.42a.502.502 0 11.71.71L1.74 6.71a2.51 2.51 0 103.55 3.55l1.42-1.42a.502.502 0 01.71 0zm1.42-2.13l1.42-1.42a2.51 2.51 0 10-3.55-3.55L5.29 3.16a.502.502 0 11-.71-.71L6 1.03A3.515 3.515 0 1110.97 6L9.55 7.42a.502.502 0 11-.71-.71zm-4.97.71l3.55-3.55a.502.502 0 01.71.71L4.58 8.13a.502.502 0 01-.71-.71z" fill="#000" fill-rule="nonzero"></path></svg>'},87:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s(0),o=s(1);function n(t,e,s){const n=t?"default":"hover",r=Object(i.Immutable)(s),p=r.getIn(["components","button","variants",e,n,"color"]),a=r.getIn(["components","button","sizes","default","fontSize"]);return{color:p,size:parseFloat(o.styleUtils.remToPixel(a))}}}}))}}}));